(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{4719:function(e,r,n){Promise.resolve().then(n.bind(n,132))},132:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var t=n(7437),s=n(3063),a=n(3968),i=n(1351),l=n(2265),o=n(7567),c=n(1023),u=n(7629);function d(e){let{value:r,onValueChange:n,options:s,disabled:a,className:i,...l}=e;return(0,t.jsx)("div",{className:(0,u.cn)("flex gap-1 p-1 glass rounded-full border border-white/10",i),role:"tablist",...l,children:s.map(e=>{let s=r===e.value;return(0,t.jsx)("button",{type:"button",role:"tab","aria-selected":s,"aria-controls":"tabpanel-".concat(e.value),onClick:()=>!a&&n(e.value),disabled:a,className:(0,u.cn)("flex-1 py-2.5 px-4 rounded-full text-sm font-heading font-semibold transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/40 focus-visible:ring-offset-2",s?"bg-cyan-400/20 border border-cyan-400/50 text-cyan-300 shadow-neon-cyan":"text-cyan-400/70 hover:text-cyan-300 hover:bg-white/5",a&&"opacity-50 cursor-not-allowed"),children:e.label},e.value)})})}var p=n(9827),m=n(1713),g=n(1770),h=n(6994),b=n(3368);let x={async signIn(e,r){let{data:n,error:t}=await b.O.auth.signInWithPassword({email:e,password:r});if(n.user&&!t)try{let{data:r}=await b.O.from("profiles").select("id, display_name").eq("id",n.user.id).single();if(!r){let r=e.split("@")[0]||null;await b.O.from("profiles").insert({id:n.user.id,display_name:r}).then(e=>{let{error:r}=e;r&&"23505"!==r.code&&console.warn("Failed to create profile on sign in:",r)})}}catch(e){console.warn("Profile check/creation error on sign in (non-critical):",e)}return{user:n.user,error:t?Error(t.message):null}},async signUp(e,r){let{data:n,error:t}=await b.O.auth.signUp({email:e,password:r});if(n.user&&!t)try{let r=e.split("@")[0]||null;await b.O.from("profiles").insert({id:n.user.id,display_name:r}).then(e=>{let{error:r}=e;r&&"23505"!==r.code&&console.warn("Failed to create profile on sign up:",r)})}catch(e){console.warn("Profile creation error on sign up (non-critical):",e)}return{user:n.user,error:t?Error(t.message):null}},async signOut(){let{error:e}=await b.O.auth.signOut();return{error:e?Error(e.message):null}},async getCurrentUser(){let{data:{user:e}}=await b.O.auth.getUser();return e}},f=i.Ry({email:i.Z_().email("Invalid email address"),password:i.Z_().min(6,"Password must be at least 6 characters")}),y=e=>{let{className:r}=e;return(0,t.jsxs)("svg",{className:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M12 2C8.5 2 6 4.5 6 8c0 2 1.5 3.5 2.5 4.5L8 14h8l-.5-1.5c1-1 2.5-2.5 2.5-4.5 0-3.5-2.5-6-6-6z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,t.jsx)("path",{d:"M12 14v8M9 18h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})};function v(){var e,r;let[n,i]=(0,l.useState)(!1),{signIn:u,signUp:v,isSigningIn:w,isSigningUp:j,signInError:N,signUpError:k}=function(){let e=(0,p.NL)(),r=(0,h.s0)(),{data:n,isLoading:t}=(0,m.a)({queryKey:["auth","user"],queryFn:async()=>{let{data:{user:e}}=await b.O.auth.getUser();return e},staleTime:3e5}),s=(0,g.D)({mutationFn:e=>{let{email:r,password:n}=e;return x.signIn(r,n)},onSuccess:n=>{n.user&&!n.error&&(e.setQueryData(["auth","user"],n.user),e.invalidateQueries({queryKey:["auth","user"]}),setTimeout(()=>{r("/lobby")},100))}}),a=(0,g.D)({mutationFn:e=>{let{email:r,password:n}=e;return x.signUp(r,n)},onSuccess:n=>{n.user&&!n.error&&(e.setQueryData(["auth","user"],n.user),e.invalidateQueries({queryKey:["auth","user"]}),setTimeout(()=>{r("/lobby")},100))}}),i=(0,g.D)({mutationFn:()=>x.signOut(),onSuccess:()=>{e.setQueryData(["auth","user"],null),r("/")}});return{user:n,isLoading:t,signIn:s.mutate,signUp:a.mutate,signOut:i.mutate,isSigningIn:s.isPending,isSigningUp:a.isPending,isSigningOut:i.isPending,signInError:s.error,signUpError:a.error,signOutError:i.error}}(),{register:I,handleSubmit:O,formState:{errors:S},reset:E}=(0,s.cI)({resolver:(0,a.F)(f),defaultValues:{email:"",password:""}}),U=async e=>{n?v(e):u(e)},C=N||k,P=w||j;return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute inset-0 -z-10",children:[(0,t.jsx)("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at 20% 50%, rgba(157, 0, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 246, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(255, 0, 170, 0.08) 0%, transparent 50%), linear-gradient(180deg, #0a0015 0%, #120025 50%, #0a0015 100%)"}}),(0,t.jsx)("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(rgba(0, 246, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 246, 255, 0.03) 1px, transparent 1px)",backgroundSize:"50px 50px"}})]}),(0,t.jsx)("div",{className:"w-full max-w-md relative",children:(0,t.jsxs)("div",{className:"glass-lg rounded-2xl border border-white/10 p-8 sm:p-10 shadow-2xl",children:[(0,t.jsx)("div",{className:"flex justify-center mb-8",children:(0,t.jsx)("div",{className:"w-20 h-20 rounded-2xl glass border-2 border-cyan-400/50 flex items-center justify-center shadow-glow-cyan animate-pulse-glow",children:(0,t.jsx)(y,{className:"w-10 h-10 text-cyan-400"})})}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl sm:text-4xl font-heading font-bold text-cyan-300 text-glow-cyan mb-3 tracking-tight",children:"Cyber"}),(0,t.jsx)("p",{className:"text-cyan-400/70 text-sm sm:text-base font-medium",children:"Join the ultimate poker experience"})]}),(0,t.jsx)("div",{className:"mb-7",children:(0,t.jsx)(d,{value:n?"signup":"signin",onValueChange:e=>{i("signup"===e),E()},options:[{value:"signin",label:"Sign In"},{value:"signup",label:"Sign Up"}],disabled:P})}),C&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-pink-900/20 border border-pink-500/50 text-pink-300 rounded-lg text-sm font-medium",children:C instanceof Error?C.message:"An error occurred"}),(0,t.jsxs)("form",{onSubmit:O(U),className:"space-y-5",children:[(0,t.jsx)(c.I,{label:"Email",type:"email",...I("email"),placeholder:"player@cyberpoker.game",disabled:P,error:null===(e=S.email)||void 0===e?void 0:e.message,autoComplete:"email"}),(0,t.jsx)(c.I,{label:"Password",type:"password",...I("password"),placeholder:"••••••",disabled:P,error:null===(r=S.password)||void 0===r?void 0:r.message,autoComplete:n?"new-password":"current-password"}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(o.z,{type:"submit",disabled:P,isLoading:P,variant:"primary",size:"lg",className:"w-full",children:n?"Sign Up":"Sign In"})})]})]})})]})}function w(){return(0,t.jsx)(v,{})}},6994:function(e,r,n){"use strict";n.d(r,{UO:function(){return i},s0:function(){return a}});var t=n(9376),s=n(2265);function a(){let e=(0,t.useRouter)();return(r,n)=>{(null==n?void 0:n.replace)?e.replace(r):e.push(r)}}function i(){let e=(0,t.useParams)();return(0,s.useMemo)(()=>{let r={};return e&&Object.entries(e).forEach(e=>{let[n,t]=e;r[n]=Array.isArray(t)?t[0]:t}),r},[e])}},7567:function(e,r,n){"use strict";n.d(r,{z:function(){return i}});var t=n(7437),s=n(2265),a=n(7629);let i=(0,s.forwardRef)((e,r)=>{let{className:n,variant:s="primary",size:i="md",isLoading:l,children:o,disabled:c,...u}=e;return(0,t.jsxs)("button",{ref:r,className:(0,a.cn)("inline-flex items-center justify-center font-heading font-semibold transition-all duration-300 rounded-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-cyber-bg focus-visible:ring-cyan-400 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden",{primary:"glass border-2 border-cyan-400/60 text-cyan-300 hover:border-cyan-400 hover:text-cyan-200 hover:shadow-glow-cyan active:scale-95",secondary:"glass border-2 border-cyan-500/40 text-white hover:border-cyan-400/60 hover:shadow-neon-cyan active:scale-95",ghost:"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-900/20 border border-transparent hover:border-cyan-400/30 active:scale-95",danger:"glass border-2 border-pink-500/60 text-pink-300 hover:border-pink-400 hover:text-pink-200 hover:shadow-glow-magenta active:scale-95",success:"glass border-2 border-lime-400/60 text-lime-300 hover:border-lime-400 hover:text-lime-200 hover:shadow-glow-lime active:scale-95",warning:"glass border-2 border-purple-400/60 text-purple-300 hover:border-purple-400 hover:text-purple-200 hover:shadow-glow-purple active:scale-95"}[s],{sm:"px-3 py-1.5 text-xs h-8",md:"px-4 py-2 text-sm h-10",lg:"px-6 py-3 text-base h-12"}[i],n),disabled:c||l,...u,children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-300",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/20 to-transparent transform -skew-x-12 animate-scanline"})}),(0,t.jsx)("span",{className:"relative z-10",children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):o})]})});i.displayName="Button"},1023:function(e,r,n){"use strict";n.d(r,{I:function(){return i}});var t=n(7437),s=n(2265),a=n(7629);let i=(0,s.forwardRef)((e,r)=>{let{className:n,label:i,hint:l,error:o,id:c,...u}=e,d=(0,s.useId)(),p=c||d;return(0,t.jsxs)("div",{className:"w-full",children:[i&&(0,t.jsx)("label",{htmlFor:p,className:"block text-xs font-heading font-semibold text-cyan-400/80 mb-2 uppercase tracking-wider",children:i}),(0,t.jsx)("input",{ref:r,id:p,className:(0,a.cn)("w-full h-12 px-4 glass border rounded-lg","text-cyan-100 placeholder:text-cyan-400/50","focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400/60","focus:shadow-neon-cyan transition-all duration-300","disabled:opacity-50 disabled:cursor-not-allowed",o?"border-pink-500/60 focus:ring-pink-400/50 focus:border-pink-400/60":"border-cyan-400/30 hover:border-cyan-400/50",n),...u}),l&&!o&&(0,t.jsx)("p",{className:"mt-1.5 text-sm text-cyan-400/70",children:l}),o&&(0,t.jsx)("p",{className:"mt-1.5 text-sm text-pink-400 text-glow-magenta",children:o})]})});i.displayName="Input"},3368:function(e,r,n){"use strict";n.d(r,{O:function(){return l}});var t=n(4687),s=n(257);let a="https://watbrrrtsruvotjisvkp.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhdGJycnJ0c3J1dm90amlzdmtwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4Njc0NDQsImV4cCI6MjA4MTQ0MzQ0NH0.s3n81p9aX5cyWbOuPwoKjqLOW7X2nuJQBtxGz1sV3eQ";if(!a||!i)throw console.error("Missing Supabase environment variables:",{hasNextPublicUrl:!0,hasViteUrl:!!s.env.VITE_SUPABASE_URL,hasNextPublicKey:!0,hasViteKey:!!s.env.VITE_SUPABASE_ANON_KEY}),Error("Missing Supabase environment variables. Please check your .env.local file.");let l=(0,t.AY)(a,i)},7629:function(e,r,n){"use strict";function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.filter(Boolean).join(" ")}n.d(r,{cn:function(){return t}})}},function(e){e.O(0,[639,351,954,964,971,117,744],function(){return e(e.s=4719)}),_N_E=e.O()}]);