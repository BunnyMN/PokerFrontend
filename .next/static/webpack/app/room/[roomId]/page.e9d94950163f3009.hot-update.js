"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/room/[roomId]/page",{

/***/ "(app-pages-browser)/./src/pages/RoomPage.tsx":
/*!********************************!*\
  !*** ./src/pages/RoomPage.tsx ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RoomPage: function() { return /* binding */ RoomPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/navigation */ \"(app-pages-browser)/./src/lib/navigation.ts\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/supabase */ \"(app-pages-browser)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_gameSocket__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/gameSocket */ \"(app-pages-browser)/./src/lib/gameSocket.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/logger */ \"(app-pages-browser)/./src/lib/logger.ts\");\n/* harmony import */ var _types_cards__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../types/cards */ \"(app-pages-browser)/./src/types/cards.ts\");\n/* harmony import */ var _utils_cardSort__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/cardSort */ \"(app-pages-browser)/./src/utils/cardSort.ts\");\n/* harmony import */ var _components_TableView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/TableView */ \"(app-pages-browser)/./src/components/TableView.tsx\");\n/* harmony import */ var _components_PlayingCard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/PlayingCard */ \"(app-pages-browser)/./src/components/PlayingCard.tsx\");\n/* harmony import */ var _components_QueuePanel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/QueuePanel */ \"(app-pages-browser)/./src/components/QueuePanel.tsx\");\n/* harmony import */ var _components_AppShell__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/AppShell */ \"(app-pages-browser)/./src/components/AppShell.tsx\");\n/* harmony import */ var _components_ui_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/ui/Button */ \"(app-pages-browser)/./src/components/ui/Button.tsx\");\n/* harmony import */ var _components_ui_Card__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/ui/Card */ \"(app-pages-browser)/./src/components/ui/Card.tsx\");\n/* harmony import */ var _components_ui_Badge__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/ui/Badge */ \"(app-pages-browser)/./src/components/ui/Badge.tsx\");\n/* harmony import */ var _components_ui_Toast__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/ui/Toast */ \"(app-pages-browser)/./src/components/ui/Toast.tsx\");\n/* harmony import */ var _components_ui_Skeleton__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/ui/Skeleton */ \"(app-pages-browser)/./src/components/ui/Skeleton.tsx\");\n/* harmony import */ var _utils_cn__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils/cn */ \"(app-pages-browser)/./src/utils/cn.ts\");\n/* __next_internal_client_entry_do_not_use__ RoomPage auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst isDev = \"development\" === \"development\";\nfunction RoomPage() {\n    _s();\n    const { roomId } = (0,_lib_navigation__WEBPACK_IMPORTED_MODULE_2__.useParams)();\n    const navigate = (0,_lib_navigation__WEBPACK_IMPORTED_MODULE_2__.useNavigate)();\n    const [room, setRoom] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [players, setPlayers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentUserId, setCurrentUserId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [updatingReady, setUpdatingReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [leaving, setLeaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isStarting, setIsStarting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // WebSocket state\n    const [wsStatus, setWsStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"disconnected\");\n    const [wsMessages, setWsMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [wsError, setWsError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const wsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const connectingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const [wsEvents, setWsEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [wsUrl, setWsUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const shouldReconnectRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true) // Control reconnection\n    ;\n    const reconnectAttemptRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const roomChannelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null) // Track room channel to prevent duplicate subscriptions\n    ;\n    const playersChannelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null) // Track players channel to prevent duplicate subscriptions\n    ;\n    // Game state from WS\n    const [roomStatePlayers, setRoomStatePlayers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [roundStart, setRoundStart] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // DEALT state\n    const [yourHand, setYourHand] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [handOrder, setHandOrder] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]) // Custom order indices\n    ;\n    const [_pendingPlayCards, setPendingPlayCards] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null) // Cards we're trying to play (for error recovery) - state for setter, ref for reading\n    ;\n    const pendingPlayCardsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null) // Ref to access current pending cards in message handlers\n    ;\n    const [_starterPlayerId, setStarterPlayerId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [_starterReason, setStarterReason] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [seatedPlayerIds, setSeatedPlayerIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [queuePlayerIds, setQueuePlayerIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Game state\n    const [selectedCards, setSelectedCards] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentTurnPlayerId, setCurrentTurnPlayerId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [lastPlay, setLastPlay] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [handsCount, setHandsCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [actionError, setActionError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [_canPass, setCanPass] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false) // Legacy, kept for backward compatibility (server may still send it, but PASS button uses lastPlay instead)\n    ;\n    const [passedPlayerIds, setPassedPlayerIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [roundEnd, setRoundEnd] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Rules and scoring\n    const [scoreLimit, setScoreLimit] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(60);\n    const [_scoreboard, setScoreboard] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [scoreLimitInput, setScoreLimitInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(60);\n    const [totalScores, setTotalScores] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [eliminated, setEliminated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Helper function to get display name for a player\n    const getPlayerDisplayName = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId)=>{\n        var _player_profile;\n        const player = players.find((p)=>p.player_id === playerId);\n        if (player === null || player === void 0 ? void 0 : (_player_profile = player.profile) === null || _player_profile === void 0 ? void 0 : _player_profile.display_name) {\n            return player.profile.display_name;\n        }\n        // Fallback to short ID if no display_name\n        return playerId.length > 8 ? \"\".concat(playerId.substring(0, 8), \"...\") : playerId;\n    }, [\n        players\n    ]);\n    // Create player name map for passing to components\n    const playerNameMap = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const map = {};\n        players.forEach((p)=>{\n            var _p_profile;\n            const name = ((_p_profile = p.profile) === null || _p_profile === void 0 ? void 0 : _p_profile.display_name) || \"\";\n            if (name) {\n                map[p.player_id] = name;\n            }\n        });\n        return map;\n    }, [\n        players\n    ]);\n    // Create player avatar map for passing to components\n    const playerAvatarMap = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const map = {};\n        players.forEach((p)=>{\n            var _p_profile;\n            if ((_p_profile = p.profile) === null || _p_profile === void 0 ? void 0 : _p_profile.avatar_url) {\n                map[p.player_id] = p.profile.avatar_url;\n            }\n        });\n        return map;\n    }, [\n        players\n    ]);\n    // Auto-connect function: connects to WS if room status is \"playing\"\n    const connectIfPlaying = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (roomStatus, roomIdToConnect)=>{\n        // If roomStatus !== \"playing\", do nothing\n        if (roomStatus !== \"playing\") {\n            shouldReconnectRef.current = false // Stop reconnecting if room not playing\n            ;\n            return;\n        }\n        // Enable reconnection when connecting\n        shouldReconnectRef.current = true;\n        // If already connected or connecting, do nothing\n        if (wsRef.current) {\n            const readyState = wsRef.current.readyState;\n            if (readyState === WebSocket.OPEN) {\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] Already connected, skipping\");\n                return;\n            }\n            if (readyState === WebSocket.CONNECTING) {\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] Already connecting, skipping\");\n                return;\n            }\n            // If closing or closed, clean up first\n            if (readyState === WebSocket.CLOSING || readyState === WebSocket.CLOSED) {\n                wsRef.current.close();\n                wsRef.current = null;\n            }\n        }\n        if (connectingRef.current) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] Connection in progress (flag), skipping\");\n            return;\n        }\n        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] room.status is playing\");\n        try {\n            // Get Supabase session\n            const { data: { session } } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getSession();\n            const hasToken = !!(session === null || session === void 0 ? void 0 : session.access_token);\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] token present?\", hasToken);\n            if (!(session === null || session === void 0 ? void 0 : session.access_token)) {\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] No access token available\");\n                setWsError(\"No access token available\");\n                setWsStatus(\"error\");\n                return;\n            }\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] creating WS\");\n            // Connect to WS using gameSocket helper\n            connectingRef.current = true;\n            setWsStatus(\"connecting\");\n            setWsError(null);\n            // Get WS URL for display\n            const wsUrlEnv = \"ws:localhost:4000/ws\" || 0 || 0;\n            setWsUrl(wsUrlEnv);\n            const ws = (0,_lib_gameSocket__WEBPACK_IMPORTED_MODULE_4__.connectGameSocketDebug)(roomIdToConnect, session.access_token, (message)=>{\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] message handler received\", message.type);\n                // Handle incoming messages (only store in dev for debug UI)\n                if (isDev) {\n                    setWsMessages((prev)=>{\n                        const newMessages = [\n                            message,\n                            ...prev\n                        ].slice(0, 20);\n                        return newMessages;\n                    });\n                }\n                // Handle ERROR messages from server\n                if (message.type === \"ERROR\") {\n                    const errorMsg = message.error || message.message || \"Server error\";\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Server ERROR:\", errorMsg);\n                    setWsError(errorMsg);\n                    setWsStatus(\"error\");\n                } else if (message.type === \"WELCOME\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received WELCOME\");\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] WS connected because room is playing\");\n                    setWsStatus(\"connected\");\n                    setWsError(null);\n                    connectingRef.current = false;\n                    reconnectAttemptRef.current = 0;\n                    // Send SYNC_REQUEST after WELCOME\n                    // Use roomIdToConnect to ensure we have the correct roomId from the function parameter\n                    setTimeout(()=>{\n                        const currentRoomId = roomIdToConnect || roomId;\n                        if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN && currentRoomId) {\n                            try {\n                                // Validate roomId before sending\n                                if (!currentRoomId || typeof currentRoomId !== \"string\" || currentRoomId.trim() === \"\") {\n                                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Cannot send SYNC_REQUEST: Invalid roomId\", {\n                                        roomId: currentRoomId,\n                                        type: typeof currentRoomId,\n                                        fromParams: roomId,\n                                        fromConnect: roomIdToConnect\n                                    });\n                                    return;\n                                }\n                                const syncMessage = {\n                                    type: \"SYNC_REQUEST\",\n                                    roomId: currentRoomId.trim()\n                                };\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Sending SYNC_REQUEST:\", syncMessage);\n                                const messageString = JSON.stringify(syncMessage);\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] SYNC_REQUEST JSON:\", messageString);\n                                wsRef.current.send(messageString);\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] SYNC_REQUEST sent\");\n                            } catch (err) {\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Failed to send SYNC_REQUEST:\", err);\n                            }\n                        } else {\n                            var _wsRef_current;\n                            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Cannot send SYNC_REQUEST:\", {\n                                wsReady: ((_wsRef_current = wsRef.current) === null || _wsRef_current === void 0 ? void 0 : _wsRef_current.readyState) === WebSocket.OPEN,\n                                roomId: currentRoomId,\n                                roomIdFromParams: roomId,\n                                roomIdFromConnect: roomIdToConnect\n                            });\n                        }\n                    }, 100) // Small delay to ensure connection is stable\n                    ;\n                } else if (message.type === \"STATE\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received STATE\");\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] WS connected because room is playing\");\n                    setWsStatus(\"connected\");\n                    setWsError(null);\n                    connectingRef.current = false;\n                    reconnectAttemptRef.current = 0;\n                    // Also send SYNC_REQUEST after STATE (in case WELCOME was missed)\n                    // Use roomIdToConnect to ensure we have the correct roomId from the function parameter\n                    setTimeout(()=>{\n                        const currentRoomId = roomIdToConnect || roomId;\n                        if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN && currentRoomId) {\n                            try {\n                                // Validate roomId before sending\n                                if (!currentRoomId || typeof currentRoomId !== \"string\" || currentRoomId.trim() === \"\") {\n                                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Cannot send SYNC_REQUEST (after STATE): Invalid roomId\", {\n                                        roomId: currentRoomId,\n                                        type: typeof currentRoomId,\n                                        fromParams: roomId,\n                                        fromConnect: roomIdToConnect\n                                    });\n                                    return;\n                                }\n                                const syncMessage = {\n                                    type: \"SYNC_REQUEST\",\n                                    roomId: currentRoomId.trim()\n                                };\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Sending SYNC_REQUEST (after STATE):\", syncMessage);\n                                const messageString = JSON.stringify(syncMessage);\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] SYNC_REQUEST JSON (after STATE):\", messageString);\n                                wsRef.current.send(messageString);\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] SYNC_REQUEST sent (after STATE)\");\n                            } catch (err) {\n                                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Failed to send SYNC_REQUEST:\", err);\n                            }\n                        } else {\n                            var _wsRef_current;\n                            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Cannot send SYNC_REQUEST (after STATE):\", {\n                                wsReady: ((_wsRef_current = wsRef.current) === null || _wsRef_current === void 0 ? void 0 : _wsRef_current.readyState) === WebSocket.OPEN,\n                                roomId: currentRoomId,\n                                roomIdFromParams: roomId,\n                                roomIdFromConnect: roomIdToConnect\n                            });\n                        }\n                    }, 100);\n                } else if (message.type === \"SYNC_STATE\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received SYNC_STATE\");\n                    // Clear any pending play cards (state synced from server)\n                    setPendingPlayCards(null);\n                    pendingPlayCardsRef.current = null;\n                    // Apply SYNC_STATE - overwrite all relevant state (do NOT merge)\n                    if (message.seatedPlayerIds && Array.isArray(message.seatedPlayerIds)) {\n                        setSeatedPlayerIds(message.seatedPlayerIds);\n                    }\n                    if (message.queuePlayerIds && Array.isArray(message.queuePlayerIds)) {\n                        setQueuePlayerIds(message.queuePlayerIds);\n                    }\n                    if (message.currentTurnPlayerId) {\n                        setCurrentTurnPlayerId(message.currentTurnPlayerId);\n                    }\n                    if (message.lastPlay) {\n                        const normalizedLastPlay = {\n                            playerId: message.lastPlay.playerId,\n                            cards: Array.isArray(message.lastPlay.cards) ? message.lastPlay.cards.map((card)=>(0,_types_cards__WEBPACK_IMPORTED_MODULE_6__.normalizeCard)(card)) : [],\n                            kind: message.lastPlay.kind,\n                            fiveKind: message.lastPlay.fiveKind\n                        };\n                        setLastPlay(normalizedLastPlay);\n                    } else {\n                        setLastPlay(null);\n                    }\n                    if (message.handsCount && typeof message.handsCount === \"object\") {\n                        setHandsCount(message.handsCount);\n                    }\n                    if (message.totalScores && typeof message.totalScores === \"object\") {\n                        const scoresMap = {};\n                        for (const [playerId, score] of Object.entries(message.totalScores)){\n                            scoresMap[playerId] = typeof score === \"number\" ? score : 0;\n                        }\n                        setTotalScores(scoresMap);\n                    }\n                    if (message.eliminated && Array.isArray(message.eliminated)) {\n                        setEliminated(message.eliminated);\n                    }\n                    if (message.yourHand && Array.isArray(message.yourHand)) {\n                        const normalizedHand = message.yourHand.map((card)=>(0,_types_cards__WEBPACK_IMPORTED_MODULE_6__.normalizeCard)(card));\n                        const sortedHand = (0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.sortCards)(normalizedHand);\n                        setYourHand(sortedHand);\n                        setHandOrder([]) // Reset custom order when new hand is received\n                        ;\n                    }\n                    if (typeof message.scoreLimit === \"number\") {\n                        setScoreLimit(message.scoreLimit);\n                    }\n                } else if (message.type === \"ROOM_STATE\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received ROOM_STATE\");\n                    if (message.players && Array.isArray(message.players)) {\n                        setRoomStatePlayers(message.players);\n                        // Fetch profiles for any new players that don't have profiles yet\n                        // Use functional update to access current players state\n                        setPlayers((currentPlayers)=>{\n                            const newPlayerIds = message.players.map((p)=>p.playerId);\n                            const existingPlayerIds = new Set(currentPlayers.map((p)=>p.player_id));\n                            const missingPlayerIds = newPlayerIds.filter((id)=>!existingPlayerIds.has(id));\n                            if (missingPlayerIds.length > 0 && roomId) {\n                                // Fetch profiles for missing players asynchronously\n                                Promise.all(missingPlayerIds.map(async (playerId)=>{\n                                    try {\n                                        const { data: profile } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"profiles\").select(\"id, display_name, avatar_url\").eq(\"id\", playerId).single();\n                                        // Update players state with new profile\n                                        if (profile) {\n                                            setPlayers((prev)=>{\n                                                var _message_players_find;\n                                                const existing = prev.find((p)=>p.player_id === playerId);\n                                                if (existing) {\n                                                    return prev.map((p)=>p.player_id === playerId ? {\n                                                            ...p,\n                                                            profile: profile\n                                                        } : p);\n                                                }\n                                                // If player doesn't exist in players list, add them\n                                                return [\n                                                    ...prev,\n                                                    {\n                                                        player_id: playerId,\n                                                        room_id: roomId,\n                                                        is_ready: ((_message_players_find = message.players.find((p)=>p.playerId === playerId)) === null || _message_players_find === void 0 ? void 0 : _message_players_find.isReady) || false,\n                                                        left_at: null,\n                                                        joined_at: new Date().toISOString(),\n                                                        id: \"\",\n                                                        profile: profile\n                                                    }\n                                                ];\n                                            });\n                                        }\n                                    } catch (err) {\n                                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"Failed to fetch profile for player \".concat(playerId, \":\"), err);\n                                    }\n                                })).catch((err)=>{\n                                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"Failed to fetch profiles for new players:\", err);\n                                });\n                            }\n                            return currentPlayers // Return current state, updates will happen via setPlayers in Promise\n                            ;\n                        });\n                    }\n                } else if (message.type === \"ROUND_START\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received ROUND_START\");\n                    if (message.roomId && message.startedAt) {\n                        setRoundStart({\n                            roomId: message.roomId,\n                            startedAt: message.startedAt\n                        });\n                    }\n                } else if (message.type === \"RULES\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received RULES\");\n                    if (typeof message.scoreLimit === \"number\") {\n                        setScoreLimit(message.scoreLimit);\n                        setScoreLimitInput(message.scoreLimit);\n                    }\n                } else if (message.type === \"SCORE_UPDATE\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received SCORE_UPDATE\");\n                    if (message.totalScores && typeof message.totalScores === \"object\") {\n                        const scores = [];\n                        const scoresMap = {};\n                        for (const [playerId, score] of Object.entries(message.totalScores)){\n                            const scoreValue = typeof score === \"number\" ? score : 0;\n                            scoresMap[playerId] = scoreValue;\n                            scores.push({\n                                playerId,\n                                totalScore: scoreValue,\n                                eliminated: message.eliminated && Array.isArray(message.eliminated) ? message.eliminated.includes(playerId) : false\n                            });\n                        }\n                        setTotalScores(scoresMap);\n                        setScoreboard(scores);\n                        if (message.eliminated && Array.isArray(message.eliminated)) {\n                            setEliminated(message.eliminated);\n                        }\n                    }\n                } else if (message.type === \"DEALT\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received DEALT\");\n                    // Hide round end banner when new hand is dealt\n                    setRoundEnd(null);\n                    // Clear any pending play cards (new hand dealt)\n                    setPendingPlayCards(null);\n                    pendingPlayCardsRef.current = null;\n                    if (message.yourHand && Array.isArray(message.yourHand)) {\n                        // Normalize cards to handle various formats (numeric, symbol, or canonical)\n                        const normalizedHand = message.yourHand.map((card)=>(0,_types_cards__WEBPACK_IMPORTED_MODULE_6__.normalizeCard)(card));\n                        const sortedHand = (0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.sortCards)(normalizedHand);\n                        setYourHand(sortedHand);\n                        setSelectedCards([]) // Reset selection when new hand is dealt\n                        ;\n                        setHandOrder([]) // Reset custom order when new hand is dealt\n                        ;\n                    }\n                    if (message.starterPlayerId) {\n                        setStarterPlayerId(message.starterPlayerId);\n                    }\n                    if (message.reason) {\n                        setStarterReason(message.reason);\n                    }\n                    if (message.seatedPlayerIds && Array.isArray(message.seatedPlayerIds)) {\n                        setSeatedPlayerIds(message.seatedPlayerIds);\n                    }\n                } else if (message.type === \"GAME_STATE\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received GAME_STATE\");\n                    if (message.currentTurnPlayerId) {\n                        setCurrentTurnPlayerId(message.currentTurnPlayerId);\n                    }\n                    if (message.lastPlay) {\n                        const normalizedLastPlay = {\n                            playerId: message.lastPlay.playerId,\n                            cards: Array.isArray(message.lastPlay.cards) ? message.lastPlay.cards.map((card)=>(0,_types_cards__WEBPACK_IMPORTED_MODULE_6__.normalizeCard)(card)) : [],\n                            kind: message.lastPlay.kind,\n                            fiveKind: message.lastPlay.fiveKind // STRAIGHT, FLUSH, FULL_HOUSE, FOUR, STRAIGHT_FLUSH\n                        };\n                        setLastPlay(normalizedLastPlay);\n                        // If this is our play (successful), clear pending cards\n                        if (normalizedLastPlay.playerId === currentUserId && pendingPlayCardsRef.current) {\n                            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Play successful, clearing pending cards\");\n                            setPendingPlayCards(null);\n                            pendingPlayCardsRef.current = null;\n                        }\n                    } else {\n                        setLastPlay(null);\n                    }\n                    // Clear selection on GAME_STATE update (turn change)\n                    setSelectedCards([]);\n                    if (message.handsCount && typeof message.handsCount === \"object\") {\n                        setHandsCount(message.handsCount);\n                    }\n                    if (typeof message.canPass === \"boolean\") {\n                        setCanPass(message.canPass) // Legacy, kept for backward compatibility (not used for button logic)\n                        ;\n                    }\n                    // Handle passedPlayerIds if provided by server\n                    if (message.passedPlayerIds && Array.isArray(message.passedPlayerIds)) {\n                        setPassedPlayerIds(message.passedPlayerIds);\n                    } else {\n                        // Reset if not provided (server may omit it when no one has passed)\n                        setPassedPlayerIds([]);\n                    }\n                    // Handle queuePlayerIds if provided\n                    if (message.queuePlayerIds && Array.isArray(message.queuePlayerIds)) {\n                        setQueuePlayerIds(message.queuePlayerIds);\n                    }\n                    // Handle totalScores and eliminated if provided\n                    if (message.totalScores && typeof message.totalScores === \"object\") {\n                        const scoresMap = {};\n                        for (const [playerId, score] of Object.entries(message.totalScores)){\n                            scoresMap[playerId] = typeof score === \"number\" ? score : 0;\n                        }\n                        setTotalScores(scoresMap);\n                    }\n                    if (message.eliminated && Array.isArray(message.eliminated)) {\n                        setEliminated(message.eliminated);\n                    }\n                } else if (message.type === \"ACTION_ERROR\") {\n                    const errorMsg = message.error || message.message || \"Action error\";\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Received ACTION_ERROR:\", errorMsg);\n                    setActionError(errorMsg);\n                    // Restore cards if we had pending play cards (error recovery)\n                    const pendingCards = pendingPlayCardsRef.current;\n                    if (pendingCards && pendingCards.length > 0) {\n                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Restoring cards after ACTION_ERROR:\", pendingCards);\n                        setYourHand((prevHand)=>{\n                            if (!prevHand) return prevHand;\n                            // Add back the pending cards\n                            const restoredHand = [\n                                ...prevHand,\n                                ...pendingCards\n                            ];\n                            return (0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.sortCards)(restoredHand);\n                        });\n                        // Reset handOrder since we're restoring cards\n                        setHandOrder([]);\n                        // Clear pending cards\n                        setPendingPlayCards(null);\n                        pendingPlayCardsRef.current = null;\n                    }\n                    // Do NOT clear selection on error - user may want to adjust\n                    // Clear error after 5 seconds\n                    setTimeout(()=>setActionError(null), 5000);\n                } else if (message.type === \"ROUND_END\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] Received ROUND_END\");\n                    if (message.winnerPlayerId) {\n                        setRoundEnd({\n                            winnerPlayerId: message.winnerPlayerId\n                        });\n                    }\n                } else if (message.type === \"WS_ERROR\" || message.type === \"PARSE_ERROR\") {\n                    const errorMsg = message.error || \"WebSocket error\";\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Client error:\", errorMsg);\n                    setWsError(errorMsg);\n                    setWsStatus(\"error\");\n                    connectingRef.current = false;\n                } else if (message.type === \"WS_OPEN_TIMEOUT\") {\n                    const errorMsg = message.error || \"WebSocket open timeout\";\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[WS] Open timeout:\", errorMsg);\n                    setWsError(errorMsg);\n                    setWsStatus(\"error\");\n                    connectingRef.current = false;\n                }\n            }, (code, reason, wasClean)=>{\n                // On close - handle reconnection at RoomPage level\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[WS] close handler: code=\".concat(code, \", reason=\").concat(reason, \", wasClean=\").concat(wasClean));\n                wsRef.current = null;\n                connectingRef.current = false;\n                // Only attempt reconnect if it wasn't a manual close and room is still playing\n                if (shouldReconnectRef.current && (room === null || room === void 0 ? void 0 : room.status) === \"playing\" && !wasClean) {\n                    // Start reconnection with exponential backoff\n                    const reconnectDelays = [\n                        500,\n                        1000,\n                        2000,\n                        4000,\n                        8000\n                    ];\n                    const maxAttempts = 10;\n                    const attemptReconnect = async (attempt)=>{\n                        if (!shouldReconnectRef.current || (room === null || room === void 0 ? void 0 : room.status) !== \"playing\") {\n                            setWsStatus(\"disconnected\");\n                            return;\n                        }\n                        if (attempt > maxAttempts) {\n                            setWsStatus(\"disconnected\");\n                            setWsError(\"Failed to reconnect after 10 attempts\");\n                            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Reconnect] Max attempts reached, giving up\");\n                            return;\n                        }\n                        const delayIndex = Math.min(attempt - 1, reconnectDelays.length - 1);\n                        const delay = reconnectDelays[delayIndex];\n                        reconnectAttemptRef.current = attempt;\n                        setWsStatus(\"reconnecting\");\n                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Reconnect] Attempt \".concat(attempt, \" in \").concat(delay, \"ms\"));\n                        setTimeout(async ()=>{\n                            if (!shouldReconnectRef.current || (room === null || room === void 0 ? void 0 : room.status) !== \"playing\") {\n                                setWsStatus(\"disconnected\");\n                                return;\n                            }\n                            // Check if we're already connected/connecting before attempting\n                            if (wsRef.current) {\n                                const readyState = wsRef.current.readyState;\n                                if (readyState === WebSocket.OPEN || readyState === WebSocket.CONNECTING) {\n                                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Reconnect] Already connected/connecting, skipping\");\n                                    return;\n                                }\n                            }\n                            await connectIfPlaying(room.status, room.id);\n                            // Check connection status after a delay to see if we need to retry\n                            setTimeout(()=>{\n                                if (shouldReconnectRef.current && (room === null || room === void 0 ? void 0 : room.status) === \"playing\") {\n                                    // Check if we're still not connected\n                                    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n                                        attemptReconnect(attempt + 1);\n                                    }\n                                }\n                            }, delay + 1000) // Check after delay + 1s\n                            ;\n                        }, delay);\n                    };\n                    attemptReconnect(1);\n                } else {\n                    setWsStatus(\"disconnected\");\n                }\n            }, (logEntry)=>{\n                // Event log callback (only store in dev for debug UI)\n                if (isDev) {\n                    setWsEvents((prev)=>{\n                        const newEvents = [\n                            logEntry,\n                            ...prev\n                        ].slice(0, 20);\n                        return newEvents;\n                    });\n                }\n            });\n            wsRef.current = ws;\n            // Update wsRef when reconnecting (the reconnect creates a new ws)\n            if (ws.sendSyncRequest) {\n            // Store reference for SYNC_REQUEST\n            }\n        } catch (err) {\n            const errorMessage = err instanceof Error ? err.message : \"Failed to connect to game server\";\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[AutoConnect] Connection error:\", err);\n            setWsError(errorMessage);\n            setWsStatus(\"error\");\n            wsRef.current = null;\n            connectingRef.current = false;\n        }\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!roomId) {\n            navigate(\"/lobby\");\n            return;\n        }\n        // Guard: Don't create channels if they already exist and are active\n        if (roomChannelRef.current && playersChannelRef.current) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] Channels already exist, skipping creation\");\n            return;\n        }\n        const fetchData = async ()=>{\n            try {\n                const { data: { user } } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getUser();\n                if (!user) {\n                    navigate(\"/auth\");\n                    return;\n                }\n                setCurrentUserId(user.id);\n                // Fetch room\n                const { data: roomData, error: roomError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"rooms\").select(\"*\").eq(\"id\", roomId).single();\n                if (roomError || !roomData) {\n                    throw new Error(\"Room not found\");\n                }\n                setRoom(roomData);\n                // Fetch players\n                await fetchPlayers(roomId);\n                // Clean up existing channels if they exist (prevent duplicates)\n                if (playersChannelRef.current) {\n                    _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.removeChannel(playersChannelRef.current);\n                    playersChannelRef.current = null;\n                }\n                if (roomChannelRef.current) {\n                    _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.removeChannel(roomChannelRef.current);\n                    roomChannelRef.current = null;\n                }\n                // Subscribe to room_players changes\n                const channel = _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.channel(\"room_players:\".concat(roomId)).on(\"postgres_changes\", {\n                    event: \"*\",\n                    schema: \"public\",\n                    table: \"room_players\",\n                    filter: \"room_id=eq.\".concat(roomId)\n                }, ()=>{\n                    fetchPlayers(roomId);\n                }).subscribe();\n                playersChannelRef.current = channel;\n                // Subscribe to room status changes\n                const channelName = \"room:\".concat(roomId);\n                const filterString = \"id=eq.\".concat(roomId);\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] Creating channel:\", channelName);\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] Filter:\", filterString);\n                const roomChannel = _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.channel(channelName).on(\"postgres_changes\", {\n                    event: \"UPDATE\",\n                    schema: \"public\",\n                    table: \"rooms\",\n                    filter: filterString\n                }, (payload)=>{\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] payload received\");\n                    if (payload.new) {\n                        const updatedRoom = payload.new;\n                        // Only update if room actually changed to prevent unnecessary re-renders\n                        setRoom((prevRoom)=>{\n                            if (prevRoom && prevRoom.id === updatedRoom.id && prevRoom.status === updatedRoom.status && prevRoom.score_limit === updatedRoom.score_limit) {\n                                // Room hasn't meaningfully changed, return previous to prevent re-render\n                                return prevRoom;\n                            }\n                            return updatedRoom;\n                        });\n                        // Auto-connect when status becomes \"playing\" (for ALL users)\n                        if (updatedRoom.status === \"playing\") {\n                            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] Realtime: room status updated to playing\");\n                            connectIfPlaying(updatedRoom.status, roomId);\n                        }\n                    }\n                }).subscribe((status)=>{\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] Subscribe status:\", status);\n                    if (status === \"SUBSCRIBED\") {\n                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] Successfully subscribed to room updates\");\n                    } else if (status === \"TIMED_OUT\") {\n                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"[RoomsRT] Subscription timed out\");\n                    } else if (status === \"CHANNEL_ERROR\") {\n                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[RoomsRT] Channel error occurred\");\n                    } else if (status === \"CLOSED\") {\n                        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[RoomsRT] Channel closed\");\n                    }\n                });\n                roomChannelRef.current = roomChannel;\n                // A) After initial room fetch: auto-connect if already \"playing\"\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[AutoConnect] Initial fetch: room.status =\", roomData.status);\n                connectIfPlaying(roomData.status, roomId);\n                return ()=>{\n                    if (playersChannelRef.current) {\n                        _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.removeChannel(playersChannelRef.current);\n                        playersChannelRef.current = null;\n                    }\n                    if (roomChannelRef.current) {\n                        _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.removeChannel(roomChannelRef.current);\n                        roomChannelRef.current = null;\n                    }\n                    // Close WebSocket on unmount\n                    if (wsRef.current) {\n                        wsRef.current.close();\n                        wsRef.current = null;\n                    }\n                    connectingRef.current = false;\n                };\n            } catch (err) {\n                if (err instanceof Error) {\n                    setError(err.message);\n                } else {\n                    setError(\"Failed to load room\");\n                }\n            } finally{\n                setLoading(false);\n            }\n        };\n        fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        roomId\n    ]) // Only depend on roomId - navigate is stable, but we removed it to be safe\n    ;\n    // Initialize scoreLimit from room data\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (room === null || room === void 0 ? void 0 : room.score_limit) {\n            setScoreLimit(room.score_limit);\n            setScoreLimitInput(room.score_limit);\n        }\n    }, [\n        room === null || room === void 0 ? void 0 : room.score_limit\n    ]);\n    // Fallback polling: check room status every 1s if not connected and room not playing\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!roomId || !room) return;\n        // Only poll if:\n        // - WS is not connected/connecting\n        // - local room.status is not \"playing\" yet\n        const shouldPoll = wsStatus !== \"connected\" && wsStatus !== \"connecting\" && room.status !== \"playing\";\n        if (!shouldPoll) {\n            return;\n        }\n        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Polling] Starting fallback polling for room status\");\n        const pollInterval = setInterval(async ()=>{\n            try {\n                const { data: roomData, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"rooms\").select(\"status\").eq(\"id\", roomId).single();\n                if (error) {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[Polling] Error fetching room status:\", error);\n                    return;\n                }\n                if ((roomData === null || roomData === void 0 ? void 0 : roomData.status) === \"playing\") {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Polling] Room status changed to playing, connecting WS\");\n                    connectIfPlaying(\"playing\", roomId);\n                    // Stop polling once connected\n                    clearInterval(pollInterval);\n                }\n            } catch (err) {\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[Polling] Polling error:\", err);\n            }\n        }, 1000);\n        return ()=>{\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Polling] Stopping fallback polling\");\n            clearInterval(pollInterval);\n        };\n    }, [\n        roomId,\n        room === null || room === void 0 ? void 0 : room.status,\n        wsStatus,\n        connectIfPlaying\n    ]);\n    const fetchPlayers = async (id)=>{\n        try {\n            // Try querying with .is() filter first\n            let { data: playersData, error: playersError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"room_players\").select(\"*\").eq(\"room_id\", id).is(\"left_at\", null) // Only show players who haven't left\n            ;\n            // If that fails (500 error or any error), try fetching all and filtering client-side\n            if (playersError) {\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"Query with .is() failed, trying alternative approach:\", playersError);\n                const { data: allPlayers, error: allError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"room_players\").select(\"*\").eq(\"room_id\", id);\n                if (allError) {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"Failed to fetch players:\", allError);\n                    const errorMsg = (allError === null || allError === void 0 ? void 0 : allError.message) || String(allError);\n                    setError(\"Failed to load players: \".concat(errorMsg));\n                    return;\n                }\n                // Filter client-side for players who haven't left\n                playersData = (allPlayers === null || allPlayers === void 0 ? void 0 : allPlayers.filter((p)=>p.left_at === null)) || null;\n            }\n            if (!playersData || playersData.length === 0) {\n                setPlayers([]);\n                return;\n            }\n            // Fetch profiles for each player\n            const playersWithProfiles = await Promise.all(playersData.map(async (player)=>{\n                const { data: profile, error: profileError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"profiles\").select(\"id, display_name, avatar_url\").eq(\"id\", player.player_id).single();\n                // Log profile errors but don't fail the whole operation\n                if (profileError) {\n                    (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"Failed to fetch profile for player \".concat(player.player_id, \":\"), profileError);\n                }\n                return {\n                    ...player,\n                    profile: profile\n                };\n            }));\n            setPlayers(playersWithProfiles);\n        } catch (err) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"Error in fetchPlayers:\", err);\n            const errorMessage = err instanceof Error ? err.message : \"Failed to fetch players\";\n            setError(errorMessage);\n        }\n    };\n    // Send READY message via WebSocket\n    const sendReadyMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((isReady)=>{\n        if (!roomId || !wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"[READY] Cannot send READY: WS not connected\");\n            return false;\n        }\n        try {\n            const readyMessage = {\n                type: \"READY\",\n                roomId,\n                isReady\n            };\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[READY] Sending READY message\");\n            wsRef.current.send(JSON.stringify(readyMessage));\n            return true;\n        } catch (err) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[READY] Failed to send READY message:\", err);\n            return false;\n        }\n    }, [\n        roomId\n    ]);\n    // Send PLAY message via WebSocket\n    const sendPlayMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((cards)=>{\n        if (!roomId || !wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"[PLAY] Cannot send PLAY: WS not connected\");\n            return false;\n        }\n        try {\n            const playMessage = {\n                type: \"PLAY\",\n                roomId,\n                cards\n            };\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[PLAY] Sending PLAY message\");\n            wsRef.current.send(JSON.stringify(playMessage));\n            setActionError(null) // Clear any previous errors\n            ;\n            // Store cards we're trying to play (for error recovery)\n            setPendingPlayCards(cards);\n            pendingPlayCardsRef.current = cards;\n            // Optimistically remove played cards from yourHand in real-time\n            // If server returns error, we'll restore them\n            setYourHand((prevHand)=>{\n                if (!prevHand) return prevHand;\n                // Filter out the played cards\n                let newHand = prevHand.filter((handCard)=>{\n                    return !cards.some((playedCard)=>(0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.cardsEqual)(playedCard, handCard));\n                });\n                // Re-sort the remaining cards to maintain proper order\n                newHand = (0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.sortCards)(newHand);\n                // Update handOrder to remove indices of played cards\n                setHandOrder((prevOrder)=>{\n                    if (prevOrder.length === 0) return [];\n                    // Find indices of played cards in original hand\n                    const playedIndices = new Set(cards.map((playedCard)=>prevHand.findIndex((handCard)=>(0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.cardsEqual)(handCard, playedCard))).filter((idx)=>idx !== -1));\n                    // Remove played indices and adjust remaining indices\n                    const newOrder = prevOrder.filter((idx)=>!playedIndices.has(idx)).map((idx)=>{\n                        // Adjust index: count how many played cards were before this index\n                        const adjustment = Array.from(playedIndices).filter((playedIdx)=>playedIdx < idx).length;\n                        return idx - adjustment;\n                    });\n                    return newOrder;\n                });\n                return newHand;\n            });\n            // Clear selection after sending (optimistic)\n            setSelectedCards([]);\n            return true;\n        } catch (err) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[PLAY] Failed to send PLAY message:\", err);\n            setActionError(\"Failed to send play message\");\n            return false;\n        }\n    }, [\n        roomId\n    ]);\n    // Send SET_RULES message via WebSocket\n    const sendSetRulesMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newScoreLimit)=>{\n        if (!roomId || !wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"[SET_RULES] Cannot send SET_RULES: WS not connected\");\n            return false;\n        }\n        try {\n            const rulesMessage = {\n                type: \"SET_RULES\",\n                roomId,\n                scoreLimit: newScoreLimit\n            };\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[SET_RULES] Sending SET_RULES message\");\n            wsRef.current.send(JSON.stringify(rulesMessage));\n            setActionError(null) // Clear any previous errors\n            ;\n            return true;\n        } catch (err) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[SET_RULES] Failed to send SET_RULES message:\", err);\n            setActionError(\"Failed to set rules\");\n            return false;\n        }\n    }, [\n        roomId\n    ]);\n    // Send PASS message via WebSocket\n    const sendPassMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (!roomId || !wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.warn)(\"[PASS] Cannot send PASS: WS not connected\");\n            return false;\n        }\n        try {\n            const passMessage = {\n                type: \"PASS\",\n                roomId\n            };\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[PASS] Sending PASS message\");\n            wsRef.current.send(JSON.stringify(passMessage));\n            setActionError(null) // Clear any previous errors\n            ;\n            return true;\n        } catch (err) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[PASS] Failed to send PASS message:\", err);\n            setActionError(\"Failed to send pass message\");\n            return false;\n        }\n    }, [\n        roomId\n    ]);\n    const handleCardClick = (card)=>{\n        // Toggle selection (max 5 cards)\n        setSelectedCards((prev)=>{\n            // Check if card is already selected\n            const isSelected = prev.some((c)=>c.rank === card.rank && c.suit === card.suit);\n            if (isSelected) {\n                // Remove from selection\n                return prev.filter((c)=>!(c.rank === card.rank && c.suit === card.suit));\n            } else {\n                // Add to selection if under limit\n                if (prev.length >= 5) {\n                    return prev // Max 5 cards\n                    ;\n                }\n                return [\n                    ...prev,\n                    card\n                ];\n            }\n        });\n    };\n    const handlePlay = ()=>{\n        // Allow 1, 2, 3, or 5 cards (not 4)\n        const validLengths = [\n            1,\n            2,\n            3,\n            5\n        ];\n        if (!validLengths.includes(selectedCards.length)) return;\n        sendPlayMessage(selectedCards);\n    // Selection cleared in sendPlayMessage after successful send\n    };\n    const handlePass = ()=>{\n        sendPassMessage();\n    };\n    const isMyTurn = currentTurnPlayerId === currentUserId;\n    const handleToggleReady = async ()=>{\n        var _wsRef_current;\n        if (!roomId || !currentUserId || updatingReady) return;\n        // If WS is connected, use WS READY messages\n        if (wsStatus === \"connected\" && ((_wsRef_current = wsRef.current) === null || _wsRef_current === void 0 ? void 0 : _wsRef_current.readyState) === WebSocket.OPEN) {\n            // Get current ready state from ROOM_STATE if available, otherwise from Supabase\n            const roomStatePlayer = roomStatePlayers.find((p)=>p.playerId === currentUserId);\n            const supabasePlayer = players.find((p)=>p.player_id === currentUserId);\n            var _supabasePlayer_is_ready;\n            const currentReadyState = roomStatePlayer ? roomStatePlayer.isReady : (_supabasePlayer_is_ready = supabasePlayer === null || supabasePlayer === void 0 ? void 0 : supabasePlayer.is_ready) !== null && _supabasePlayer_is_ready !== void 0 ? _supabasePlayer_is_ready : false;\n            const newReadyState = !currentReadyState;\n            setUpdatingReady(true);\n            const sent = sendReadyMessage(newReadyState);\n            if (!sent) {\n                setError(\"Failed to send ready status. Please try again.\");\n            }\n            setUpdatingReady(false);\n            return;\n        }\n        // Fallback to Supabase if WS not connected\n        setUpdatingReady(true);\n        try {\n            const currentPlayer = players.find((p)=>p.player_id === currentUserId);\n            if (!currentPlayer) return;\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"room_players\").update({\n                is_ready: !currentPlayer.is_ready\n            }).eq(\"room_id\", roomId).eq(\"player_id\", currentUserId);\n            if (error) throw error;\n        } catch (err) {\n            if (err instanceof Error) {\n                setError(err.message);\n            }\n        } finally{\n            setUpdatingReady(false);\n        }\n    };\n    const handleLeave = async ()=>{\n        if (!roomId || !currentUserId || leaving) return;\n        setLeaving(true);\n        try {\n            // Stop reconnection attempts\n            shouldReconnectRef.current = false;\n            // Mark as manual close and close WebSocket connection\n            if (wsRef.current) {\n                const markManualClose = wsRef.current.markManualClose;\n                if (markManualClose) {\n                    markManualClose();\n                }\n                wsRef.current.close();\n                wsRef.current = null;\n            }\n            connectingRef.current = false;\n            setWsStatus(\"disconnected\");\n            // Update left_at\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"room_players\").update({\n                left_at: new Date().toISOString()\n            }).eq(\"room_id\", roomId).eq(\"player_id\", currentUserId);\n            if (error) throw error;\n            navigate(\"/lobby\");\n        } catch (err) {\n            if (err instanceof Error) {\n                setError(err.message);\n            }\n        } finally{\n            setLeaving(false);\n        }\n    };\n    const handleStart = async (e)=>{\n        e === null || e === void 0 ? void 0 : e.preventDefault();\n        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] clicked\");\n        if (isStarting) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] Already starting, ignoring duplicate click\");\n            return;\n        }\n        if (!roomId || !currentUserId) {\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] Missing roomId or currentUserId\", {\n                roomId,\n                currentUserId\n            });\n            setError(\"Missing room ID or user ID\");\n            return;\n        }\n        (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] roomId\", roomId);\n        setIsStarting(true);\n        try {\n            // Get session and access token\n            const { data: { session } } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getSession();\n            const hasToken = !!(session === null || session === void 0 ? void 0 : session.access_token);\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] session token present?\", hasToken);\n            if (!(session === null || session === void 0 ? void 0 : session.access_token)) {\n                setError(\"No access token available. Please log in again.\");\n                setWsError(\"No access token available\");\n                return;\n            }\n            // Fetch the room row first to verify ownership and current status\n            const { data: roomData, error: roomFetchError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"rooms\").select(\"id, owner_id, status\").eq(\"id\", roomId).single();\n            if (roomFetchError || !roomData) {\n                const errorMsg = (roomFetchError === null || roomFetchError === void 0 ? void 0 : roomFetchError.message) || \"Room not found\";\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[Start] room fetch error:\", roomFetchError);\n                setError(\"Failed to fetch room: \".concat(errorMsg));\n                setWsError(\"Failed to fetch room: \".concat(errorMsg));\n                return;\n            }\n            // Verify ownership\n            if (currentUserId !== roomData.owner_id) {\n                const errorMsg = \"Only the room owner can start the game\";\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] Ownership check failed\", {\n                    currentUserId,\n                    ownerId: roomData.owner_id\n                });\n                setError(errorMsg);\n                setWsError(errorMsg);\n                return;\n            }\n            // If status is already \"playing\", do nothing (WS connection handled by connectIfPlaying)\n            if (roomData.status === \"playing\") {\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] Room already playing, skipping PATCH\");\n                setIsStarting(false);\n                return;\n            }\n            // Update room status to 'playing'\n            // The realtime subscription will trigger connectIfPlaying for ALL users (including owner)\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] Patching rooms.status to 'playing'\");\n            const { error: updateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.from(\"rooms\").update({\n                status: \"playing\"\n            }).eq(\"id\", roomId);\n            if (updateError) {\n                // Handle Supabase error with detailed information\n                const errorDetails = {\n                    status: (updateError === null || updateError === void 0 ? void 0 : updateError.status) || \"unknown\",\n                    message: updateError.message || \"Unknown error\",\n                    details: (updateError === null || updateError === void 0 ? void 0 : updateError.details) || null,\n                    hint: (updateError === null || updateError === void 0 ? void 0 : updateError.hint) || null\n                };\n                (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[Start] patch rooms.status result ERROR:\", errorDetails);\n                const errorMsg = \"Failed to update room status: \".concat(errorDetails.message).concat(errorDetails.hint ? \" (\".concat(errorDetails.hint, \")\") : \"\");\n                setError(errorMsg);\n                setWsError(errorMsg);\n                setIsStarting(false);\n                return;\n            }\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.log)(\"[Start] patch rooms.status result SUCCESS\");\n            // Note: WS connection will be triggered by realtime subscription via connectIfPlaying\n            // Reset isStarting when WS connects or after a timeout\n            const resetTimeout = setTimeout(()=>{\n                setIsStarting(false);\n            }, 5000);\n            // Also reset when WS connects or errors\n            const checkConnection = setInterval(()=>{\n                if (wsStatus === \"connected\" || wsStatus === \"error\") {\n                    clearInterval(checkConnection);\n                    clearTimeout(resetTimeout);\n                    setIsStarting(false);\n                }\n            }, 100);\n            setTimeout(()=>{\n                clearInterval(checkConnection);\n            }, 10000);\n        } catch (err) {\n            const errorMessage = err instanceof Error ? err.message : \"Failed to start game\";\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_5__.error)(\"[Start] Unexpected error:\", err);\n            setError(errorMessage);\n            setWsError(errorMessage);\n            setIsStarting(false);\n        }\n    };\n    const handleReconnect = async ()=>{\n        if (!roomId || !currentUserId || !room) return;\n        // Close existing connection if any\n        if (wsRef.current) {\n            wsRef.current.close();\n            wsRef.current = null;\n        }\n        connectingRef.current = false;\n        // Use connectIfPlaying to reconnect (only connects if room.status === \"playing\")\n        await connectIfPlaying(room.status, room.id);\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AppShell__WEBPACK_IMPORTED_MODULE_11__.AppShell, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-center min-h-[60vh]\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4 w-full max-w-md\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Skeleton__WEBPACK_IMPORTED_MODULE_16__.Skeleton, {\n                            className: \"h-12 w-full\"\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1316,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Skeleton__WEBPACK_IMPORTED_MODULE_16__.Skeleton, {\n                            className: \"h-10 w-3/4\"\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1317,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Skeleton__WEBPACK_IMPORTED_MODULE_16__.Skeleton, {\n                            className: \"h-10 w-full\"\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1318,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1315,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                lineNumber: 1314,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n            lineNumber: 1313,\n            columnNumber: 7\n        }, this);\n    }\n    if (error || !room) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AppShell__WEBPACK_IMPORTED_MODULE_11__.AppShell, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-6 text-center space-y-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[var(--danger)]\",\n                                children: error || \"Room not found\"\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1331,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                onClick: ()=>navigate(\"/lobby\"),\n                                children: \"Back to Lobby\"\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1332,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                        lineNumber: 1330,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1329,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                lineNumber: 1328,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n            lineNumber: 1327,\n            columnNumber: 7\n        }, this);\n    }\n    const currentPlayer = players.find((p)=>p.player_id === currentUserId);\n    const isOwner = currentUserId === room.owner_id;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AppShell__WEBPACK_IMPORTED_MODULE_11__.AppShell, {\n        title: \"Room: \".concat(room.code),\n        subtitle: \"Score Limit: \".concat(scoreLimit),\n        showSignOut: false,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-end\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                        variant: \"danger\",\n                        onClick: handleLeave,\n                        disabled: leaving,\n                        isLoading: leaving,\n                        children: \"Leave Room\"\n                    }, void 0, false, {\n                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                        lineNumber: 1352,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1351,\n                    columnNumber: 9\n                }, this),\n                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 bg-[var(--danger-bg)] border border-[var(--danger)] text-[var(--danger)] rounded-lg\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1359,\n                    columnNumber: 11\n                }, this),\n                roundStart && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 bg-[var(--success)] text-white rounded-lg shadow-md\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-between items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                className: \"text-lg\",\n                                children: \"Round starting...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1368,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-sm opacity-90\",\n                                children: new Date(roundStart.startedAt).toLocaleString()\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1369,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                        lineNumber: 1367,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1366,\n                    columnNumber: 11\n                }, this),\n                yourHand && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 bg-[var(--info)] text-white rounded-lg shadow-md text-center font-semibold\",\n                    children: \"Cards dealt. Waiting for starter...\"\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1378,\n                    columnNumber: 11\n                }, this),\n                isDev && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                        header: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-sm font-semibold text-[var(--text)]\",\n                            children: \"Debug Info\"\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1386,\n                            columnNumber: 29\n                        }, void 0),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-xs font-mono\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"p-2 bg-[var(--bg-elevated)] rounded border border-[var(--border)]\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                            children: \"room.status:\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                            lineNumber: 1389,\n                                            columnNumber: 19\n                                        }, this),\n                                        \" \",\n                                        room.status\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1388,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"p-2 bg-[var(--bg-elevated)] rounded border border-[var(--border)]\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                            children: \"current auth.uid:\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                            lineNumber: 1392,\n                                            columnNumber: 19\n                                        }, this),\n                                        \" \",\n                                        currentUserId || \"null\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1391,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"p-2 bg-[var(--bg-elevated)] rounded border border-[var(--border)]\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                            children: \"room.owner_id:\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                            lineNumber: 1395,\n                                            columnNumber: 19\n                                        }, this),\n                                        \" \",\n                                        room.owner_id\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1394,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"p-2 bg-[var(--bg-elevated)] rounded border border-[var(--border)]\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                            children: \"isOwner:\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                            lineNumber: 1398,\n                                            columnNumber: 19\n                                        }, this),\n                                        \" \",\n                                        isOwner ? \"true\" : \"false\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1397,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1387,\n                            columnNumber: 15\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                        lineNumber: 1386,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1385,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                        header: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-between items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-base font-semibold text-[var(--text)]\",\n                                    children: \"Game Server Connection\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1409,\n                                    columnNumber: 15\n                                }, void 0),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Badge__WEBPACK_IMPORTED_MODULE_14__.Badge, {\n                                    variant: wsStatus === \"connected\" ? \"success\" : wsStatus === \"connecting\" || wsStatus === \"reconnecting\" ? \"warning\" : wsStatus === \"error\" ? \"danger\" : \"default\",\n                                    children: [\n                                        wsStatus === \"connected\" && \" Connected\",\n                                        wsStatus === \"connecting\" && \" Connecting...\",\n                                        wsStatus === \"reconnecting\" && \" Reconnecting (\".concat(reconnectAttemptRef.current, \"/10)...\"),\n                                        wsStatus === \"error\" && \" Error\",\n                                        wsStatus === \"disconnected\" && \" Disconnected\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1410,\n                                    columnNumber: 15\n                                }, void 0)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1408,\n                            columnNumber: 13\n                        }, void 0),\n                        children: [\n                            wsError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mb-4 p-3 bg-[var(--danger-bg)] border border-[var(--danger)] text-[var(--danger)] rounded-lg text-sm\",\n                                children: wsError\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1426,\n                                columnNumber: 15\n                            }, this),\n                            isDev && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mb-4 p-3 bg-[var(--bg-elevated)] rounded text-xs font-mono space-y-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"wsUrl:\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1434,\n                                                columnNumber: 22\n                                            }, this),\n                                            \" \",\n                                            wsUrl || \"not set\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1434,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"wsReadyState:\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1436,\n                                                columnNumber: 19\n                                            }, this),\n                                            \" \",\n                                            wsRef.current ? wsRef.current.readyState : \"null\",\n                                            \"(\",\n                                            wsRef.current ? [\n                                                \"CONNECTING\",\n                                                \"OPEN\",\n                                                \"CLOSING\",\n                                                \"CLOSED\"\n                                            ][wsRef.current.readyState] : \"null\",\n                                            \")\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1435,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"connectionStatus:\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1439,\n                                                columnNumber: 22\n                                            }, this),\n                                            \" \",\n                                            wsStatus\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1439,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1433,\n                                columnNumber: 15\n                            }, this),\n                            wsStatus === \"disconnected\" && (room === null || room === void 0 ? void 0 : room.status) === \"playing\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                size: \"sm\",\n                                onClick: handleReconnect,\n                                children: \"Reconnect\"\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1444,\n                                columnNumber: 15\n                            }, this),\n                            isDev && wsEvents.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm font-semibold text-[var(--text-muted)] mb-2\",\n                                        children: [\n                                            \"Last \",\n                                            wsEvents.length,\n                                            \" WS Events:\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1450,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"max-h-[200px] overflow-y-auto border border-[var(--border)] rounded p-2 bg-[var(--bg-elevated)] text-xs font-mono space-y-1\",\n                                        children: wsEvents.map((event, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex gap-2 p-1 bg-[var(--bg-surface)] rounded border border-[var(--border)]\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-[var(--text-muted)] min-w-[80px]\",\n                                                        children: new Date(event.timestamp).toLocaleTimeString()\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1456,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-[var(--info)] font-semibold min-w-[150px]\",\n                                                        children: event.event\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1459,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    event.data && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-[var(--text)] flex-1 break-all\",\n                                                        children: typeof event.data === \"object\" ? JSON.stringify(event.data) : String(event.data)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1461,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, \"event-\".concat(event.timestamp, \"-\").concat(idx), true, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1455,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1453,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1449,\n                                columnNumber: 15\n                            }, this),\n                            isDev && wsMessages.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm font-semibold text-[var(--text-muted)] mb-2\",\n                                        children: [\n                                            \"Last \",\n                                            wsMessages.length,\n                                            \" Messages:\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1474,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"max-h-[300px] overflow-y-auto border border-[var(--border)] rounded p-2 bg-[var(--bg-elevated)] text-xs font-mono space-y-2\",\n                                        children: wsMessages.map((msg, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"p-2 bg-[var(--bg-surface)] rounded border border-[var(--border)] whitespace-pre-wrap break-all\",\n                                                children: JSON.stringify(msg, null, 2)\n                                            }, \"msg-\".concat(msg.type, \"-\").concat(idx), false, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1479,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1477,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1473,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                        lineNumber: 1407,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1406,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                        header: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-lg font-semibold text-[var(--text)]\",\n                            children: [\n                                \"Players (\",\n                                roomStatePlayers.length > 0 ? roomStatePlayers.length : players.length,\n                                \")\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1492,\n                            columnNumber: 13\n                        }, void 0),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-3\",\n                            children: (()=>{\n                                // Always use players state (which has profiles) as source of truth for display\n                                // Merge ready status from roomStatePlayers if available\n                                const playersToRender = players.map((p)=>{\n                                    var _p_profile;\n                                    const roomStatePlayer = roomStatePlayers.find((rsp)=>rsp.playerId === p.player_id);\n                                    var _roomStatePlayer_isReady;\n                                    return {\n                                        playerId: p.player_id,\n                                        isReady: (_roomStatePlayer_isReady = roomStatePlayer === null || roomStatePlayer === void 0 ? void 0 : roomStatePlayer.isReady) !== null && _roomStatePlayer_isReady !== void 0 ? _roomStatePlayer_isReady : p.is_ready,\n                                        displayName: ((_p_profile = p.profile) === null || _p_profile === void 0 ? void 0 : _p_profile.display_name) || null\n                                    };\n                                });\n                                // If roomStatePlayers has players not in players list, add them (will show ID until profile loads)\n                                if (roomStatePlayers.length > 0) {\n                                    roomStatePlayers.forEach((rsp)=>{\n                                        if (!playersToRender.find((p)=>p.playerId === rsp.playerId)) {\n                                            playersToRender.push({\n                                                playerId: rsp.playerId,\n                                                isReady: rsp.isReady,\n                                                displayName: null\n                                            });\n                                        }\n                                    });\n                                }\n                                if (playersToRender.length === 0) {\n                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-center text-[var(--text-muted)] py-8\",\n                                        children: \"No players in room\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1523,\n                                        columnNumber: 26\n                                    }, this);\n                                }\n                                return playersToRender.map((player)=>{\n                                    const isCurrentPlayer = player.playerId === currentUserId;\n                                    const hasPassed = passedPlayerIds.includes(player.playerId);\n                                    const isCurrentTurn = player.playerId === currentTurnPlayerId;\n                                    // Use displayName if available, otherwise fallback to getPlayerDisplayName\n                                    const displayName = player.displayName || getPlayerDisplayName(player.playerId);\n                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: (0,_utils_cn__WEBPACK_IMPORTED_MODULE_17__.cn)(\"flex justify-between items-center p-4 rounded-lg border transition-all\", isCurrentPlayer && \"bg-[var(--primary-bg)] border-[var(--primary)]\", isCurrentTurn && \"bg-[var(--warning-bg)] border-[var(--warning)]\", !isCurrentPlayer && !isCurrentTurn && \"bg-[var(--bg-elevated)] border-[var(--border)] hover:bg-[var(--surface-hover)]\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"font-medium text-[var(--text)]\",\n                                                        children: displayName\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1544,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    isOwner && player.playerId === room.owner_id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Badge__WEBPACK_IMPORTED_MODULE_14__.Badge, {\n                                                        variant: \"warning\",\n                                                        size: \"sm\",\n                                                        children: \"Owner\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1548,\n                                                        columnNumber: 27\n                                                    }, this),\n                                                    hasPassed && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Badge__WEBPACK_IMPORTED_MODULE_14__.Badge, {\n                                                        variant: \"default\",\n                                                        size: \"sm\",\n                                                        children: \"Passed\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1551,\n                                                        columnNumber: 27\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1543,\n                                                columnNumber: 23\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    player.isReady ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Badge__WEBPACK_IMPORTED_MODULE_14__.Badge, {\n                                                        variant: \"success\",\n                                                        size: \"sm\",\n                                                        children: \" Ready\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1556,\n                                                        columnNumber: 27\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm text-[var(--text-muted)]\",\n                                                        children: \"Not Ready\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1558,\n                                                        columnNumber: 27\n                                                    }, this),\n                                                    isCurrentTurn && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Badge__WEBPACK_IMPORTED_MODULE_14__.Badge, {\n                                                        variant: \"warning\",\n                                                        size: \"sm\",\n                                                        children: \" Your Turn\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1561,\n                                                        columnNumber: 27\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1554,\n                                                columnNumber: 23\n                                            }, this)\n                                        ]\n                                    }, player.playerId, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1534,\n                                        columnNumber: 21\n                                    }, this);\n                                });\n                            })()\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1496,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                        lineNumber: 1491,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1490,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col sm:flex-row gap-4 items-center justify-center\",\n                    children: [\n                        currentUserId && (()=>{\n                            const roomStatePlayer = roomStatePlayers.find((p)=>p.playerId === currentUserId);\n                            var _currentPlayer_is_ready;\n                            const currentReady = roomStatePlayer ? roomStatePlayer.isReady : (_currentPlayer_is_ready = currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.is_ready) !== null && _currentPlayer_is_ready !== void 0 ? _currentPlayer_is_ready : false;\n                            const isDisabled = updatingReady || wsStatus !== \"connected\" || !!roundStart;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                onClick: handleToggleReady,\n                                variant: currentReady ? \"success\" : \"secondary\",\n                                disabled: isDisabled,\n                                isLoading: updatingReady,\n                                title: wsStatus !== \"connected\" ? \"Connect first\" : roundStart ? \"Round already started\" : \"\",\n                                children: wsStatus !== \"connected\" ? \"Connect first\" : roundStart ? \"Round started\" : currentReady ? \"Mark Not Ready\" : \"Mark Ready\"\n                            }, void 0, false, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1582,\n                                columnNumber: 15\n                            }, this);\n                        })(),\n                        isOwner && room.status !== \"playing\" && !roundStart && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-3 p-4 bg-[var(--bg-elevated)] rounded-lg border border-[var(--border)]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"scoreLimit\",\n                                    className: \"text-sm font-medium text-[var(--text)]\",\n                                    children: \"Score Limit (1-60):\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1603,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    id: \"scoreLimit\",\n                                    type: \"number\",\n                                    min: \"1\",\n                                    max: \"60\",\n                                    value: scoreLimitInput,\n                                    onChange: (e)=>setScoreLimitInput(Math.min(60, Math.max(1, Number(e.target.value) || 60))),\n                                    className: \"w-20 px-3 py-2 bg-[var(--bg-surface)] border border-[var(--border)] rounded-lg text-[var(--text)] focus:outline-none focus:ring-2 focus:ring-[var(--border-focus)]\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1606,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                    size: \"sm\",\n                                    onClick: ()=>{\n                                        if (scoreLimitInput >= 1 && scoreLimitInput <= 60) {\n                                            sendSetRulesMessage(scoreLimitInput);\n                                            _components_ui_Toast__WEBPACK_IMPORTED_MODULE_15__.toast.success(\"Score limit updated\");\n                                        }\n                                    },\n                                    disabled: wsStatus !== \"connected\" || scoreLimitInput < 1 || scoreLimitInput > 60,\n                                    title: wsStatus !== \"connected\" ? \"WebSocket disconnected\" : \"\",\n                                    children: \"Set Rules\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1615,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1602,\n                            columnNumber: 13\n                        }, this),\n                        isOwner && room.status !== \"playing\" && !roundStart && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                            onClick: handleStart,\n                            disabled: isStarting,\n                            isLoading: isStarting,\n                            children: \"Start Game\"\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1632,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1573,\n                    columnNumber: 9\n                }, this),\n                yourHand && (room === null || room === void 0 ? void 0 : room.status) === \"playing\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6\",\n                    children: [\n                        roundEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-4 bg-[var(--success)] text-white rounded-lg shadow-md text-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                className: \"text-lg\",\n                                children: [\n                                    \"Round ended. Winner: \",\n                                    roundEnd.winnerPlayerId\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1648,\n                                columnNumber: 17\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1647,\n                            columnNumber: 15\n                        }, this),\n                        actionError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-3 bg-[var(--danger-bg)] border border-[var(--danger)] text-[var(--danger)] rounded-lg text-sm font-medium\",\n                            children: actionError\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1654,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col lg:flex-row gap-6 justify-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 min-w-0\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_TableView__WEBPACK_IMPORTED_MODULE_8__.TableView, {\n                                        seatedPlayerIds: seatedPlayerIds,\n                                        handsCount: handsCount,\n                                        totalScores: totalScores,\n                                        scoreLimit: scoreLimit,\n                                        currentTurnPlayerId: currentTurnPlayerId,\n                                        eliminated: eliminated,\n                                        currentUserId: currentUserId,\n                                        lastPlay: lastPlay,\n                                        playerNames: playerNameMap,\n                                        playerAvatars: playerAvatarMap\n                                    }, void 0, false, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1663,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1662,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"lg:w-80\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_QueuePanel__WEBPACK_IMPORTED_MODULE_10__.QueuePanel, {\n                                        queuePlayerIds: queuePlayerIds,\n                                        seatedPlayerIds: seatedPlayerIds,\n                                        handsCount: handsCount,\n                                        totalScores: totalScores,\n                                        scoreLimit: scoreLimit,\n                                        currentTurnPlayerId: currentTurnPlayerId,\n                                        eliminated: eliminated,\n                                        playerNames: playerNameMap\n                                    }, void 0, false, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1679,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                    lineNumber: 1678,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1660,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Card__WEBPACK_IMPORTED_MODULE_13__.Card, {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-5\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center justify-between mb-4\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                        className: \"text-lg font-heading font-bold text-cyan-300 text-glow-cyan\",\n                                                        children: [\n                                                            \"Your Hand (\",\n                                                            yourHand.length,\n                                                            \" cards)\",\n                                                            selectedCards.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"ml-2 text-sm text-lime-400 text-glow-lime font-medium\",\n                                                                children: [\n                                                                    \" Selected: \",\n                                                                    selectedCards.length,\n                                                                    \"/5\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                                lineNumber: 1700,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1697,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    handOrder.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                                        onClick: ()=>setHandOrder([]),\n                                                        variant: \"secondary\",\n                                                        size: \"sm\",\n                                                        title: \"Sort cards by rank and suit\",\n                                                        children: \"Sort\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1706,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1696,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap gap-3 justify-center\",\n                                                children: (()=>{\n                                                    // If user has custom order, use it; otherwise show sorted cards\n                                                    if (handOrder.length > 0 && handOrder.length === yourHand.length) {\n                                                        // User's custom arrangement\n                                                        return handOrder.map((originalIdx)=>yourHand[originalIdx]).filter(Boolean);\n                                                    } else {\n                                                        // Default sorted order\n                                                        return (0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.sortCards)(yourHand);\n                                                    }\n                                                })().map((card)=>{\n                                                    const isSelected = selectedCards.some((c)=>(0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.cardsEqual)(c, card));\n                                                    const originalIdx = yourHand.findIndex((c)=>(0,_utils_cardSort__WEBPACK_IMPORTED_MODULE_7__.cardsEqual)(c, card));\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        draggable: true,\n                                                        onDragStart: (e)=>{\n                                                            e.dataTransfer.setData(\"cardIndex\", String(originalIdx));\n                                                            e.dataTransfer.effectAllowed = \"move\";\n                                                        },\n                                                        onDragOver: (e)=>{\n                                                            e.preventDefault();\n                                                            e.dataTransfer.dropEffect = \"move\";\n                                                        },\n                                                        onDrop: (e)=>{\n                                                            e.preventDefault();\n                                                            const draggedIndex = parseInt(e.dataTransfer.getData(\"cardIndex\"), 10);\n                                                            const dropIndex = originalIdx;\n                                                            if (draggedIndex === dropIndex) return;\n                                                            setHandOrder((prevOrder)=>{\n                                                                if (prevOrder.length === 0) {\n                                                                    // Initialize order array\n                                                                    return yourHand.map((_, idx)=>idx);\n                                                                }\n                                                                const newOrder = [\n                                                                    ...prevOrder\n                                                                ];\n                                                                const draggedPos = newOrder.indexOf(draggedIndex);\n                                                                const dropPos = newOrder.indexOf(dropIndex);\n                                                                // Remove dragged item\n                                                                newOrder.splice(draggedPos, 1);\n                                                                // Insert at new position\n                                                                newOrder.splice(dropPos, 0, draggedIndex);\n                                                                return newOrder;\n                                                            });\n                                                        },\n                                                        className: \"cursor-move transition-transform duration-200 hover:scale-110\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_PlayingCard__WEBPACK_IMPORTED_MODULE_9__.PlayingCard, {\n                                                            card: card,\n                                                            isSelected: isSelected,\n                                                            onClick: ()=>handleCardClick(card),\n                                                            size: \"md\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                            lineNumber: 1771,\n                                                            columnNumber: 27\n                                                        }, this)\n                                                    }, \"\".concat(card.rank, \"-\").concat(card.suit, \"-\").concat(originalIdx), false, {\n                                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                        lineNumber: 1733,\n                                                        columnNumber: 25\n                                                    }, this);\n                                                })\n                                            }, void 0, false, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1716,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1695,\n                                        columnNumber: 17\n                                    }, this),\n                                    !roundEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex gap-4 justify-center pt-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                                onClick: handlePlay,\n                                                variant: \"success\",\n                                                disabled: (()=>{\n                                                    const validLengths = [\n                                                        1,\n                                                        2,\n                                                        3,\n                                                        5\n                                                    ];\n                                                    return !validLengths.includes(selectedCards.length) || !isMyTurn || wsStatus !== \"connected\";\n                                                })(),\n                                                title: wsStatus !== \"connected\" ? \"WebSocket disconnected\" : !isMyTurn ? \"Not your turn\" : selectedCards.length === 0 ? \"Select 1, 2, 3, or 5 cards to play\" : selectedCards.length === 4 ? \"4 cards not allowed. Select 1, 2, 3, or 5 cards\" : selectedCards.length > 5 ? \"Maximum 5 cards allowed\" : \"\",\n                                                children: [\n                                                    \"PLAY \",\n                                                    selectedCards.length > 0 && \"(\".concat(selectedCards.length, \")\")\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1786,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_12__.Button, {\n                                                onClick: handlePass,\n                                                variant: \"warning\",\n                                                disabled: !isMyTurn || !lastPlay || wsStatus !== \"connected\",\n                                                title: wsStatus !== \"connected\" ? \"WebSocket disconnected\" : !isMyTurn ? \"Not your turn\" : !lastPlay ? \"You must start the trick\" : \"\",\n                                                children: \"PASS\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                                lineNumber: 1809,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                        lineNumber: 1785,\n                                        columnNumber: 19\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                                lineNumber: 1694,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                            lineNumber: 1693,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n                    lineNumber: 1644,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n            lineNumber: 1349,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/src/pages/RoomPage.tsx\",\n        lineNumber: 1344,\n        columnNumber: 5\n    }, this);\n}\n_s(RoomPage, \"/6cI0oS9iIHlQhE5+6r9QzQA9fM=\", false, function() {\n    return [\n        _lib_navigation__WEBPACK_IMPORTED_MODULE_2__.useParams,\n        _lib_navigation__WEBPACK_IMPORTED_MODULE_2__.useNavigate\n    ];\n});\n_c = RoomPage;\nvar _c;\n$RefreshReg$(_c, \"RoomPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9wYWdlcy9Sb29tUGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUV5RTtBQUNmO0FBQ2hCO0FBQ3lEO0FBQ3ZDO0FBR2Q7QUFDVztBQUNOO0FBQ0k7QUFDRjtBQUNKO0FBQ0Q7QUFDTTtBQUNSO0FBQ0E7QUFDTTtBQUNwQjtBQUVoQyxNQUFNMkIsUUFBUUMsa0JBQXlCO0FBTWhDLFNBQVNDOztJQUNkLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUd6QiwwREFBU0E7SUFDNUIsTUFBTTBCLFdBQVd6Qiw0REFBV0E7SUFDNUIsTUFBTSxDQUFDMEIsTUFBTUMsUUFBUSxHQUFHakMsK0NBQVFBLENBQWM7SUFDOUMsTUFBTSxDQUFDa0MsU0FBU0MsV0FBVyxHQUFHbkMsK0NBQVFBLENBQXNCLEVBQUU7SUFDOUQsTUFBTSxDQUFDb0MsZUFBZUMsaUJBQWlCLEdBQUdyQywrQ0FBUUEsQ0FBZ0I7SUFDbEUsTUFBTSxDQUFDc0MsU0FBU0MsV0FBVyxHQUFHdkMsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDVyxPQUFPNkIsU0FBUyxHQUFHeEMsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU0sQ0FBQ3lDLGVBQWVDLGlCQUFpQixHQUFHMUMsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDMkMsU0FBU0MsV0FBVyxHQUFHNUMsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDNkMsWUFBWUMsY0FBYyxHQUFHOUMsK0NBQVFBLENBQUM7SUFFN0Msa0JBQWtCO0lBQ2xCLE1BQU0sQ0FBQytDLFVBQVVDLFlBQVksR0FBR2hELCtDQUFRQSxDQUF5RTtJQUNqSCxNQUFNLENBQUNpRCxZQUFZQyxjQUFjLEdBQUdsRCwrQ0FBUUEsQ0FBc0IsRUFBRTtJQUNwRSxNQUFNLENBQUNtRCxTQUFTQyxXQUFXLEdBQUdwRCwrQ0FBUUEsQ0FBZ0I7SUFDdEQsTUFBTXFELFFBQVFuRCw2Q0FBTUEsQ0FBbUI7SUFDdkMsTUFBTW9ELGdCQUFnQnBELDZDQUFNQSxDQUFVO0lBQ3RDLE1BQU0sQ0FBQ3FELFVBQVVDLFlBQVksR0FBR3hELCtDQUFRQSxDQUFlLEVBQUU7SUFDekQsTUFBTSxDQUFDeUQsT0FBT0MsU0FBUyxHQUFHMUQsK0NBQVFBLENBQVM7SUFDM0MsTUFBTTJELHFCQUFxQnpELDZDQUFNQSxDQUFVLE1BQU0sdUJBQXVCOztJQUN4RSxNQUFNMEQsc0JBQXNCMUQsNkNBQU1BLENBQVM7SUFDM0MsTUFBTTJELGlCQUFpQjNELDZDQUFNQSxDQUFNLE1BQU0sd0RBQXdEOztJQUNqRyxNQUFNNEQsb0JBQW9CNUQsNkNBQU1BLENBQU0sTUFBTSwyREFBMkQ7O0lBRXZHLHFCQUFxQjtJQUNyQixNQUFNLENBQUM2RCxrQkFBa0JDLG9CQUFvQixHQUFHaEUsK0NBQVFBLENBQThDLEVBQUU7SUFDeEcsTUFBTSxDQUFDaUUsWUFBWUMsY0FBYyxHQUFHbEUsK0NBQVFBLENBQTZDO0lBRXpGLGNBQWM7SUFDZCxNQUFNLENBQUNtRSxVQUFVQyxZQUFZLEdBQUdwRSwrQ0FBUUEsQ0FBZ0I7SUFDeEQsTUFBTSxDQUFDcUUsV0FBV0MsYUFBYSxHQUFHdEUsK0NBQVFBLENBQVcsRUFBRSxFQUFFLHVCQUF1Qjs7SUFDaEYsTUFBTSxDQUFDdUUsbUJBQW1CQyxvQkFBb0IsR0FBR3hFLCtDQUFRQSxDQUFnQixNQUFNLHNGQUFzRjs7SUFDckssTUFBTXlFLHNCQUFzQnZFLDZDQUFNQSxDQUFnQixNQUFNLDBEQUEwRDs7SUFDbEgsTUFBTSxDQUFDd0Usa0JBQWtCQyxtQkFBbUIsR0FBRzNFLCtDQUFRQSxDQUFnQjtJQUN2RSxNQUFNLENBQUM0RSxnQkFBZ0JDLGlCQUFpQixHQUFHN0UsK0NBQVFBLENBQThDO0lBQ2pHLE1BQU0sQ0FBQzhFLGlCQUFpQkMsbUJBQW1CLEdBQUcvRSwrQ0FBUUEsQ0FBVyxFQUFFO0lBQ25FLE1BQU0sQ0FBQ2dGLGdCQUFnQkMsa0JBQWtCLEdBQUdqRiwrQ0FBUUEsQ0FBVyxFQUFFO0lBRWpFLGFBQWE7SUFDYixNQUFNLENBQUNrRixlQUFlQyxpQkFBaUIsR0FBR25GLCtDQUFRQSxDQUFTLEVBQUU7SUFDN0QsTUFBTSxDQUFDb0YscUJBQXFCQyx1QkFBdUIsR0FBR3JGLCtDQUFRQSxDQUFnQjtJQUM5RSxNQUFNLENBQUNzRixVQUFVQyxZQUFZLEdBQUd2RiwrQ0FBUUEsQ0FBNkU7SUFDckgsTUFBTSxDQUFDd0YsWUFBWUMsY0FBYyxHQUFHekYsK0NBQVFBLENBQXlCLENBQUM7SUFDdEUsTUFBTSxDQUFDMEYsYUFBYUMsZUFBZSxHQUFHM0YsK0NBQVFBLENBQWdCO0lBQzlELE1BQU0sQ0FBQzRGLFVBQVVDLFdBQVcsR0FBRzdGLCtDQUFRQSxDQUFVLE9BQU8sNEdBQTRHOztJQUNwSyxNQUFNLENBQUM4RixpQkFBaUJDLG1CQUFtQixHQUFHL0YsK0NBQVFBLENBQVcsRUFBRTtJQUNuRSxNQUFNLENBQUNnRyxVQUFVQyxZQUFZLEdBQUdqRywrQ0FBUUEsQ0FBa0M7SUFFMUUsb0JBQW9CO0lBQ3BCLE1BQU0sQ0FBQ2tHLFlBQVlDLGNBQWMsR0FBR25HLCtDQUFRQSxDQUFTO0lBQ3JELE1BQU0sQ0FBQ29HLGFBQWFDLGNBQWMsR0FBR3JHLCtDQUFRQSxDQUFnRSxFQUFFO0lBQy9HLE1BQU0sQ0FBQ3NHLGlCQUFpQkMsbUJBQW1CLEdBQUd2RywrQ0FBUUEsQ0FBUztJQUMvRCxNQUFNLENBQUN3RyxhQUFhQyxlQUFlLEdBQUd6RywrQ0FBUUEsQ0FBeUIsQ0FBQztJQUN4RSxNQUFNLENBQUMwRyxZQUFZQyxjQUFjLEdBQUczRywrQ0FBUUEsQ0FBVyxFQUFFO0lBRXpELG1EQUFtRDtJQUNuRCxNQUFNNEcsdUJBQXVCekcsa0RBQVdBLENBQUMsQ0FBQzBHO1lBRXBDQztRQURKLE1BQU1BLFNBQVM1RSxRQUFRNkUsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxTQUFTLEtBQUtKO1FBQ2pELElBQUlDLG1CQUFBQSw4QkFBQUEsa0JBQUFBLE9BQVFJLE9BQU8sY0FBZkosc0NBQUFBLGdCQUFpQkssWUFBWSxFQUFFO1lBQ2pDLE9BQU9MLE9BQU9JLE9BQU8sQ0FBQ0MsWUFBWTtRQUNwQztRQUNBLDBDQUEwQztRQUMxQyxPQUFPTixTQUFTTyxNQUFNLEdBQUcsSUFBSSxHQUE0QixPQUF6QlAsU0FBU1EsU0FBUyxDQUFDLEdBQUcsSUFBRyxTQUFPUjtJQUNsRSxHQUFHO1FBQUMzRTtLQUFRO0lBRVosbURBQW1EO0lBQ25ELE1BQU1vRixnQkFBZ0JsSCw4Q0FBT0EsQ0FBQztRQUM1QixNQUFNbUgsTUFBOEIsQ0FBQztRQUNyQ3JGLFFBQVFzRixPQUFPLENBQUMsQ0FBQ1I7Z0JBQ0ZBO1lBQWIsTUFBTVMsT0FBT1QsRUFBQUEsYUFBQUEsRUFBRUUsT0FBTyxjQUFURixpQ0FBQUEsV0FBV0csWUFBWSxLQUFJO1lBQ3hDLElBQUlNLE1BQU07Z0JBQ1JGLEdBQUcsQ0FBQ1AsRUFBRUMsU0FBUyxDQUFDLEdBQUdRO1lBQ3JCO1FBQ0Y7UUFDQSxPQUFPRjtJQUNULEdBQUc7UUFBQ3JGO0tBQVE7SUFFWixxREFBcUQ7SUFDckQsTUFBTXdGLGtCQUFrQnRILDhDQUFPQSxDQUFDO1FBQzlCLE1BQU1tSCxNQUFxQyxDQUFDO1FBQzVDckYsUUFBUXNGLE9BQU8sQ0FBQyxDQUFDUjtnQkFDWEE7WUFBSixLQUFJQSxhQUFBQSxFQUFFRSxPQUFPLGNBQVRGLGlDQUFBQSxXQUFXVyxVQUFVLEVBQUU7Z0JBQ3pCSixHQUFHLENBQUNQLEVBQUVDLFNBQVMsQ0FBQyxHQUFHRCxFQUFFRSxPQUFPLENBQUNTLFVBQVU7WUFDekM7UUFDRjtRQUNBLE9BQU9KO0lBQ1QsR0FBRztRQUFDckY7S0FBUTtJQUVaLG9FQUFvRTtJQUNwRSxNQUFNMEYsbUJBQW1Cekgsa0RBQVdBLENBQUMsT0FBTzBILFlBQW9CQztRQUM5RCwwQ0FBMEM7UUFDMUMsSUFBSUQsZUFBZSxXQUFXO1lBQzVCbEUsbUJBQW1Cb0UsT0FBTyxHQUFHLE1BQU0sd0NBQXdDOztZQUMzRTtRQUNGO1FBRUEsc0NBQXNDO1FBQ3RDcEUsbUJBQW1Cb0UsT0FBTyxHQUFHO1FBRTdCLGlEQUFpRDtRQUNqRCxJQUFJMUUsTUFBTTBFLE9BQU8sRUFBRTtZQUNqQixNQUFNQyxhQUFhM0UsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVTtZQUMzQyxJQUFJQSxlQUFlQyxVQUFVQyxJQUFJLEVBQUU7Z0JBQ2pDekgsZ0RBQUdBLENBQUM7Z0JBQ0o7WUFDRjtZQUNBLElBQUl1SCxlQUFlQyxVQUFVRSxVQUFVLEVBQUU7Z0JBQ3ZDMUgsZ0RBQUdBLENBQUM7Z0JBQ0o7WUFDRjtZQUNBLHVDQUF1QztZQUN2QyxJQUFJdUgsZUFBZUMsVUFBVUcsT0FBTyxJQUFJSixlQUFlQyxVQUFVSSxNQUFNLEVBQUU7Z0JBQ3ZFaEYsTUFBTTBFLE9BQU8sQ0FBQ08sS0FBSztnQkFDbkJqRixNQUFNMEUsT0FBTyxHQUFHO1lBQ2xCO1FBQ0Y7UUFFQSxJQUFJekUsY0FBY3lFLE9BQU8sRUFBRTtZQUN6QnRILGdEQUFHQSxDQUFDO1lBQ0o7UUFDRjtRQUVBQSxnREFBR0EsQ0FBQztRQUVKLElBQUk7WUFDRix1QkFBdUI7WUFDdkIsTUFBTSxFQUFFOEgsTUFBTSxFQUFFQyxPQUFPLEVBQUUsRUFBRSxHQUFHLE1BQU1qSSxtREFBUUEsQ0FBQ2tJLElBQUksQ0FBQ0MsVUFBVTtZQUM1RCxNQUFNQyxXQUFXLENBQUMsRUFBQ0gsb0JBQUFBLDhCQUFBQSxRQUFTSSxZQUFZO1lBQ3hDbkksZ0RBQUdBLENBQUMsZ0NBQWdDa0k7WUFFcEMsSUFBSSxFQUFDSCxvQkFBQUEsOEJBQUFBLFFBQVNJLFlBQVksR0FBRTtnQkFDMUJuSSxnREFBR0EsQ0FBQztnQkFDSjJDLFdBQVc7Z0JBQ1hKLFlBQVk7Z0JBQ1o7WUFDRjtZQUVBdkMsZ0RBQUdBLENBQUM7WUFFSix3Q0FBd0M7WUFDeEM2QyxjQUFjeUUsT0FBTyxHQUFHO1lBQ3hCL0UsWUFBWTtZQUNaSSxXQUFXO1lBRVgseUJBQXlCO1lBQ3pCLE1BQU15RixXQUFXakgsc0JBQTBDLElBQUlBLENBQW1DLElBQUk7WUFDdEc4QixTQUFTbUY7WUFFVCxNQUFNSSxLQUFLekksdUVBQXNCQSxDQUMvQnNILGlCQUNBVSxRQUFRSSxZQUFZLEVBQ3BCLENBQUNNO2dCQUNDekksZ0RBQUdBLENBQUMsaUNBQWlDeUksUUFBUUMsSUFBSTtnQkFDakQsNERBQTREO2dCQUM1RCxJQUFJeEgsT0FBTztvQkFDVHVCLGNBQWMsQ0FBQ2tHO3dCQUNiLE1BQU1DLGNBQWM7NEJBQUNIOytCQUFZRTt5QkFBSyxDQUFDRSxLQUFLLENBQUMsR0FBRzt3QkFDaEQsT0FBT0Q7b0JBQ1Q7Z0JBQ0Y7Z0JBRUEsb0NBQW9DO2dCQUNwQyxJQUFJSCxRQUFRQyxJQUFJLEtBQUssU0FBUztvQkFDNUIsTUFBTUksV0FBV0wsUUFBUXZJLEtBQUssSUFBSXVJLFFBQVFBLE9BQU8sSUFBSTtvQkFDckR0SSxrREFBUUEsQ0FBQyxzQkFBc0IySTtvQkFDL0JuRyxXQUFXbUc7b0JBQ1h2RyxZQUFZO2dCQUNkLE9BQU8sSUFBSWtHLFFBQVFDLElBQUksS0FBSyxXQUFXO29CQUNyQzFJLGdEQUFHQSxDQUFDO29CQUNKQSxnREFBR0EsQ0FBQztvQkFDSnVDLFlBQVk7b0JBQ1pJLFdBQVc7b0JBQ1hFLGNBQWN5RSxPQUFPLEdBQUc7b0JBQ3hCbkUsb0JBQW9CbUUsT0FBTyxHQUFHO29CQUU5QixrQ0FBa0M7b0JBQ2xDLHVGQUF1RjtvQkFDdkZ5QixXQUFXO3dCQUNULE1BQU1DLGdCQUFnQjNCLG1CQUFtQmhHO3dCQUN6QyxJQUFJdUIsTUFBTTBFLE9BQU8sSUFBSTFFLE1BQU0wRSxPQUFPLENBQUNDLFVBQVUsS0FBS0MsVUFBVUMsSUFBSSxJQUFJdUIsZUFBZTs0QkFDakYsSUFBSTtnQ0FDRixpQ0FBaUM7Z0NBQ2pDLElBQUksQ0FBQ0EsaUJBQWlCLE9BQU9BLGtCQUFrQixZQUFZQSxjQUFjQyxJQUFJLE9BQU8sSUFBSTtvQ0FDdEY5SSxrREFBUUEsQ0FBQyxpREFBaUQ7d0NBQ3hEa0IsUUFBUTJIO3dDQUNSTixNQUFNLE9BQU9NO3dDQUNiRSxZQUFZN0g7d0NBQ1o4SCxhQUFhOUI7b0NBQ2Y7b0NBQ0E7Z0NBQ0Y7Z0NBRUEsTUFBTStCLGNBQWM7b0NBQ2xCVixNQUFNO29DQUNOckgsUUFBUTJILGNBQWNDLElBQUk7Z0NBQzVCO2dDQUNBakosZ0RBQUdBLENBQUMsOEJBQThCb0o7Z0NBQ2xDLE1BQU1DLGdCQUFnQkMsS0FBS0MsU0FBUyxDQUFDSDtnQ0FDckNwSixnREFBR0EsQ0FBQywyQkFBMkJxSjtnQ0FDL0J6RyxNQUFNMEUsT0FBTyxDQUFDa0MsSUFBSSxDQUFDSDtnQ0FDbkJySixnREFBR0EsQ0FBQzs0QkFDTixFQUFFLE9BQU95SixLQUFLO2dDQUNadEosa0RBQVFBLENBQUMscUNBQXFDc0o7NEJBQ2hEO3dCQUNGLE9BQU87Z0NBRU03Rzs0QkFEWHpDLGtEQUFRQSxDQUFDLGtDQUFrQztnQ0FDekN1SixTQUFTOUcsRUFBQUEsaUJBQUFBLE1BQU0wRSxPQUFPLGNBQWIxRSxxQ0FBQUEsZUFBZTJFLFVBQVUsTUFBS0MsVUFBVUMsSUFBSTtnQ0FDckRwRyxRQUFRMkg7Z0NBQ1JXLGtCQUFrQnRJO2dDQUNsQnVJLG1CQUFtQnZDOzRCQUNyQjt3QkFDRjtvQkFDRixHQUFHLEtBQUssNkNBQTZDOztnQkFDdkQsT0FBTyxJQUFJb0IsUUFBUUMsSUFBSSxLQUFLLFNBQVM7b0JBQ25DMUksZ0RBQUdBLENBQUM7b0JBQ0pBLGdEQUFHQSxDQUFDO29CQUNKdUMsWUFBWTtvQkFDWkksV0FBVztvQkFDWEUsY0FBY3lFLE9BQU8sR0FBRztvQkFDeEJuRSxvQkFBb0JtRSxPQUFPLEdBQUc7b0JBRTlCLGtFQUFrRTtvQkFDbEUsdUZBQXVGO29CQUN2RnlCLFdBQVc7d0JBQ1QsTUFBTUMsZ0JBQWdCM0IsbUJBQW1CaEc7d0JBQ3pDLElBQUl1QixNQUFNMEUsT0FBTyxJQUFJMUUsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLElBQUl1QixlQUFlOzRCQUNqRixJQUFJO2dDQUNGLGlDQUFpQztnQ0FDakMsSUFBSSxDQUFDQSxpQkFBaUIsT0FBT0Esa0JBQWtCLFlBQVlBLGNBQWNDLElBQUksT0FBTyxJQUFJO29DQUN0RjlJLGtEQUFRQSxDQUFDLCtEQUErRDt3Q0FDdEVrQixRQUFRMkg7d0NBQ1JOLE1BQU0sT0FBT007d0NBQ2JFLFlBQVk3SDt3Q0FDWjhILGFBQWE5QjtvQ0FDZjtvQ0FDQTtnQ0FDRjtnQ0FFQSxNQUFNK0IsY0FBYztvQ0FDbEJWLE1BQU07b0NBQ05ySCxRQUFRMkgsY0FBY0MsSUFBSTtnQ0FDNUI7Z0NBQ0FqSixnREFBR0EsQ0FBQyw0Q0FBNENvSjtnQ0FDaEQsTUFBTUMsZ0JBQWdCQyxLQUFLQyxTQUFTLENBQUNIO2dDQUNyQ3BKLGdEQUFHQSxDQUFDLHlDQUF5Q3FKO2dDQUM3Q3pHLE1BQU0wRSxPQUFPLENBQUNrQyxJQUFJLENBQUNIO2dDQUNuQnJKLGdEQUFHQSxDQUFDOzRCQUNOLEVBQUUsT0FBT3lKLEtBQUs7Z0NBQ1p0SixrREFBUUEsQ0FBQyxxQ0FBcUNzSjs0QkFDaEQ7d0JBQ0YsT0FBTztnQ0FFTTdHOzRCQURYekMsa0RBQVFBLENBQUMsZ0RBQWdEO2dDQUN2RHVKLFNBQVM5RyxFQUFBQSxpQkFBQUEsTUFBTTBFLE9BQU8sY0FBYjFFLHFDQUFBQSxlQUFlMkUsVUFBVSxNQUFLQyxVQUFVQyxJQUFJO2dDQUNyRHBHLFFBQVEySDtnQ0FDUlcsa0JBQWtCdEk7Z0NBQ2xCdUksbUJBQW1CdkM7NEJBQ3JCO3dCQUNGO29CQUNGLEdBQUc7Z0JBQ0wsT0FBTyxJQUFJb0IsUUFBUUMsSUFBSSxLQUFLLGNBQWM7b0JBQ3hDMUksZ0RBQUdBLENBQUM7b0JBQ0osMERBQTBEO29CQUMxRCtELG9CQUFvQjtvQkFDcEJDLG9CQUFvQnNELE9BQU8sR0FBRztvQkFDOUIsaUVBQWlFO29CQUNqRSxJQUFJbUIsUUFBUXBFLGVBQWUsSUFBSXdGLE1BQU1DLE9BQU8sQ0FBQ3JCLFFBQVFwRSxlQUFlLEdBQUc7d0JBQ3JFQyxtQkFBbUJtRSxRQUFRcEUsZUFBZTtvQkFDNUM7b0JBQ0EsSUFBSW9FLFFBQVFsRSxjQUFjLElBQUlzRixNQUFNQyxPQUFPLENBQUNyQixRQUFRbEUsY0FBYyxHQUFHO3dCQUNuRUMsa0JBQWtCaUUsUUFBUWxFLGNBQWM7b0JBQzFDO29CQUNBLElBQUlrRSxRQUFROUQsbUJBQW1CLEVBQUU7d0JBQy9CQyx1QkFBdUI2RCxRQUFROUQsbUJBQW1CO29CQUNwRDtvQkFDQSxJQUFJOEQsUUFBUTVELFFBQVEsRUFBRTt3QkFDcEIsTUFBTWtGLHFCQUFxQjs0QkFDekIzRCxVQUFVcUMsUUFBUTVELFFBQVEsQ0FBQ3VCLFFBQVE7NEJBQ25DNEQsT0FBT0gsTUFBTUMsT0FBTyxDQUFDckIsUUFBUTVELFFBQVEsQ0FBQ21GLEtBQUssSUFDdkN2QixRQUFRNUQsUUFBUSxDQUFDbUYsS0FBSyxDQUFDbEQsR0FBRyxDQUFDLENBQUNtRCxPQUFjN0osMkRBQWFBLENBQUM2SixTQUN4RCxFQUFFOzRCQUNOQyxNQUFNekIsUUFBUTVELFFBQVEsQ0FBQ3FGLElBQUk7NEJBQzNCQyxVQUFVMUIsUUFBUTVELFFBQVEsQ0FBQ3NGLFFBQVE7d0JBQ3JDO3dCQUNBckYsWUFBWWlGO29CQUNkLE9BQU87d0JBQ0xqRixZQUFZO29CQUNkO29CQUNBLElBQUkyRCxRQUFRMUQsVUFBVSxJQUFJLE9BQU8wRCxRQUFRMUQsVUFBVSxLQUFLLFVBQVU7d0JBQ2hFQyxjQUFjeUQsUUFBUTFELFVBQVU7b0JBQ2xDO29CQUNBLElBQUkwRCxRQUFRMUMsV0FBVyxJQUFJLE9BQU8wQyxRQUFRMUMsV0FBVyxLQUFLLFVBQVU7d0JBQ2xFLE1BQU1xRSxZQUFvQyxDQUFDO3dCQUMzQyxLQUFLLE1BQU0sQ0FBQ2hFLFVBQVVpRSxNQUFNLElBQUlDLE9BQU9DLE9BQU8sQ0FBQzlCLFFBQVExQyxXQUFXLEVBQUc7NEJBQ25FcUUsU0FBUyxDQUFDaEUsU0FBUyxHQUFHLE9BQU9pRSxVQUFVLFdBQVdBLFFBQVE7d0JBQzVEO3dCQUNBckUsZUFBZW9FO29CQUNqQjtvQkFDQSxJQUFJM0IsUUFBUXhDLFVBQVUsSUFBSTRELE1BQU1DLE9BQU8sQ0FBQ3JCLFFBQVF4QyxVQUFVLEdBQUc7d0JBQzNEQyxjQUFjdUMsUUFBUXhDLFVBQVU7b0JBQ2xDO29CQUNBLElBQUl3QyxRQUFRL0UsUUFBUSxJQUFJbUcsTUFBTUMsT0FBTyxDQUFDckIsUUFBUS9FLFFBQVEsR0FBRzt3QkFDdkQsTUFBTThHLGlCQUFpQi9CLFFBQVEvRSxRQUFRLENBQUNvRCxHQUFHLENBQUMsQ0FBQ21ELE9BQWM3SiwyREFBYUEsQ0FBQzZKO3dCQUN6RSxNQUFNUSxhQUFhcEssMERBQVNBLENBQUNtSzt3QkFDN0I3RyxZQUFZOEc7d0JBQ1o1RyxhQUFhLEVBQUUsRUFBRSwrQ0FBK0M7O29CQUNsRTtvQkFDQSxJQUFJLE9BQU80RSxRQUFRaEQsVUFBVSxLQUFLLFVBQVU7d0JBQzFDQyxjQUFjK0MsUUFBUWhELFVBQVU7b0JBQ2xDO2dCQUNGLE9BQU8sSUFBSWdELFFBQVFDLElBQUksS0FBSyxjQUFjO29CQUN4QzFJLGdEQUFHQSxDQUFDO29CQUNKLElBQUl5SSxRQUFRaEgsT0FBTyxJQUFJb0ksTUFBTUMsT0FBTyxDQUFDckIsUUFBUWhILE9BQU8sR0FBRzt3QkFDckQ4QixvQkFBb0JrRixRQUFRaEgsT0FBTzt3QkFDbkMsa0VBQWtFO3dCQUNsRSx3REFBd0Q7d0JBQ3hEQyxXQUFXZ0osQ0FBQUE7NEJBQ1QsTUFBTUMsZUFBZWxDLFFBQVFoSCxPQUFPLENBQUNxRixHQUFHLENBQUMsQ0FBQ1AsSUFBV0EsRUFBRUgsUUFBUTs0QkFDL0QsTUFBTXdFLG9CQUFvQixJQUFJQyxJQUFJSCxlQUFlNUQsR0FBRyxDQUFDUCxDQUFBQSxJQUFLQSxFQUFFQyxTQUFTOzRCQUNyRSxNQUFNc0UsbUJBQW1CSCxhQUFhSSxNQUFNLENBQUMsQ0FBQ0MsS0FBZSxDQUFDSixrQkFBa0JLLEdBQUcsQ0FBQ0Q7NEJBRXBGLElBQUlGLGlCQUFpQm5FLE1BQU0sR0FBRyxLQUFLdEYsUUFBUTtnQ0FDekMsb0RBQW9EO2dDQUNwRDZKLFFBQVFDLEdBQUcsQ0FDVEwsaUJBQWlCaEUsR0FBRyxDQUFDLE9BQU9WO29DQUMxQixJQUFJO3dDQUNGLE1BQU0sRUFBRTBCLE1BQU1yQixPQUFPLEVBQUUsR0FBRyxNQUFNM0csbURBQVFBLENBQ3JDc0wsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxnQ0FDUEMsRUFBRSxDQUFDLE1BQU1sRixVQUNUbUYsTUFBTTt3Q0FFVCx3Q0FBd0M7d0NBQ3hDLElBQUk5RSxTQUFTOzRDQUNYL0UsV0FBV2lILENBQUFBO29EQWFHRjtnREFaWixNQUFNK0MsV0FBVzdDLEtBQUtyQyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLFNBQVMsS0FBS0o7Z0RBQ2hELElBQUlvRixVQUFVO29EQUNaLE9BQU83QyxLQUFLN0IsR0FBRyxDQUFDUCxDQUFBQSxJQUNkQSxFQUFFQyxTQUFTLEtBQUtKLFdBQ1o7NERBQUUsR0FBR0csQ0FBQzs0REFBRUUsU0FBU0E7d0RBQW1CLElBQ3BDRjtnREFFUjtnREFDQSxvREFBb0Q7Z0RBQ3BELE9BQU87dURBQUlvQztvREFBTTt3REFDZm5DLFdBQVdKO3dEQUNYcUYsU0FBU3BLO3dEQUNUcUssVUFBVWpELEVBQUFBLHdCQUFBQSxRQUFRaEgsT0FBTyxDQUFDNkUsSUFBSSxDQUFDLENBQUNDLElBQVdBLEVBQUVILFFBQVEsS0FBS0EsdUJBQWhEcUMsNENBQUFBLHNCQUEyRGtELE9BQU8sS0FBSTt3REFDaEZDLFNBQVM7d0RBQ1RDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVzt3REFDakNmLElBQUk7d0RBQ0p2RSxTQUFTQTtvREFDWDtpREFBdUI7NENBQ3pCO3dDQUNGO29DQUNGLEVBQUUsT0FBT2dELEtBQUs7d0NBQ1p4SixpREFBSUEsQ0FBQyxzQ0FBK0MsT0FBVG1HLFVBQVMsTUFBSXFEO29DQUMxRDtnQ0FDRixJQUNBdUMsS0FBSyxDQUFDdkMsQ0FBQUE7b0NBQ054SixpREFBSUEsQ0FBQyw2Q0FBNkN3SjtnQ0FDcEQ7NEJBQ0Y7NEJBRUEsT0FBT2lCLGVBQWUsc0VBQXNFOzt3QkFDOUY7b0JBQ0Y7Z0JBQ0YsT0FBTyxJQUFJakMsUUFBUUMsSUFBSSxLQUFLLGVBQWU7b0JBQ3pDMUksZ0RBQUdBLENBQUM7b0JBQ0osSUFBSXlJLFFBQVFwSCxNQUFNLElBQUlvSCxRQUFRd0QsU0FBUyxFQUFFO3dCQUN2Q3hJLGNBQWM7NEJBQUVwQyxRQUFRb0gsUUFBUXBILE1BQU07NEJBQUU0SyxXQUFXeEQsUUFBUXdELFNBQVM7d0JBQUM7b0JBQ3ZFO2dCQUNGLE9BQU8sSUFBSXhELFFBQVFDLElBQUksS0FBSyxTQUFTO29CQUNuQzFJLGdEQUFHQSxDQUFDO29CQUNKLElBQUksT0FBT3lJLFFBQVFoRCxVQUFVLEtBQUssVUFBVTt3QkFDMUNDLGNBQWMrQyxRQUFRaEQsVUFBVTt3QkFDaENLLG1CQUFtQjJDLFFBQVFoRCxVQUFVO29CQUN2QztnQkFDRixPQUFPLElBQUlnRCxRQUFRQyxJQUFJLEtBQUssZ0JBQWdCO29CQUMxQzFJLGdEQUFHQSxDQUFDO29CQUNKLElBQUl5SSxRQUFRMUMsV0FBVyxJQUFJLE9BQU8wQyxRQUFRMUMsV0FBVyxLQUFLLFVBQVU7d0JBQ2xFLE1BQU1tRyxTQUF3RSxFQUFFO3dCQUNoRixNQUFNOUIsWUFBb0MsQ0FBQzt3QkFDM0MsS0FBSyxNQUFNLENBQUNoRSxVQUFVaUUsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUM5QixRQUFRMUMsV0FBVyxFQUFHOzRCQUNuRSxNQUFNb0csYUFBYSxPQUFPOUIsVUFBVSxXQUFXQSxRQUFROzRCQUN2REQsU0FBUyxDQUFDaEUsU0FBUyxHQUFHK0Y7NEJBQ3RCRCxPQUFPRSxJQUFJLENBQUM7Z0NBQ1ZoRztnQ0FDQWlHLFlBQVlGO2dDQUNabEcsWUFBWXdDLFFBQVF4QyxVQUFVLElBQUk0RCxNQUFNQyxPQUFPLENBQUNyQixRQUFReEMsVUFBVSxJQUM5RHdDLFFBQVF4QyxVQUFVLENBQUNxRyxRQUFRLENBQUNsRyxZQUM1Qjs0QkFDTjt3QkFDRjt3QkFDQUosZUFBZW9FO3dCQUNmeEUsY0FBY3NHO3dCQUNkLElBQUl6RCxRQUFReEMsVUFBVSxJQUFJNEQsTUFBTUMsT0FBTyxDQUFDckIsUUFBUXhDLFVBQVUsR0FBRzs0QkFDM0RDLGNBQWN1QyxRQUFReEMsVUFBVTt3QkFDbEM7b0JBQ0Y7Z0JBQ0YsT0FBTyxJQUFJd0MsUUFBUUMsSUFBSSxLQUFLLFNBQVM7b0JBQ25DMUksZ0RBQUdBLENBQUM7b0JBQ0osK0NBQStDO29CQUMvQ3dGLFlBQVk7b0JBQ1osZ0RBQWdEO29CQUNoRHpCLG9CQUFvQjtvQkFDcEJDLG9CQUFvQnNELE9BQU8sR0FBRztvQkFDOUIsSUFBSW1CLFFBQVEvRSxRQUFRLElBQUltRyxNQUFNQyxPQUFPLENBQUNyQixRQUFRL0UsUUFBUSxHQUFHO3dCQUN2RCw0RUFBNEU7d0JBQzVFLE1BQU04RyxpQkFBaUIvQixRQUFRL0UsUUFBUSxDQUFDb0QsR0FBRyxDQUFDLENBQUNtRCxPQUFjN0osMkRBQWFBLENBQUM2Sjt3QkFDekUsTUFBTVEsYUFBYXBLLDBEQUFTQSxDQUFDbUs7d0JBQzdCN0csWUFBWThHO3dCQUNaL0YsaUJBQWlCLEVBQUUsRUFBRSx5Q0FBeUM7O3dCQUM5RGIsYUFBYSxFQUFFLEVBQUUsNENBQTRDOztvQkFDL0Q7b0JBQ0EsSUFBSTRFLFFBQVE4RCxlQUFlLEVBQUU7d0JBQzNCckksbUJBQW1CdUUsUUFBUThELGVBQWU7b0JBQzVDO29CQUNBLElBQUk5RCxRQUFRK0QsTUFBTSxFQUFFO3dCQUNsQnBJLGlCQUFpQnFFLFFBQVErRCxNQUFNO29CQUNqQztvQkFDQSxJQUFJL0QsUUFBUXBFLGVBQWUsSUFBSXdGLE1BQU1DLE9BQU8sQ0FBQ3JCLFFBQVFwRSxlQUFlLEdBQUc7d0JBQ3JFQyxtQkFBbUJtRSxRQUFRcEUsZUFBZTtvQkFDNUM7Z0JBQ0YsT0FBTyxJQUFJb0UsUUFBUUMsSUFBSSxLQUFLLGNBQWM7b0JBQ3hDMUksZ0RBQUdBLENBQUM7b0JBQ0osSUFBSXlJLFFBQVE5RCxtQkFBbUIsRUFBRTt3QkFDL0JDLHVCQUF1QjZELFFBQVE5RCxtQkFBbUI7b0JBQ3BEO29CQUNBLElBQUk4RCxRQUFRNUQsUUFBUSxFQUFFO3dCQUNwQixNQUFNa0YscUJBQXFCOzRCQUN6QjNELFVBQVVxQyxRQUFRNUQsUUFBUSxDQUFDdUIsUUFBUTs0QkFDbkM0RCxPQUFPSCxNQUFNQyxPQUFPLENBQUNyQixRQUFRNUQsUUFBUSxDQUFDbUYsS0FBSyxJQUN2Q3ZCLFFBQVE1RCxRQUFRLENBQUNtRixLQUFLLENBQUNsRCxHQUFHLENBQUMsQ0FBQ21ELE9BQWM3SiwyREFBYUEsQ0FBQzZKLFNBQ3hELEVBQUU7NEJBQ05DLE1BQU16QixRQUFRNUQsUUFBUSxDQUFDcUYsSUFBSTs0QkFDM0JDLFVBQVUxQixRQUFRNUQsUUFBUSxDQUFDc0YsUUFBUSxDQUFDLG9EQUFvRDt3QkFDMUY7d0JBQ0FyRixZQUFZaUY7d0JBRVosd0RBQXdEO3dCQUN4RCxJQUFJQSxtQkFBbUIzRCxRQUFRLEtBQUt6RSxpQkFBaUJxQyxvQkFBb0JzRCxPQUFPLEVBQUU7NEJBQ2hGdEgsZ0RBQUdBLENBQUM7NEJBQ0orRCxvQkFBb0I7NEJBQ3BCQyxvQkFBb0JzRCxPQUFPLEdBQUc7d0JBQ2hDO29CQUNGLE9BQU87d0JBQ0x4QyxZQUFZO29CQUNkO29CQUNBLHFEQUFxRDtvQkFDckRKLGlCQUFpQixFQUFFO29CQUNuQixJQUFJK0QsUUFBUTFELFVBQVUsSUFBSSxPQUFPMEQsUUFBUTFELFVBQVUsS0FBSyxVQUFVO3dCQUNoRUMsY0FBY3lELFFBQVExRCxVQUFVO29CQUNsQztvQkFDQSxJQUFJLE9BQU8wRCxRQUFRZ0UsT0FBTyxLQUFLLFdBQVc7d0JBQ3hDckgsV0FBV3FELFFBQVFnRSxPQUFPLEVBQUUsc0VBQXNFOztvQkFDcEc7b0JBQ0EsK0NBQStDO29CQUMvQyxJQUFJaEUsUUFBUXBELGVBQWUsSUFBSXdFLE1BQU1DLE9BQU8sQ0FBQ3JCLFFBQVFwRCxlQUFlLEdBQUc7d0JBQ3JFQyxtQkFBbUJtRCxRQUFRcEQsZUFBZTtvQkFDNUMsT0FBTzt3QkFDTCxvRUFBb0U7d0JBQ3BFQyxtQkFBbUIsRUFBRTtvQkFDdkI7b0JBQ0Esb0NBQW9DO29CQUNwQyxJQUFJbUQsUUFBUWxFLGNBQWMsSUFBSXNGLE1BQU1DLE9BQU8sQ0FBQ3JCLFFBQVFsRSxjQUFjLEdBQUc7d0JBQ25FQyxrQkFBa0JpRSxRQUFRbEUsY0FBYztvQkFDMUM7b0JBQ0EsZ0RBQWdEO29CQUNoRCxJQUFJa0UsUUFBUTFDLFdBQVcsSUFBSSxPQUFPMEMsUUFBUTFDLFdBQVcsS0FBSyxVQUFVO3dCQUNsRSxNQUFNcUUsWUFBb0MsQ0FBQzt3QkFDM0MsS0FBSyxNQUFNLENBQUNoRSxVQUFVaUUsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUM5QixRQUFRMUMsV0FBVyxFQUFHOzRCQUNuRXFFLFNBQVMsQ0FBQ2hFLFNBQVMsR0FBRyxPQUFPaUUsVUFBVSxXQUFXQSxRQUFRO3dCQUM1RDt3QkFDQXJFLGVBQWVvRTtvQkFDakI7b0JBQ0EsSUFBSTNCLFFBQVF4QyxVQUFVLElBQUk0RCxNQUFNQyxPQUFPLENBQUNyQixRQUFReEMsVUFBVSxHQUFHO3dCQUMzREMsY0FBY3VDLFFBQVF4QyxVQUFVO29CQUNsQztnQkFDRixPQUFPLElBQUl3QyxRQUFRQyxJQUFJLEtBQUssZ0JBQWdCO29CQUMxQyxNQUFNSSxXQUFXTCxRQUFRdkksS0FBSyxJQUFJdUksUUFBUUEsT0FBTyxJQUFJO29CQUNyRHRJLGtEQUFRQSxDQUFDLCtCQUErQjJJO29CQUN4QzVELGVBQWU0RDtvQkFFZiw4REFBOEQ7b0JBQzlELE1BQU00RCxlQUFlMUksb0JBQW9Cc0QsT0FBTztvQkFDaEQsSUFBSW9GLGdCQUFnQkEsYUFBYS9GLE1BQU0sR0FBRyxHQUFHO3dCQUMzQzNHLGdEQUFHQSxDQUFDLDRDQUE0QzBNO3dCQUNoRC9JLFlBQVksQ0FBQ2dKOzRCQUNYLElBQUksQ0FBQ0EsVUFBVSxPQUFPQTs0QkFFdEIsNkJBQTZCOzRCQUM3QixNQUFNQyxlQUFlO21DQUFJRDttQ0FBYUQ7NkJBQWE7NEJBQ25ELE9BQU9yTSwwREFBU0EsQ0FBQ3VNO3dCQUNuQjt3QkFFQSw4Q0FBOEM7d0JBQzlDL0ksYUFBYSxFQUFFO3dCQUVmLHNCQUFzQjt3QkFDdEJFLG9CQUFvQjt3QkFDcEJDLG9CQUFvQnNELE9BQU8sR0FBRztvQkFDaEM7b0JBRUEsNERBQTREO29CQUM1RCw4QkFBOEI7b0JBQzlCeUIsV0FBVyxJQUFNN0QsZUFBZSxPQUFPO2dCQUN6QyxPQUFPLElBQUl1RCxRQUFRQyxJQUFJLEtBQUssYUFBYTtvQkFDdkMxSSxnREFBR0EsQ0FBQztvQkFDSixJQUFJeUksUUFBUW9FLGNBQWMsRUFBRTt3QkFDMUJySCxZQUFZOzRCQUFFcUgsZ0JBQWdCcEUsUUFBUW9FLGNBQWM7d0JBQUM7b0JBQ3ZEO2dCQUNGLE9BQU8sSUFBSXBFLFFBQVFDLElBQUksS0FBSyxjQUFjRCxRQUFRQyxJQUFJLEtBQUssZUFBZTtvQkFDeEUsTUFBTUksV0FBV0wsUUFBUXZJLEtBQUssSUFBSTtvQkFDbENDLGtEQUFRQSxDQUFDLHNCQUFzQjJJO29CQUMvQm5HLFdBQVdtRztvQkFDWHZHLFlBQVk7b0JBQ1pNLGNBQWN5RSxPQUFPLEdBQUc7Z0JBQzFCLE9BQU8sSUFBSW1CLFFBQVFDLElBQUksS0FBSyxtQkFBbUI7b0JBQzdDLE1BQU1JLFdBQVdMLFFBQVF2SSxLQUFLLElBQUk7b0JBQ2xDQyxrREFBUUEsQ0FBQyxzQkFBc0IySTtvQkFDL0JuRyxXQUFXbUc7b0JBQ1h2RyxZQUFZO29CQUNaTSxjQUFjeUUsT0FBTyxHQUFHO2dCQUMxQjtZQUNGLEdBQ0EsQ0FBQ3dGLE1BQU1OLFFBQVFPO2dCQUNiLG1EQUFtRDtnQkFDbkQvTSxnREFBR0EsQ0FBQyw0QkFBNEN3TSxPQUFoQk0sTUFBSyxhQUErQkMsT0FBcEJQLFFBQU8sZUFBc0IsT0FBVE87Z0JBRXBFbkssTUFBTTBFLE9BQU8sR0FBRztnQkFDaEJ6RSxjQUFjeUUsT0FBTyxHQUFHO2dCQUV4QiwrRUFBK0U7Z0JBQy9FLElBQUlwRSxtQkFBbUJvRSxPQUFPLElBQUkvRixDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU15TCxNQUFNLE1BQUssYUFBYSxDQUFDRCxVQUFVO29CQUN6RSw4Q0FBOEM7b0JBQzlDLE1BQU1FLGtCQUFrQjt3QkFBQzt3QkFBSzt3QkFBTTt3QkFBTTt3QkFBTTtxQkFBSztvQkFDckQsTUFBTUMsY0FBYztvQkFFcEIsTUFBTUMsbUJBQW1CLE9BQU9DO3dCQUM5QixJQUFJLENBQUNsSyxtQkFBbUJvRSxPQUFPLElBQUkvRixDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU15TCxNQUFNLE1BQUssV0FBVzs0QkFDN0R6SyxZQUFZOzRCQUNaO3dCQUNGO3dCQUVBLElBQUk2SyxVQUFVRixhQUFhOzRCQUN6QjNLLFlBQVk7NEJBQ1pJLFdBQVc7NEJBQ1gzQyxnREFBR0EsQ0FBQzs0QkFDSjt3QkFDRjt3QkFFQSxNQUFNcU4sYUFBYUMsS0FBS0MsR0FBRyxDQUFDSCxVQUFVLEdBQUdILGdCQUFnQnRHLE1BQU0sR0FBRzt3QkFDbEUsTUFBTTZHLFFBQVFQLGVBQWUsQ0FBQ0ksV0FBVzt3QkFFekNsSyxvQkFBb0JtRSxPQUFPLEdBQUc4Rjt3QkFDOUI3SyxZQUFZO3dCQUNadkMsZ0RBQUdBLENBQUMsdUJBQXFDd04sT0FBZEosU0FBUSxRQUFZLE9BQU5JLE9BQU07d0JBRS9DekUsV0FBVzs0QkFDVCxJQUFJLENBQUM3RixtQkFBbUJvRSxPQUFPLElBQUkvRixDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU15TCxNQUFNLE1BQUssV0FBVztnQ0FDN0R6SyxZQUFZO2dDQUNaOzRCQUNGOzRCQUVBLGdFQUFnRTs0QkFDaEUsSUFBSUssTUFBTTBFLE9BQU8sRUFBRTtnQ0FDakIsTUFBTUMsYUFBYTNFLE1BQU0wRSxPQUFPLENBQUNDLFVBQVU7Z0NBQzNDLElBQUlBLGVBQWVDLFVBQVVDLElBQUksSUFBSUYsZUFBZUMsVUFBVUUsVUFBVSxFQUFFO29DQUN4RTFILGdEQUFHQSxDQUFDO29DQUNKO2dDQUNGOzRCQUNGOzRCQUVBLE1BQU1tSCxpQkFBaUI1RixLQUFLeUwsTUFBTSxFQUFFekwsS0FBS3lKLEVBQUU7NEJBRTNDLG1FQUFtRTs0QkFDbkVqQyxXQUFXO2dDQUNULElBQUk3RixtQkFBbUJvRSxPQUFPLElBQUkvRixDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU15TCxNQUFNLE1BQUssV0FBVztvQ0FDNUQscUNBQXFDO29DQUNyQyxJQUFJLENBQUNwSyxNQUFNMEUsT0FBTyxJQUFJMUUsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7d0NBQ2pFMEYsaUJBQWlCQyxVQUFVO29DQUM3QjtnQ0FDRjs0QkFDRixHQUFHSSxRQUFRLE1BQU0seUJBQXlCOzt3QkFDNUMsR0FBR0E7b0JBQ0w7b0JBRUFMLGlCQUFpQjtnQkFDbkIsT0FBTztvQkFDTDVLLFlBQVk7Z0JBQ2Q7WUFDRixHQUNBLENBQUNrTDtnQkFDQyxzREFBc0Q7Z0JBQ3RELElBQUl2TSxPQUFPO29CQUNUNkIsWUFBWSxDQUFDNEY7d0JBQ1gsTUFBTStFLFlBQVk7NEJBQUNEOytCQUFhOUU7eUJBQUssQ0FBQ0UsS0FBSyxDQUFDLEdBQUc7d0JBQy9DLE9BQU82RTtvQkFDVDtnQkFDRjtZQUNGO1lBR0Y5SyxNQUFNMEUsT0FBTyxHQUFHa0I7WUFFaEIsa0VBQWtFO1lBQ2xFLElBQUksR0FBWW1GLGVBQWUsRUFBRTtZQUMvQixtQ0FBbUM7WUFDckM7UUFDRixFQUFFLE9BQU9sRSxLQUFLO1lBQ1osTUFBTW1FLGVBQWVuRSxlQUFlb0UsUUFBUXBFLElBQUloQixPQUFPLEdBQUc7WUFDMUR0SSxrREFBUUEsQ0FBQyxtQ0FBbUNzSjtZQUM1QzlHLFdBQVdpTDtZQUNYckwsWUFBWTtZQUNaSyxNQUFNMEUsT0FBTyxHQUFHO1lBQ2hCekUsY0FBY3lFLE9BQU8sR0FBRztRQUMxQjtJQUNGLEdBQUcsRUFBRTtJQUVMOUgsZ0RBQVNBLENBQUM7UUFDUixJQUFJLENBQUM2QixRQUFRO1lBQ1hDLFNBQVM7WUFDVDtRQUNGO1FBRUEsb0VBQW9FO1FBQ3BFLElBQUk4QixlQUFla0UsT0FBTyxJQUFJakUsa0JBQWtCaUUsT0FBTyxFQUFFO1lBQ3ZEdEgsZ0RBQUdBLENBQUM7WUFDSjtRQUNGO1FBRUEsTUFBTThOLFlBQVk7WUFDaEIsSUFBSTtnQkFDRixNQUFNLEVBQUVoRyxNQUFNLEVBQUVpRyxJQUFJLEVBQUUsRUFBRSxHQUFHLE1BQU1qTyxtREFBUUEsQ0FBQ2tJLElBQUksQ0FBQ2dHLE9BQU87Z0JBQ3RELElBQUksQ0FBQ0QsTUFBTTtvQkFDVHpNLFNBQVM7b0JBQ1Q7Z0JBQ0Y7Z0JBQ0FNLGlCQUFpQm1NLEtBQUsvQyxFQUFFO2dCQUV4QixhQUFhO2dCQUNiLE1BQU0sRUFBRWxELE1BQU1tRyxRQUFRLEVBQUUvTixPQUFPZ08sU0FBUyxFQUFFLEdBQUcsTUFBTXBPLG1EQUFRQSxDQUN4RHNMLElBQUksQ0FBQyxTQUNMQyxNQUFNLENBQUMsS0FDUEMsRUFBRSxDQUFDLE1BQU1qSyxRQUNUa0ssTUFBTTtnQkFFVCxJQUFJMkMsYUFBYSxDQUFDRCxVQUFVO29CQUMxQixNQUFNLElBQUlKLE1BQU07Z0JBQ2xCO2dCQUNBck0sUUFBUXlNO2dCQUVSLGdCQUFnQjtnQkFDaEIsTUFBTUUsYUFBYTlNO2dCQUVuQixnRUFBZ0U7Z0JBQ2hFLElBQUlnQyxrQkFBa0JpRSxPQUFPLEVBQUU7b0JBQzdCeEgsbURBQVFBLENBQUNzTyxhQUFhLENBQUMvSyxrQkFBa0JpRSxPQUFPO29CQUNoRGpFLGtCQUFrQmlFLE9BQU8sR0FBRztnQkFDOUI7Z0JBQ0EsSUFBSWxFLGVBQWVrRSxPQUFPLEVBQUU7b0JBQzFCeEgsbURBQVFBLENBQUNzTyxhQUFhLENBQUNoTCxlQUFla0UsT0FBTztvQkFDN0NsRSxlQUFla0UsT0FBTyxHQUFHO2dCQUMzQjtnQkFFQSxvQ0FBb0M7Z0JBQ3BDLE1BQU0rRyxVQUFVdk8sbURBQVFBLENBQ3JCdU8sT0FBTyxDQUFDLGdCQUF1QixPQUFQaE4sU0FDeEJpTixFQUFFLENBQ0Qsb0JBQ0E7b0JBQ0VDLE9BQU87b0JBQ1BDLFFBQVE7b0JBQ1JDLE9BQU87b0JBQ1AxRCxRQUFRLGNBQXFCLE9BQVAxSjtnQkFDeEIsR0FDQTtvQkFDRThNLGFBQWE5TTtnQkFDZixHQUVEcU4sU0FBUztnQkFDWnJMLGtCQUFrQmlFLE9BQU8sR0FBRytHO2dCQUU1QixtQ0FBbUM7Z0JBQ25DLE1BQU1NLGNBQWMsUUFBZSxPQUFQdE47Z0JBQzVCLE1BQU11TixlQUFlLFNBQWdCLE9BQVB2TjtnQkFDOUJyQixnREFBR0EsQ0FBQywrQkFBK0IyTztnQkFDbkMzTyxnREFBR0EsQ0FBQyxxQkFBcUI0TztnQkFFekIsTUFBTUMsY0FBYy9PLG1EQUFRQSxDQUN6QnVPLE9BQU8sQ0FBQ00sYUFDUkwsRUFBRSxDQUNELG9CQUNBO29CQUNFQyxPQUFPO29CQUNQQyxRQUFRO29CQUNSQyxPQUFPO29CQUNQMUQsUUFBUTZEO2dCQUNWLEdBQ0EsQ0FBQ0U7b0JBQ0M5TyxnREFBR0EsQ0FBQztvQkFDSixJQUFJOE8sUUFBUUMsR0FBRyxFQUFFO3dCQUNmLE1BQU1DLGNBQWNGLFFBQVFDLEdBQUc7d0JBQy9CLHlFQUF5RTt3QkFDekV2TixRQUFReU4sQ0FBQUE7NEJBQ04sSUFBSUEsWUFBWUEsU0FBU2pFLEVBQUUsS0FBS2dFLFlBQVloRSxFQUFFLElBQzFDaUUsU0FBU2pDLE1BQU0sS0FBS2dDLFlBQVloQyxNQUFNLElBQ3RDaUMsU0FBU0MsV0FBVyxLQUFLRixZQUFZRSxXQUFXLEVBQUU7Z0NBQ3BELHlFQUF5RTtnQ0FDekUsT0FBT0Q7NEJBQ1Q7NEJBQ0EsT0FBT0Q7d0JBQ1Q7d0JBRUEsNkRBQTZEO3dCQUM3RCxJQUFJQSxZQUFZaEMsTUFBTSxLQUFLLFdBQVc7NEJBQ3BDaE4sZ0RBQUdBLENBQUM7NEJBQ0ptSCxpQkFBaUI2SCxZQUFZaEMsTUFBTSxFQUFFM0w7d0JBQ3ZDO29CQUNGO2dCQUNGLEdBRURxTixTQUFTLENBQUMsQ0FBQzFCO29CQUNWaE4sZ0RBQUdBLENBQUMsK0JBQStCZ047b0JBQ25DLElBQUlBLFdBQVcsY0FBYzt3QkFDM0JoTixnREFBR0EsQ0FBQztvQkFDTixPQUFPLElBQUlnTixXQUFXLGFBQWE7d0JBQ2pDL00saURBQUlBLENBQUM7b0JBQ1AsT0FBTyxJQUFJK00sV0FBVyxpQkFBaUI7d0JBQ3JDN00sa0RBQVFBLENBQUM7b0JBQ1gsT0FBTyxJQUFJNk0sV0FBVyxVQUFVO3dCQUM5QmhOLGdEQUFHQSxDQUFDO29CQUNOO2dCQUNGO2dCQUNGb0QsZUFBZWtFLE9BQU8sR0FBR3VIO2dCQUV6QixpRUFBaUU7Z0JBQ2pFN08sZ0RBQUdBLENBQUMsOENBQThDaU8sU0FBU2pCLE1BQU07Z0JBQ2pFN0YsaUJBQWlCOEcsU0FBU2pCLE1BQU0sRUFBRTNMO2dCQUVsQyxPQUFPO29CQUNMLElBQUlnQyxrQkFBa0JpRSxPQUFPLEVBQUU7d0JBQzdCeEgsbURBQVFBLENBQUNzTyxhQUFhLENBQUMvSyxrQkFBa0JpRSxPQUFPO3dCQUNoRGpFLGtCQUFrQmlFLE9BQU8sR0FBRztvQkFDOUI7b0JBQ0EsSUFBSWxFLGVBQWVrRSxPQUFPLEVBQUU7d0JBQzFCeEgsbURBQVFBLENBQUNzTyxhQUFhLENBQUNoTCxlQUFla0UsT0FBTzt3QkFDN0NsRSxlQUFla0UsT0FBTyxHQUFHO29CQUMzQjtvQkFDQSw2QkFBNkI7b0JBQzdCLElBQUkxRSxNQUFNMEUsT0FBTyxFQUFFO3dCQUNqQjFFLE1BQU0wRSxPQUFPLENBQUNPLEtBQUs7d0JBQ25CakYsTUFBTTBFLE9BQU8sR0FBRztvQkFDbEI7b0JBQ0F6RSxjQUFjeUUsT0FBTyxHQUFHO2dCQUMxQjtZQUNGLEVBQUUsT0FBT21DLEtBQUs7Z0JBQ1osSUFBSUEsZUFBZW9FLE9BQU87b0JBQ3hCOUwsU0FBUzBILElBQUloQixPQUFPO2dCQUN0QixPQUFPO29CQUNMMUcsU0FBUztnQkFDWDtZQUNGLFNBQVU7Z0JBQ1JELFdBQVc7WUFDYjtRQUNGO1FBRUFnTTtJQUNBLHVEQUF1RDtJQUN6RCxHQUFHO1FBQUN6TTtLQUFPLEVBQUUsMkVBQTJFOztJQUV4Rix1Q0FBdUM7SUFDdkM3QixnREFBU0EsQ0FBQztRQUNSLElBQUkrQixpQkFBQUEsMkJBQUFBLEtBQU0yTixXQUFXLEVBQUU7WUFDckJ4SixjQUFjbkUsS0FBSzJOLFdBQVc7WUFDOUJwSixtQkFBbUJ2RSxLQUFLMk4sV0FBVztRQUNyQztJQUNGLEdBQUc7UUFBQzNOLGlCQUFBQSwyQkFBQUEsS0FBTTJOLFdBQVc7S0FBQztJQUV0QixxRkFBcUY7SUFDckYxUCxnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQzZCLFVBQVUsQ0FBQ0UsTUFBTTtRQUV0QixnQkFBZ0I7UUFDaEIsbUNBQW1DO1FBQ25DLDJDQUEyQztRQUMzQyxNQUFNNE4sYUFDSjdNLGFBQWEsZUFDYkEsYUFBYSxnQkFDYmYsS0FBS3lMLE1BQU0sS0FBSztRQUVsQixJQUFJLENBQUNtQyxZQUFZO1lBQ2Y7UUFDRjtRQUVBblAsZ0RBQUdBLENBQUM7UUFFSixNQUFNb1AsZUFBZUMsWUFBWTtZQUMvQixJQUFJO2dCQUNGLE1BQU0sRUFBRXZILE1BQU1tRyxRQUFRLEVBQUUvTixLQUFLLEVBQUUsR0FBRyxNQUFNSixtREFBUUEsQ0FDN0NzTCxJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLFVBQ1BDLEVBQUUsQ0FBQyxNQUFNakssUUFDVGtLLE1BQU07Z0JBRVQsSUFBSXJMLE9BQU87b0JBQ1RDLGtEQUFRQSxDQUFDLHlDQUF5Q0Q7b0JBQ2xEO2dCQUNGO2dCQUVBLElBQUkrTixDQUFBQSxxQkFBQUEsK0JBQUFBLFNBQVVqQixNQUFNLE1BQUssV0FBVztvQkFDbENoTixnREFBR0EsQ0FBQztvQkFDSm1ILGlCQUFpQixXQUFXOUY7b0JBQzVCLDhCQUE4QjtvQkFDOUJpTyxjQUFjRjtnQkFDaEI7WUFDRixFQUFFLE9BQU8zRixLQUFLO2dCQUNadEosa0RBQVFBLENBQUMsNEJBQTRCc0o7WUFDdkM7UUFDRixHQUFHO1FBRUgsT0FBTztZQUNMekosZ0RBQUdBLENBQUM7WUFDSnNQLGNBQWNGO1FBQ2hCO0lBQ0YsR0FBRztRQUFDL047UUFBUUUsaUJBQUFBLDJCQUFBQSxLQUFNeUwsTUFBTTtRQUFFMUs7UUFBVTZFO0tBQWlCO0lBRXJELE1BQU1nSCxlQUFlLE9BQU9uRDtRQUMxQixJQUFJO1lBQ0YsdUNBQXVDO1lBQ3ZDLElBQUksRUFBRWxELE1BQU15SCxXQUFXLEVBQUVyUCxPQUFPc1AsWUFBWSxFQUFFLEdBQUcsTUFBTTFQLG1EQUFRQSxDQUM1RHNMLElBQUksQ0FBQyxnQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxXQUFXTixJQUNkeUUsRUFBRSxDQUFDLFdBQVcsTUFBTSxxQ0FBcUM7O1lBRTVELHFGQUFxRjtZQUNyRixJQUFJRCxjQUFjO2dCQUNoQnZQLGlEQUFJQSxDQUFDLHlEQUF5RHVQO2dCQUM5RCxNQUFNLEVBQUUxSCxNQUFNNEgsVUFBVSxFQUFFeFAsT0FBT3lQLFFBQVEsRUFBRSxHQUFHLE1BQU03UCxtREFBUUEsQ0FDekRzTCxJQUFJLENBQUMsZ0JBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsV0FBV047Z0JBRWpCLElBQUkyRSxVQUFVO29CQUNaeFAsa0RBQVFBLENBQUMsNEJBQTRCd1A7b0JBQ3JDLE1BQU03RyxXQUFXLENBQUM2RyxxQkFBQUEsK0JBQUQsU0FBbUJsSCxPQUFPLEtBQUltSCxPQUFPRDtvQkFDdEQ1TixTQUFTLDJCQUFvQyxPQUFUK0c7b0JBQ3BDO2dCQUNGO2dCQUVBLGtEQUFrRDtnQkFDbER5RyxjQUFjRyxDQUFBQSx1QkFBQUEsaUNBQUFBLFdBQVkzRSxNQUFNLENBQUN4RSxDQUFBQSxJQUFLQSxFQUFFcUYsT0FBTyxLQUFLLFVBQVM7WUFDL0Q7WUFFQSxJQUFJLENBQUMyRCxlQUFlQSxZQUFZNUksTUFBTSxLQUFLLEdBQUc7Z0JBQzVDakYsV0FBVyxFQUFFO2dCQUNiO1lBQ0Y7WUFFQSxpQ0FBaUM7WUFDakMsTUFBTW1PLHNCQUEyQyxNQUFNM0UsUUFBUUMsR0FBRyxDQUNoRW9FLFlBQVl6SSxHQUFHLENBQUMsT0FBT1Q7Z0JBQ3JCLE1BQU0sRUFBRXlCLE1BQU1yQixPQUFPLEVBQUV2RyxPQUFPNFAsWUFBWSxFQUFFLEdBQUcsTUFBTWhRLG1EQUFRQSxDQUMxRHNMLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsZ0NBQ1BDLEVBQUUsQ0FBQyxNQUFNakYsT0FBT0csU0FBUyxFQUN6QitFLE1BQU07Z0JBRVQsd0RBQXdEO2dCQUN4RCxJQUFJdUUsY0FBYztvQkFDaEI3UCxpREFBSUEsQ0FBQyxzQ0FBdUQsT0FBakJvRyxPQUFPRyxTQUFTLEVBQUMsTUFBSXNKO2dCQUNsRTtnQkFFQSxPQUFPO29CQUNMLEdBQUd6SixNQUFNO29CQUNUSSxTQUFTQTtnQkFDWDtZQUNGO1lBR0YvRSxXQUFXbU87UUFDYixFQUFFLE9BQU9wRyxLQUFLO1lBQ1p0SixrREFBUUEsQ0FBQywwQkFBMEJzSjtZQUNuQyxNQUFNbUUsZUFBZW5FLGVBQWVvRSxRQUFRcEUsSUFBSWhCLE9BQU8sR0FBRztZQUMxRDFHLFNBQVM2TDtRQUNYO0lBQ0Y7SUFFQSxtQ0FBbUM7SUFDbkMsTUFBTW1DLG1CQUFtQnJRLGtEQUFXQSxDQUFDLENBQUNpTTtRQUNwQyxJQUFJLENBQUN0SyxVQUFVLENBQUN1QixNQUFNMEUsT0FBTyxJQUFJMUUsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7WUFDNUV4SCxpREFBSUEsQ0FBQztZQUNMLE9BQU87UUFDVDtRQUVBLElBQUk7WUFDRixNQUFNK1AsZUFBZTtnQkFDbkJ0SCxNQUFNO2dCQUNOckg7Z0JBQ0FzSztZQUNGO1lBQ0EzTCxnREFBR0EsQ0FBQztZQUNKNEMsTUFBTTBFLE9BQU8sQ0FBQ2tDLElBQUksQ0FBQ0YsS0FBS0MsU0FBUyxDQUFDeUc7WUFDbEMsT0FBTztRQUNULEVBQUUsT0FBT3ZHLEtBQUs7WUFDWnRKLGtEQUFRQSxDQUFDLHlDQUF5Q3NKO1lBQ2xELE9BQU87UUFDVDtJQUNGLEdBQUc7UUFBQ3BJO0tBQU87SUFFWCxrQ0FBa0M7SUFDbEMsTUFBTTRPLGtCQUFrQnZRLGtEQUFXQSxDQUFDLENBQUNzSztRQUNuQyxJQUFJLENBQUMzSSxVQUFVLENBQUN1QixNQUFNMEUsT0FBTyxJQUFJMUUsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7WUFDNUV4SCxpREFBSUEsQ0FBQztZQUNMLE9BQU87UUFDVDtRQUVBLElBQUk7WUFDRixNQUFNaVEsY0FBYztnQkFDbEJ4SCxNQUFNO2dCQUNOckg7Z0JBQ0EySTtZQUNGO1lBQ0FoSyxnREFBR0EsQ0FBQztZQUNKNEMsTUFBTTBFLE9BQU8sQ0FBQ2tDLElBQUksQ0FBQ0YsS0FBS0MsU0FBUyxDQUFDMkc7WUFDbENoTCxlQUFlLE1BQU0sNEJBQTRCOztZQUVqRCx3REFBd0Q7WUFDeERuQixvQkFBb0JpRztZQUNwQmhHLG9CQUFvQnNELE9BQU8sR0FBRzBDO1lBRTlCLGdFQUFnRTtZQUNoRSw4Q0FBOEM7WUFDOUNyRyxZQUFZLENBQUNnSjtnQkFDWCxJQUFJLENBQUNBLFVBQVUsT0FBT0E7Z0JBRXRCLDhCQUE4QjtnQkFDOUIsSUFBSXdELFVBQVV4RCxTQUFTNUIsTUFBTSxDQUFDLENBQUNxRjtvQkFDN0IsT0FBTyxDQUFDcEcsTUFBTXFHLElBQUksQ0FDaEIsQ0FBQ0MsYUFBZWhRLDJEQUFVQSxDQUFDZ1EsWUFBWUY7Z0JBRTNDO2dCQUVBLHVEQUF1RDtnQkFDdkRELFVBQVU5UCwwREFBU0EsQ0FBQzhQO2dCQUVwQixxREFBcUQ7Z0JBQ3JEdE0sYUFBYSxDQUFDME07b0JBQ1osSUFBSUEsVUFBVTVKLE1BQU0sS0FBSyxHQUFHLE9BQU8sRUFBRTtvQkFFckMsZ0RBQWdEO29CQUNoRCxNQUFNNkosZ0JBQWdCLElBQUkzRixJQUN4QmIsTUFBTWxELEdBQUcsQ0FBQyxDQUFDd0osYUFDVDNELFNBQVM4RCxTQUFTLENBQUMsQ0FBQ0wsV0FBYTlQLDJEQUFVQSxDQUFDOFAsVUFBVUUsY0FDdER2RixNQUFNLENBQUMsQ0FBQzJGLE1BQVFBLFFBQVEsQ0FBQztvQkFHN0IscURBQXFEO29CQUNyRCxNQUFNQyxXQUFXSixVQUNkeEYsTUFBTSxDQUFDLENBQUMyRixNQUFRLENBQUNGLGNBQWN2RixHQUFHLENBQUN5RixNQUNuQzVKLEdBQUcsQ0FBQyxDQUFDNEo7d0JBQ0osbUVBQW1FO3dCQUNuRSxNQUFNRSxhQUFhL0csTUFBTXVCLElBQUksQ0FBQ29GLGVBQWV6RixNQUFNLENBQUMsQ0FBQzhGLFlBQWNBLFlBQVlILEtBQUsvSixNQUFNO3dCQUMxRixPQUFPK0osTUFBTUU7b0JBQ2Y7b0JBRUYsT0FBT0Q7Z0JBQ1Q7Z0JBRUEsT0FBT1I7WUFDVDtZQUVBLDZDQUE2QztZQUM3Q3pMLGlCQUFpQixFQUFFO1lBRW5CLE9BQU87UUFDVCxFQUFFLE9BQU8rRSxLQUFLO1lBQ1p0SixrREFBUUEsQ0FBQyx1Q0FBdUNzSjtZQUNoRHZFLGVBQWU7WUFDZixPQUFPO1FBQ1Q7SUFDRixHQUFHO1FBQUM3RDtLQUFPO0lBRVgsdUNBQXVDO0lBQ3ZDLE1BQU15UCxzQkFBc0JwUixrREFBV0EsQ0FBQyxDQUFDcVI7UUFDdkMsSUFBSSxDQUFDMVAsVUFBVSxDQUFDdUIsTUFBTTBFLE9BQU8sSUFBSTFFLE1BQU0wRSxPQUFPLENBQUNDLFVBQVUsS0FBS0MsVUFBVUMsSUFBSSxFQUFFO1lBQzVFeEgsaURBQUlBLENBQUM7WUFDTCxPQUFPO1FBQ1Q7UUFFQSxJQUFJO1lBQ0YsTUFBTStRLGVBQWU7Z0JBQ25CdEksTUFBTTtnQkFDTnJIO2dCQUNBb0UsWUFBWXNMO1lBQ2Q7WUFDQS9RLGdEQUFHQSxDQUFDO1lBQ0o0QyxNQUFNMEUsT0FBTyxDQUFDa0MsSUFBSSxDQUFDRixLQUFLQyxTQUFTLENBQUN5SDtZQUNsQzlMLGVBQWUsTUFBTSw0QkFBNEI7O1lBQ2pELE9BQU87UUFDVCxFQUFFLE9BQU91RSxLQUFLO1lBQ1p0SixrREFBUUEsQ0FBQyxpREFBaURzSjtZQUMxRHZFLGVBQWU7WUFDZixPQUFPO1FBQ1Q7SUFDRixHQUFHO1FBQUM3RDtLQUFPO0lBRVgsa0NBQWtDO0lBQ2xDLE1BQU00UCxrQkFBa0J2UixrREFBV0EsQ0FBQztRQUNsQyxJQUFJLENBQUMyQixVQUFVLENBQUN1QixNQUFNMEUsT0FBTyxJQUFJMUUsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7WUFDNUV4SCxpREFBSUEsQ0FBQztZQUNMLE9BQU87UUFDVDtRQUVBLElBQUk7WUFDRixNQUFNaVIsY0FBYztnQkFDbEJ4SSxNQUFNO2dCQUNOckg7WUFDRjtZQUNBckIsZ0RBQUdBLENBQUM7WUFDSjRDLE1BQU0wRSxPQUFPLENBQUNrQyxJQUFJLENBQUNGLEtBQUtDLFNBQVMsQ0FBQzJIO1lBQ2xDaE0sZUFBZSxNQUFNLDRCQUE0Qjs7WUFDakQsT0FBTztRQUNULEVBQUUsT0FBT3VFLEtBQUs7WUFDWnRKLGtEQUFRQSxDQUFDLHVDQUF1Q3NKO1lBQ2hEdkUsZUFBZTtZQUNmLE9BQU87UUFDVDtJQUNGLEdBQUc7UUFBQzdEO0tBQU87SUFFWCxNQUFNOFAsa0JBQWtCLENBQUNsSDtRQUN2QixpQ0FBaUM7UUFDakN2RixpQkFBaUIsQ0FBQ2lFO1lBQ2hCLG9DQUFvQztZQUNwQyxNQUFNeUksYUFBYXpJLEtBQUswSCxJQUFJLENBQzFCLENBQUNnQixJQUFNQSxFQUFFQyxJQUFJLEtBQUtySCxLQUFLcUgsSUFBSSxJQUFJRCxFQUFFRSxJQUFJLEtBQUt0SCxLQUFLc0gsSUFBSTtZQUdyRCxJQUFJSCxZQUFZO2dCQUNkLHdCQUF3QjtnQkFDeEIsT0FBT3pJLEtBQUtvQyxNQUFNLENBQ2hCLENBQUNzRyxJQUFNLENBQUVBLENBQUFBLEVBQUVDLElBQUksS0FBS3JILEtBQUtxSCxJQUFJLElBQUlELEVBQUVFLElBQUksS0FBS3RILEtBQUtzSCxJQUFJO1lBRXpELE9BQU87Z0JBQ0wsa0NBQWtDO2dCQUNsQyxJQUFJNUksS0FBS2hDLE1BQU0sSUFBSSxHQUFHO29CQUNwQixPQUFPZ0MsS0FBSyxjQUFjOztnQkFDNUI7Z0JBQ0EsT0FBTzt1QkFBSUE7b0JBQU1zQjtpQkFBSztZQUN4QjtRQUNGO0lBQ0Y7SUFFQSxNQUFNdUgsYUFBYTtRQUNqQixvQ0FBb0M7UUFDcEMsTUFBTUMsZUFBZTtZQUFDO1lBQUc7WUFBRztZQUFHO1NBQUU7UUFDakMsSUFBSSxDQUFDQSxhQUFhbkYsUUFBUSxDQUFDN0gsY0FBY2tDLE1BQU0sR0FBRztRQUVsRHNKLGdCQUFnQnhMO0lBQ2hCLDZEQUE2RDtJQUMvRDtJQUVBLE1BQU1pTixhQUFhO1FBQ2pCVDtJQUNGO0lBRUEsTUFBTVUsV0FBV2hOLHdCQUF3QmhEO0lBRXpDLE1BQU1pUSxvQkFBb0I7WUFJUWhQO1FBSGhDLElBQUksQ0FBQ3ZCLFVBQVUsQ0FBQ00saUJBQWlCSyxlQUFlO1FBRWhELDRDQUE0QztRQUM1QyxJQUFJTSxhQUFhLGVBQWVNLEVBQUFBLGlCQUFBQSxNQUFNMEUsT0FBTyxjQUFiMUUscUNBQUFBLGVBQWUyRSxVQUFVLE1BQUtDLFVBQVVDLElBQUksRUFBRTtZQUM1RSxnRkFBZ0Y7WUFDaEYsTUFBTW9LLGtCQUFrQnZPLGlCQUFpQmdELElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFSCxRQUFRLEtBQUt6RTtZQUNwRSxNQUFNbVEsaUJBQWlCclEsUUFBUTZFLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxTQUFTLEtBQUs3RTtnQkFHdkRtUTtZQUZKLE1BQU1DLG9CQUFvQkYsa0JBQ3RCQSxnQkFBZ0JsRyxPQUFPLEdBQ3ZCbUcsQ0FBQUEsMkJBQUFBLDJCQUFBQSxxQ0FBQUEsZUFBZ0JwRyxRQUFRLGNBQXhCb0csc0NBQUFBLDJCQUE0QjtZQUVoQyxNQUFNRSxnQkFBZ0IsQ0FBQ0Q7WUFFdkI5UCxpQkFBaUI7WUFDakIsTUFBTWdRLE9BQU9sQyxpQkFBaUJpQztZQUM5QixJQUFJLENBQUNDLE1BQU07Z0JBQ1RsUSxTQUFTO1lBQ1g7WUFDQUUsaUJBQWlCO1lBQ2pCO1FBQ0Y7UUFFQSwyQ0FBMkM7UUFDM0NBLGlCQUFpQjtRQUNqQixJQUFJO1lBQ0YsTUFBTWlRLGdCQUFnQnpRLFFBQVE2RSxJQUFJLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsU0FBUyxLQUFLN0U7WUFDMUQsSUFBSSxDQUFDdVEsZUFBZTtZQUVwQixNQUFNLEVBQUVoUyxLQUFLLEVBQUUsR0FBRyxNQUFNSixtREFBUUEsQ0FDN0JzTCxJQUFJLENBQUMsZ0JBQ0wrRyxNQUFNLENBQUM7Z0JBQUV6RyxVQUFVLENBQUN3RyxjQUFjeEcsUUFBUTtZQUFDLEdBQzNDSixFQUFFLENBQUMsV0FBV2pLLFFBQ2RpSyxFQUFFLENBQUMsYUFBYTNKO1lBRW5CLElBQUl6QixPQUFPLE1BQU1BO1FBQ25CLEVBQUUsT0FBT3VKLEtBQUs7WUFDWixJQUFJQSxlQUFlb0UsT0FBTztnQkFDeEI5TCxTQUFTMEgsSUFBSWhCLE9BQU87WUFDdEI7UUFDRixTQUFVO1lBQ1J4RyxpQkFBaUI7UUFDbkI7SUFDRjtJQUVBLE1BQU1tUSxjQUFjO1FBQ2xCLElBQUksQ0FBQy9RLFVBQVUsQ0FBQ00saUJBQWlCTyxTQUFTO1FBRTFDQyxXQUFXO1FBQ1gsSUFBSTtZQUNGLDZCQUE2QjtZQUM3QmUsbUJBQW1Cb0UsT0FBTyxHQUFHO1lBRTdCLHNEQUFzRDtZQUN0RCxJQUFJMUUsTUFBTTBFLE9BQU8sRUFBRTtnQkFDakIsTUFBTStLLGtCQUFrQixNQUFPL0ssT0FBTyxDQUFTK0ssZUFBZTtnQkFDOUQsSUFBSUEsaUJBQWlCO29CQUNuQkE7Z0JBQ0Y7Z0JBQ0F6UCxNQUFNMEUsT0FBTyxDQUFDTyxLQUFLO2dCQUNuQmpGLE1BQU0wRSxPQUFPLEdBQUc7WUFDbEI7WUFDQXpFLGNBQWN5RSxPQUFPLEdBQUc7WUFDeEIvRSxZQUFZO1lBRVosaUJBQWlCO1lBQ2pCLE1BQU0sRUFBRXJDLEtBQUssRUFBRSxHQUFHLE1BQU1KLG1EQUFRQSxDQUM3QnNMLElBQUksQ0FBQyxnQkFDTCtHLE1BQU0sQ0FBQztnQkFBRXZHLFNBQVMsSUFBSUUsT0FBT0MsV0FBVztZQUFHLEdBQzNDVCxFQUFFLENBQUMsV0FBV2pLLFFBQ2RpSyxFQUFFLENBQUMsYUFBYTNKO1lBRW5CLElBQUl6QixPQUFPLE1BQU1BO1lBRWpCb0IsU0FBUztRQUNYLEVBQUUsT0FBT21JLEtBQUs7WUFDWixJQUFJQSxlQUFlb0UsT0FBTztnQkFDeEI5TCxTQUFTMEgsSUFBSWhCLE9BQU87WUFDdEI7UUFDRixTQUFVO1lBQ1J0RyxXQUFXO1FBQ2I7SUFDRjtJQUVBLE1BQU1tUSxjQUFjLE9BQU9DO1FBQ3pCQSxjQUFBQSx3QkFBQUEsRUFBR0MsY0FBYztRQUNqQnhTLGdEQUFHQSxDQUFDO1FBRUosSUFBSW9DLFlBQVk7WUFDZHBDLGdEQUFHQSxDQUFDO1lBQ0o7UUFDRjtRQUVBLElBQUksQ0FBQ3FCLFVBQVUsQ0FBQ00sZUFBZTtZQUM3QjNCLGdEQUFHQSxDQUFDLDJDQUEyQztnQkFBRXFCO2dCQUFRTTtZQUFjO1lBQ3ZFSSxTQUFTO1lBQ1Q7UUFDRjtRQUVBL0IsZ0RBQUdBLENBQUMsa0JBQWtCcUI7UUFDdEJnQixjQUFjO1FBRWQsSUFBSTtZQUNGLCtCQUErQjtZQUMvQixNQUFNLEVBQUV5RixNQUFNLEVBQUVDLE9BQU8sRUFBRSxFQUFFLEdBQUcsTUFBTWpJLG1EQUFRQSxDQUFDa0ksSUFBSSxDQUFDQyxVQUFVO1lBQzVELE1BQU1DLFdBQVcsQ0FBQyxFQUFDSCxvQkFBQUEsOEJBQUFBLFFBQVNJLFlBQVk7WUFDeENuSSxnREFBR0EsQ0FBQyxrQ0FBa0NrSTtZQUV0QyxJQUFJLEVBQUNILG9CQUFBQSw4QkFBQUEsUUFBU0ksWUFBWSxHQUFFO2dCQUMxQnBHLFNBQVM7Z0JBQ1RZLFdBQVc7Z0JBQ1g7WUFDRjtZQUVBLGtFQUFrRTtZQUNsRSxNQUFNLEVBQUVtRixNQUFNbUcsUUFBUSxFQUFFL04sT0FBT3VTLGNBQWMsRUFBRSxHQUFHLE1BQU0zUyxtREFBUUEsQ0FDN0RzTCxJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLHdCQUNQQyxFQUFFLENBQUMsTUFBTWpLLFFBQ1RrSyxNQUFNO1lBRVQsSUFBSWtILGtCQUFrQixDQUFDeEUsVUFBVTtnQkFDL0IsTUFBTW5GLFdBQVcySixDQUFBQSwyQkFBQUEscUNBQUFBLGVBQWdCaEssT0FBTyxLQUFJO2dCQUM1Q3RJLGtEQUFRQSxDQUFDLDZCQUE2QnNTO2dCQUN0QzFRLFNBQVMseUJBQWtDLE9BQVQrRztnQkFDbENuRyxXQUFXLHlCQUFrQyxPQUFUbUc7Z0JBQ3BDO1lBQ0Y7WUFFQSxtQkFBbUI7WUFDbkIsSUFBSW5ILGtCQUFrQnNNLFNBQVN5RSxRQUFRLEVBQUU7Z0JBQ3ZDLE1BQU01SixXQUFXO2dCQUNqQjlJLGdEQUFHQSxDQUFDLGtDQUFrQztvQkFBRTJCO29CQUFlZ1IsU0FBUzFFLFNBQVN5RSxRQUFRO2dCQUFDO2dCQUNsRjNRLFNBQVMrRztnQkFDVG5HLFdBQVdtRztnQkFDWDtZQUNGO1lBRUEseUZBQXlGO1lBQ3pGLElBQUltRixTQUFTakIsTUFBTSxLQUFLLFdBQVc7Z0JBQ2pDaE4sZ0RBQUdBLENBQUM7Z0JBQ0pxQyxjQUFjO2dCQUNkO1lBQ0Y7WUFFQSxrQ0FBa0M7WUFDbEMsMEZBQTBGO1lBQzFGckMsZ0RBQUdBLENBQUM7WUFDSixNQUFNLEVBQUVFLE9BQU8wUyxXQUFXLEVBQUUsR0FBRyxNQUFNOVMsbURBQVFBLENBQzFDc0wsSUFBSSxDQUFDLFNBQ0wrRyxNQUFNLENBQUM7Z0JBQUVuRixRQUFRO1lBQVUsR0FDM0IxQixFQUFFLENBQUMsTUFBTWpLO1lBRVosSUFBSXVSLGFBQWE7Z0JBQ2Ysa0RBQWtEO2dCQUNsRCxNQUFNQyxlQUFlO29CQUNuQjdGLFFBQVEsQ0FBQzRGLHdCQUFBQSxrQ0FBRCxZQUFzQjVGLE1BQU0sS0FBSTtvQkFDeEN2RSxTQUFTbUssWUFBWW5LLE9BQU8sSUFBSTtvQkFDaENxSyxTQUFTLENBQUNGLHdCQUFBQSxrQ0FBRCxZQUFzQkUsT0FBTyxLQUFJO29CQUMxQ0MsTUFBTSxDQUFDSCx3QkFBQUEsa0NBQUQsWUFBc0JHLElBQUksS0FBSTtnQkFDdEM7Z0JBRUE1UyxrREFBUUEsQ0FBQyw0Q0FBNEMwUztnQkFDckQsTUFBTS9KLFdBQVcsaUNBQXdEK0osT0FBdkJBLGFBQWFwSyxPQUFPLEVBQXNELE9BQW5Eb0ssYUFBYUUsSUFBSSxHQUFHLEtBQXVCLE9BQWxCRixhQUFhRSxJQUFJLEVBQUMsT0FBSztnQkFDekhoUixTQUFTK0c7Z0JBQ1RuRyxXQUFXbUc7Z0JBQ1h6RyxjQUFjO2dCQUNkO1lBQ0Y7WUFFQXJDLGdEQUFHQSxDQUFDO1lBQ0osc0ZBQXNGO1lBQ3RGLHVEQUF1RDtZQUN2RCxNQUFNZ1QsZUFBZWpLLFdBQVc7Z0JBQzlCMUcsY0FBYztZQUNoQixHQUFHO1lBRUgsd0NBQXdDO1lBQ3hDLE1BQU00USxrQkFBa0I1RCxZQUFZO2dCQUNsQyxJQUFJL00sYUFBYSxlQUFlQSxhQUFhLFNBQVM7b0JBQ3BEZ04sY0FBYzJEO29CQUNkQyxhQUFhRjtvQkFDYjNRLGNBQWM7Z0JBQ2hCO1lBQ0YsR0FBRztZQUVIMEcsV0FBVztnQkFDVHVHLGNBQWMyRDtZQUNoQixHQUFHO1FBQ0wsRUFBRSxPQUFPeEosS0FBSztZQUNaLE1BQU1tRSxlQUFlbkUsZUFBZW9FLFFBQVFwRSxJQUFJaEIsT0FBTyxHQUFHO1lBQzFEdEksa0RBQVFBLENBQUMsNkJBQTZCc0o7WUFDdEMxSCxTQUFTNkw7WUFDVGpMLFdBQVdpTDtZQUNYdkwsY0FBYztRQUNoQjtJQUNGO0lBRUEsTUFBTThRLGtCQUFrQjtRQUN0QixJQUFJLENBQUM5UixVQUFVLENBQUNNLGlCQUFpQixDQUFDSixNQUFNO1FBRXhDLG1DQUFtQztRQUNuQyxJQUFJcUIsTUFBTTBFLE9BQU8sRUFBRTtZQUNqQjFFLE1BQU0wRSxPQUFPLENBQUNPLEtBQUs7WUFDbkJqRixNQUFNMEUsT0FBTyxHQUFHO1FBQ2xCO1FBQ0F6RSxjQUFjeUUsT0FBTyxHQUFHO1FBRXhCLGlGQUFpRjtRQUNqRixNQUFNSCxpQkFBaUI1RixLQUFLeUwsTUFBTSxFQUFFekwsS0FBS3lKLEVBQUU7SUFDN0M7SUFFQSxJQUFJbkosU0FBUztRQUNYLHFCQUNFLDhEQUFDbkIsMkRBQVFBO3NCQUNQLDRFQUFDMFM7Z0JBQUlDLFdBQVU7MEJBQ2IsNEVBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ3JTLDhEQUFRQTs0QkFBQ3FTLFdBQVU7Ozs7OztzQ0FDcEIsOERBQUNyUyw4REFBUUE7NEJBQUNxUyxXQUFVOzs7Ozs7c0NBQ3BCLDhEQUFDclMsOERBQVFBOzRCQUFDcVMsV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUs5QjtJQUVBLElBQUluVCxTQUFTLENBQUNxQixNQUFNO1FBQ2xCLHFCQUNFLDhEQUFDYiwyREFBUUE7c0JBQ1AsNEVBQUMwUztnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ3hTLHNEQUFNQTs4QkFDTCw0RUFBQ3VTO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQzlNO2dDQUFFOE0sV0FBVTswQ0FBd0JuVCxTQUFTOzs7Ozs7MENBQzlDLDhEQUFDUywwREFBTUE7Z0NBQUMyUyxTQUFTLElBQU1oUyxTQUFTOzBDQUFXOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFNdkQ7SUFFQSxNQUFNNFEsZ0JBQWdCelEsUUFBUTZFLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxTQUFTLEtBQUs3RTtJQUMxRCxNQUFNNFIsVUFBVTVSLGtCQUFrQkosS0FBS21SLFFBQVE7SUFFL0MscUJBQ0UsOERBQUNoUywyREFBUUE7UUFDUDhTLE9BQU8sU0FBbUIsT0FBVmpTLEtBQUt1TCxJQUFJO1FBQ3pCMkcsVUFBVSxnQkFBMkIsT0FBWGhPO1FBQzFCaU8sYUFBYTtrQkFFYiw0RUFBQ047WUFBSUMsV0FBVTs7OEJBRWIsOERBQUNEO29CQUFJQyxXQUFVOzhCQUNiLDRFQUFDMVMsMERBQU1BO3dCQUFDZ1QsU0FBUTt3QkFBU0wsU0FBU2xCO3dCQUFhd0IsVUFBVTFSO3dCQUFTMlIsV0FBVzNSO2tDQUFTOzs7Ozs7Ozs7OztnQkFNdkZoQyx1QkFDQyw4REFBQ2tUO29CQUFJQyxXQUFVOzhCQUNablQ7Ozs7OztnQkFLSnNELDRCQUNDLDhEQUFDNFA7b0JBQUlDLFdBQVU7OEJBQ2IsNEVBQUNEO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ1M7Z0NBQU9ULFdBQVU7MENBQVU7Ozs7OzswQ0FDNUIsOERBQUNVO2dDQUFLVixXQUFVOzBDQUNiLElBQUl2SCxLQUFLdEksV0FBV3lJLFNBQVMsRUFBRStILGNBQWM7Ozs7Ozs7Ozs7Ozs7Ozs7O2dCQU9yRHRRLDBCQUNDLDhEQUFDMFA7b0JBQUlDLFdBQVU7OEJBQWlGOzs7Ozs7Z0JBTWpHblMsdUJBQ0MsOERBQUNMLHNEQUFNQTs4QkFDTCw0RUFBQ0Esc0RBQU1BO3dCQUFDb1Qsc0JBQVEsOERBQUNDOzRCQUFHYixXQUFVO3NDQUEyQzs7Ozs7O2tDQUN2RSw0RUFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDRDtvQ0FBSUMsV0FBVTs7c0RBQ2IsOERBQUNTO3NEQUFPOzs7Ozs7d0NBQXFCO3dDQUFFdlMsS0FBS3lMLE1BQU07Ozs7Ozs7OENBRTVDLDhEQUFDb0c7b0NBQUlDLFdBQVU7O3NEQUNiLDhEQUFDUztzREFBTzs7Ozs7O3dDQUEwQjt3Q0FBRW5TLGlCQUFpQjs7Ozs7Ozs4Q0FFdkQsOERBQUN5UjtvQ0FBSUMsV0FBVTs7c0RBQ2IsOERBQUNTO3NEQUFPOzs7Ozs7d0NBQXVCO3dDQUFFdlMsS0FBS21SLFFBQVE7Ozs7Ozs7OENBRWhELDhEQUFDVTtvQ0FBSUMsV0FBVTs7c0RBQ2IsOERBQUNTO3NEQUFPOzs7Ozs7d0NBQWlCO3dDQUFFUCxVQUFVLFNBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQVF4RCw4REFBQzFTLHNEQUFNQTs4QkFDTCw0RUFBQ0Esc0RBQU1BO3dCQUFDb1Qsc0JBQ04sOERBQUNiOzRCQUFJQyxXQUFVOzs4Q0FDYiw4REFBQ2E7b0NBQUdiLFdBQVU7OENBQTZDOzs7Ozs7OENBQzNELDhEQUFDdlMsd0RBQUtBO29DQUNKNlMsU0FDRXJSLGFBQWEsY0FBYyxZQUMzQkEsYUFBYSxnQkFBZ0JBLGFBQWEsaUJBQWlCLFlBQzNEQSxhQUFhLFVBQVUsV0FBVzs7d0NBR25DQSxhQUFhLGVBQWU7d0NBQzVCQSxhQUFhLGdCQUFnQjt3Q0FDN0JBLGFBQWEsa0JBQWtCLG1CQUErQyxPQUE1QmEsb0JBQW9CbUUsT0FBTyxFQUFDO3dDQUM5RWhGLGFBQWEsV0FBVzt3Q0FDeEJBLGFBQWEsa0JBQWtCOzs7Ozs7Ozs7Ozs7Ozs0QkFJbkNJLHlCQUNDLDhEQUFDMFE7Z0NBQUlDLFdBQVU7MENBQ1ozUTs7Ozs7OzRCQUtKeEIsdUJBQ0MsOERBQUNrUztnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNEOzswREFBSSw4REFBQ1U7MERBQU87Ozs7Ozs0Q0FBZTs0Q0FBRTlRLFNBQVM7Ozs7Ozs7a0RBQ3ZDLDhEQUFDb1E7OzBEQUNDLDhEQUFDVTswREFBTzs7Ozs7OzRDQUFzQjs0Q0FBRWxSLE1BQU0wRSxPQUFPLEdBQUcxRSxNQUFNMEUsT0FBTyxDQUFDQyxVQUFVLEdBQUc7NENBQU87NENBQ2hGM0UsTUFBTTBFLE9BQU8sR0FBRztnREFBQztnREFBYztnREFBUTtnREFBVzs2Q0FBUyxDQUFDMUUsTUFBTTBFLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLEdBQUc7NENBQU87Ozs7Ozs7a0RBRW5HLDhEQUFDNkw7OzBEQUFJLDhEQUFDVTswREFBTzs7Ozs7OzRDQUEwQjs0Q0FBRXhSOzs7Ozs7Ozs7Ozs7OzRCQUk1Q0EsYUFBYSxrQkFBa0JmLENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTXlMLE1BQU0sTUFBSywyQkFDL0MsOERBQUNyTSwwREFBTUE7Z0NBQUN3VCxNQUFLO2dDQUFLYixTQUFTSDswQ0FBaUI7Ozs7Ozs0QkFJN0NqUyxTQUFTNEIsU0FBUzZELE1BQU0sR0FBRyxtQkFDMUIsOERBQUN5TTtnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNEO3dDQUFJQyxXQUFVOzs0Q0FBc0Q7NENBQzdEdlEsU0FBUzZELE1BQU07NENBQUM7Ozs7Ozs7a0RBRXhCLDhEQUFDeU07d0NBQUlDLFdBQVU7a0RBQ1p2USxTQUFTZ0UsR0FBRyxDQUFDLENBQUN5SCxPQUFPbUMsb0JBQ3BCLDhEQUFDMEM7Z0RBQTRDQyxXQUFVOztrRUFDckQsOERBQUNVO3dEQUFLVixXQUFVO2tFQUNiLElBQUl2SCxLQUFLeUMsTUFBTTZGLFNBQVMsRUFBRUMsa0JBQWtCOzs7Ozs7a0VBRS9DLDhEQUFDTjt3REFBS1YsV0FBVTtrRUFBa0Q5RSxNQUFNQSxLQUFLOzs7Ozs7b0RBQzVFQSxNQUFNekcsSUFBSSxrQkFDVCw4REFBQ2lNO3dEQUFLVixXQUFVO2tFQUNiLE9BQU85RSxNQUFNekcsSUFBSSxLQUFLLFdBQVd3QixLQUFLQyxTQUFTLENBQUNnRixNQUFNekcsSUFBSSxJQUFJOEgsT0FBT3JCLE1BQU16RyxJQUFJOzs7Ozs7OytDQVA1RSxTQUE0QjRJLE9BQW5CbkMsTUFBTTZGLFNBQVMsRUFBQyxLQUFPLE9BQUoxRDs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFpQjdDeFAsU0FBU3NCLFdBQVdtRSxNQUFNLEdBQUcsbUJBQzVCLDhEQUFDeU07Z0NBQUlDLFdBQVU7O2tEQUNiLDhEQUFDRDt3Q0FBSUMsV0FBVTs7NENBQXNEOzRDQUM3RDdRLFdBQVdtRSxNQUFNOzRDQUFDOzs7Ozs7O2tEQUUxQiw4REFBQ3lNO3dDQUFJQyxXQUFVO2tEQUNaN1EsV0FBV3NFLEdBQUcsQ0FBQyxDQUFDd04sS0FBSzVELG9CQUNwQiw4REFBQzBDO2dEQUFtQ0MsV0FBVTswREFDM0MvSixLQUFLQyxTQUFTLENBQUMrSyxLQUFLLE1BQU07K0NBRG5CLE9BQW1CNUQsT0FBWjRELElBQUk1TCxJQUFJLEVBQUMsS0FBTyxPQUFKZ0k7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFXekMsOERBQUM3UCxzREFBTUE7OEJBQ0wsNEVBQUNBLHNEQUFNQTt3QkFBQ29ULHNCQUNOLDhEQUFDTTs0QkFBR2xCLFdBQVU7O2dDQUEyQztnQ0FDN0MvUCxpQkFBaUJxRCxNQUFNLEdBQUcsSUFBSXJELGlCQUFpQnFELE1BQU0sR0FBR2xGLFFBQVFrRixNQUFNO2dDQUFDOzs7Ozs7O2tDQUduRiw0RUFBQ3lNOzRCQUFJQyxXQUFVO3NDQUNaLENBQUM7Z0NBQ0EsK0VBQStFO2dDQUMvRSx3REFBd0Q7Z0NBQ3hELE1BQU1tQixrQkFBa0IvUyxRQUFRcUYsR0FBRyxDQUFDUCxDQUFBQTt3Q0FLbkJBO29DQUpmLE1BQU1zTCxrQkFBa0J2TyxpQkFBaUJnRCxJQUFJLENBQUNtTyxDQUFBQSxNQUFPQSxJQUFJck8sUUFBUSxLQUFLRyxFQUFFQyxTQUFTO3dDQUd0RXFMO29DQUZYLE9BQU87d0NBQ0x6TCxVQUFVRyxFQUFFQyxTQUFTO3dDQUNyQm1GLFNBQVNrRyxDQUFBQSwyQkFBQUEsNEJBQUFBLHNDQUFBQSxnQkFBaUJsRyxPQUFPLGNBQXhCa0csc0NBQUFBLDJCQUE0QnRMLEVBQUVtRixRQUFRO3dDQUMvQ2dKLGFBQWFuTyxFQUFBQSxhQUFBQSxFQUFFRSxPQUFPLGNBQVRGLGlDQUFBQSxXQUFXRyxZQUFZLEtBQUk7b0NBQzFDO2dDQUNGO2dDQUVBLG1HQUFtRztnQ0FDbkcsSUFBSXBELGlCQUFpQnFELE1BQU0sR0FBRyxHQUFHO29DQUMvQnJELGlCQUFpQnlELE9BQU8sQ0FBQzBOLENBQUFBO3dDQUN2QixJQUFJLENBQUNELGdCQUFnQmxPLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUgsUUFBUSxLQUFLcU8sSUFBSXJPLFFBQVEsR0FBRzs0Q0FDM0RvTyxnQkFBZ0JwSSxJQUFJLENBQUM7Z0RBQ25CaEcsVUFBVXFPLElBQUlyTyxRQUFRO2dEQUN0QnVGLFNBQVM4SSxJQUFJOUksT0FBTztnREFDcEIrSSxhQUFhOzRDQUNmO3dDQUNGO29DQUNGO2dDQUNGO2dDQUVBLElBQUlGLGdCQUFnQjdOLE1BQU0sS0FBSyxHQUFHO29DQUNoQyxxQkFBTyw4REFBQ0o7d0NBQUU4TSxXQUFVO2tEQUE0Qzs7Ozs7O2dDQUNsRTtnQ0FFQSxPQUFPbUIsZ0JBQWdCMU4sR0FBRyxDQUFDLENBQUNUO29DQUMxQixNQUFNc08sa0JBQWtCdE8sT0FBT0QsUUFBUSxLQUFLekU7b0NBQzVDLE1BQU1pVCxZQUFZdlAsZ0JBQWdCaUgsUUFBUSxDQUFDakcsT0FBT0QsUUFBUTtvQ0FDMUQsTUFBTXlPLGdCQUFnQnhPLE9BQU9ELFFBQVEsS0FBS3pCO29DQUMxQywyRUFBMkU7b0NBQzNFLE1BQU0rUCxjQUFjck8sT0FBT3FPLFdBQVcsSUFBSXZPLHFCQUFxQkUsT0FBT0QsUUFBUTtvQ0FFOUUscUJBQ0UsOERBQUNnTjt3Q0FFQ0MsV0FBV3BTLDhDQUFFQSxDQUNYLDBFQUNBMFQsbUJBQW1CLGtEQUNuQkUsaUJBQWlCLGtEQUNqQixDQUFDRixtQkFBbUIsQ0FBQ0UsaUJBQWlCOzswREFHeEMsOERBQUN6QjtnREFBSUMsV0FBVTs7a0VBQ2IsOERBQUNVO3dEQUFLVixXQUFVO2tFQUNicUI7Ozs7OztvREFFRm5CLFdBQVdsTixPQUFPRCxRQUFRLEtBQUs3RSxLQUFLbVIsUUFBUSxrQkFDM0MsOERBQUM1Uix3REFBS0E7d0RBQUM2UyxTQUFRO3dEQUFVUSxNQUFLO2tFQUFLOzs7Ozs7b0RBRXBDUywyQkFDQyw4REFBQzlULHdEQUFLQTt3REFBQzZTLFNBQVE7d0RBQVVRLE1BQUs7a0VBQUs7Ozs7Ozs7Ozs7OzswREFHdkMsOERBQUNmO2dEQUFJQyxXQUFVOztvREFDWmhOLE9BQU9zRixPQUFPLGlCQUNiLDhEQUFDN0ssd0RBQUtBO3dEQUFDNlMsU0FBUTt3REFBVVEsTUFBSztrRUFBSzs7Ozs7NkVBRW5DLDhEQUFDSjt3REFBS1YsV0FBVTtrRUFBbUM7Ozs7OztvREFFcER3QiwrQkFDQyw4REFBQy9ULHdEQUFLQTt3REFBQzZTLFNBQVE7d0RBQVVRLE1BQUs7a0VBQUs7Ozs7Ozs7Ozs7Ozs7dUNBMUJsQzlOLE9BQU9ELFFBQVE7Ozs7O2dDQStCMUI7NEJBQ0Y7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBTU4sOERBQUNnTjtvQkFBSUMsV0FBVTs7d0JBQ1oxUixpQkFBaUIsQ0FBQzs0QkFDakIsTUFBTWtRLGtCQUFrQnZPLGlCQUFpQmdELElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUgsUUFBUSxLQUFLekU7Z0NBRzlEdVE7NEJBRkosTUFBTTRDLGVBQWVqRCxrQkFDakJBLGdCQUFnQmxHLE9BQU8sR0FDdkJ1RyxDQUFBQSwwQkFBQUEsMEJBQUFBLG9DQUFBQSxjQUFleEcsUUFBUSxjQUF2QndHLHFDQUFBQSwwQkFBMkI7NEJBQy9CLE1BQU02QyxhQUFhL1MsaUJBQWlCTSxhQUFhLGVBQWUsQ0FBQyxDQUFDa0I7NEJBRWxFLHFCQUNFLDhEQUFDN0MsMERBQU1BO2dDQUNMMlMsU0FBUzFCO2dDQUNUK0IsU0FBU21CLGVBQWUsWUFBWTtnQ0FDcENsQixVQUFVbUI7Z0NBQ1ZsQixXQUFXN1I7Z0NBQ1h3UixPQUFPbFIsYUFBYSxjQUFjLGtCQUFrQmtCLGFBQWEsMEJBQTBCOzBDQUUxRmxCLGFBQWEsY0FDVixrQkFDQWtCLGFBQ0Esa0JBQ0FzUixlQUNBLG1CQUNBOzs7Ozs7d0JBR1Y7d0JBR0N2QixXQUFXaFMsS0FBS3lMLE1BQU0sS0FBSyxhQUFhLENBQUN4Siw0QkFDeEMsOERBQUM0UDs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUMyQjtvQ0FBTUMsU0FBUTtvQ0FBYTVCLFdBQVU7OENBQXlDOzs7Ozs7OENBRy9FLDhEQUFDNkI7b0NBQ0NsSyxJQUFHO29DQUNIdEMsTUFBSztvQ0FDTDZFLEtBQUk7b0NBQ0o0SCxLQUFJO29DQUNKQyxPQUFPdlA7b0NBQ1B3UCxVQUFVLENBQUM5QyxJQUFNek0sbUJBQW1Cd0gsS0FBS0MsR0FBRyxDQUFDLElBQUlELEtBQUs2SCxHQUFHLENBQUMsR0FBR0csT0FBTy9DLEVBQUVnRCxNQUFNLENBQUNILEtBQUssS0FBSztvQ0FDdkYvQixXQUFVOzs7Ozs7OENBRVosOERBQUMxUywwREFBTUE7b0NBQ0x3VCxNQUFLO29DQUNMYixTQUFTO3dDQUNQLElBQUl6TixtQkFBbUIsS0FBS0EsbUJBQW1CLElBQUk7NENBQ2pEaUwsb0JBQW9Cakw7NENBQ3BCOUUsd0RBQUtBLENBQUN5VSxPQUFPLENBQUM7d0NBQ2hCO29DQUNGO29DQUNBNUIsVUFBVXRSLGFBQWEsZUFBZXVELGtCQUFrQixLQUFLQSxrQkFBa0I7b0NBQy9FMk4sT0FBT2xSLGFBQWEsY0FBYywyQkFBMkI7OENBQzlEOzs7Ozs7Ozs7Ozs7d0JBTUppUixXQUFXaFMsS0FBS3lMLE1BQU0sS0FBSyxhQUFhLENBQUN4Siw0QkFDeEMsOERBQUM3QywwREFBTUE7NEJBQ0wyUyxTQUFTaEI7NEJBQ1RzQixVQUFVeFI7NEJBQ1Z5UixXQUFXelI7c0NBQ1o7Ozs7Ozs7Ozs7OztnQkFPSnNCLFlBQVluQyxDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU15TCxNQUFNLE1BQUssMkJBQzVCLDhEQUFDb0c7b0JBQUlDLFdBQVU7O3dCQUVaOU4sMEJBQ0MsOERBQUM2Tjs0QkFBSUMsV0FBVTtzQ0FDYiw0RUFBQ1M7Z0NBQU9ULFdBQVU7O29DQUFVO29DQUFzQjlOLFNBQVNzSCxjQUFjOzs7Ozs7Ozs7Ozs7d0JBSzVFNUgsNkJBQ0MsOERBQUNtTzs0QkFBSUMsV0FBVTtzQ0FDWnBPOzs7Ozs7c0NBS0wsOERBQUNtTzs0QkFBSUMsV0FBVTs7OENBRWIsOERBQUNEO29DQUFJQyxXQUFVOzhDQUNiLDRFQUFDOVMsNERBQVNBO3dDQUNSOEQsaUJBQWlCQTt3Q0FDakJVLFlBQVlBO3dDQUNaZ0IsYUFBYUE7d0NBQ2JOLFlBQVlBO3dDQUNaZCxxQkFBcUJBO3dDQUNyQnNCLFlBQVlBO3dDQUNadEUsZUFBZUE7d0NBQ2ZrRCxVQUFVQTt3Q0FDVjRRLGFBQWE1Tzt3Q0FDYjZPLGVBQWV6Tzs7Ozs7Ozs7Ozs7OENBS25CLDhEQUFDbU07b0NBQUlDLFdBQVU7OENBQ2IsNEVBQUM1UywrREFBVUE7d0NBQ1Q4RCxnQkFBZ0JBO3dDQUNoQkYsaUJBQWlCQTt3Q0FDakJVLFlBQVlBO3dDQUNaZ0IsYUFBYUE7d0NBQ2JOLFlBQVlBO3dDQUNaZCxxQkFBcUJBO3dDQUNyQnNCLFlBQVlBO3dDQUNad1AsYUFBYTVPOzs7Ozs7Ozs7Ozs7Ozs7OztzQ0FNbkIsOERBQUNoRyxzREFBTUE7c0NBQ0wsNEVBQUN1UztnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNEOzswREFDQyw4REFBQ0E7Z0RBQUlDLFdBQVU7O2tFQUNiLDhEQUFDYTt3REFBR2IsV0FBVTs7NERBQThEOzREQUM5RDNQLFNBQVNpRCxNQUFNOzREQUFDOzREQUMzQmxDLGNBQWNrQyxNQUFNLEdBQUcsbUJBQ3RCLDhEQUFDb047Z0VBQUtWLFdBQVU7O29FQUF3RDtvRUFDekQ1TyxjQUFja0MsTUFBTTtvRUFBQzs7Ozs7Ozs7Ozs7OztvREFJdkMvQyxVQUFVK0MsTUFBTSxHQUFHLG1CQUNsQiw4REFBQ2hHLDBEQUFNQTt3REFDTDJTLFNBQVMsSUFBTXpQLGFBQWEsRUFBRTt3REFDOUI4UCxTQUFRO3dEQUNSUSxNQUFLO3dEQUNMWCxPQUFNO2tFQUNQOzs7Ozs7Ozs7Ozs7MERBS0wsOERBQUNKO2dEQUFJQyxXQUFVOzBEQUNaLENBQUM7b0RBQ0EsZ0VBQWdFO29EQUNoRSxJQUFJelAsVUFBVStDLE1BQU0sR0FBRyxLQUFLL0MsVUFBVStDLE1BQU0sS0FBS2pELFNBQVNpRCxNQUFNLEVBQUU7d0RBQ2hFLDRCQUE0Qjt3REFDNUIsT0FBTy9DLFVBQVVrRCxHQUFHLENBQUMsQ0FBQzZPLGNBQWdCalMsUUFBUSxDQUFDaVMsWUFBWSxFQUFFNUssTUFBTSxDQUFDNks7b0RBQ3RFLE9BQU87d0RBQ0wsdUJBQXVCO3dEQUN2QixPQUFPdlYsMERBQVNBLENBQUNxRDtvREFDbkI7Z0RBQ0YsS0FBS29ELEdBQUcsQ0FBQyxDQUFDbUQ7b0RBQ1IsTUFBTW1ILGFBQWEzTSxjQUFjNEwsSUFBSSxDQUNuQyxDQUFDZ0IsSUFBTS9RLDJEQUFVQSxDQUFDK1EsR0FBR3BIO29EQUV2QixNQUFNMEwsY0FBY2pTLFNBQVMrTSxTQUFTLENBQUMsQ0FBQ1ksSUFBTS9RLDJEQUFVQSxDQUFDK1EsR0FBR3BIO29EQUU1RCxxQkFDRSw4REFBQ21KO3dEQUVDeUMsU0FBUzt3REFDVEMsYUFBYSxDQUFDdkQ7NERBQ1pBLEVBQUV3RCxZQUFZLENBQUNDLE9BQU8sQ0FBQyxhQUFhcEcsT0FBTytGOzREQUMzQ3BELEVBQUV3RCxZQUFZLENBQUNFLGFBQWEsR0FBRzt3REFDakM7d0RBQ0FDLFlBQVksQ0FBQzNEOzREQUNYQSxFQUFFQyxjQUFjOzREQUNoQkQsRUFBRXdELFlBQVksQ0FBQ0ksVUFBVSxHQUFHO3dEQUM5Qjt3REFDQUMsUUFBUSxDQUFDN0Q7NERBQ1BBLEVBQUVDLGNBQWM7NERBQ2hCLE1BQU02RCxlQUFlQyxTQUFTL0QsRUFBRXdELFlBQVksQ0FBQ1EsT0FBTyxDQUFDLGNBQWM7NERBQ25FLE1BQU1DLFlBQVliOzREQUVsQixJQUFJVSxpQkFBaUJHLFdBQVc7NERBRWhDM1MsYUFBYSxDQUFDME07Z0VBQ1osSUFBSUEsVUFBVTVKLE1BQU0sS0FBSyxHQUFHO29FQUMxQix5QkFBeUI7b0VBQ3pCLE9BQU9qRCxTQUFTb0QsR0FBRyxDQUFDLENBQUMyUCxHQUFHL0YsTUFBUUE7Z0VBQ2xDO2dFQUVBLE1BQU1DLFdBQVc7dUVBQUlKO2lFQUFVO2dFQUMvQixNQUFNbUcsYUFBYS9GLFNBQVNnRyxPQUFPLENBQUNOO2dFQUNwQyxNQUFNTyxVQUFVakcsU0FBU2dHLE9BQU8sQ0FBQ0g7Z0VBRWpDLHNCQUFzQjtnRUFDdEI3RixTQUFTa0csTUFBTSxDQUFDSCxZQUFZO2dFQUM1Qix5QkFBeUI7Z0VBQ3pCL0YsU0FBU2tHLE1BQU0sQ0FBQ0QsU0FBUyxHQUFHUDtnRUFFNUIsT0FBTzFGOzREQUNUO3dEQUNGO3dEQUNBMEMsV0FBVTtrRUFFViw0RUFBQzdTLGdFQUFXQTs0REFDVnlKLE1BQU1BOzREQUNObUgsWUFBWUE7NERBQ1prQyxTQUFTLElBQU1uQyxnQkFBZ0JsSDs0REFDL0JrSyxNQUFLOzs7Ozs7dURBekNGLEdBQWdCbEssT0FBYkEsS0FBS3FILElBQUksRUFBQyxLQUFnQnFFLE9BQWIxTCxLQUFLc0gsSUFBSSxFQUFDLEtBQWUsT0FBWm9FOzs7OztnREE2Q3hDOzs7Ozs7Ozs7Ozs7b0NBS0gsQ0FBQ3BRLDBCQUNBLDhEQUFDNk47d0NBQUlDLFdBQVU7OzBEQUNiLDhEQUFDMVMsMERBQU1BO2dEQUNMMlMsU0FBUzlCO2dEQUNUbUMsU0FBUTtnREFDUkMsVUFBVSxDQUFDO29EQUNULE1BQU1uQyxlQUFlO3dEQUFDO3dEQUFHO3dEQUFHO3dEQUFHO3FEQUFFO29EQUNqQyxPQUFPLENBQUNBLGFBQWFuRixRQUFRLENBQUM3SCxjQUFja0MsTUFBTSxLQUFLLENBQUNnTCxZQUFZclAsYUFBYTtnREFDbkY7Z0RBQ0FrUixPQUNFbFIsYUFBYSxjQUNULDJCQUNBLENBQUNxUCxXQUNELGtCQUNBbE4sY0FBY2tDLE1BQU0sS0FBSyxJQUN6Qix1Q0FDQWxDLGNBQWNrQyxNQUFNLEtBQUssSUFDekIsb0RBQ0FsQyxjQUFja0MsTUFBTSxHQUFHLElBQ3ZCLDRCQUNBOztvREFFUDtvREFDT2xDLGNBQWNrQyxNQUFNLEdBQUcsS0FBSyxJQUF5QixPQUFyQmxDLGNBQWNrQyxNQUFNLEVBQUM7Ozs7Ozs7MERBRTdELDhEQUFDaEcsMERBQU1BO2dEQUNMMlMsU0FBUzVCO2dEQUNUaUMsU0FBUTtnREFDUkMsVUFBVSxDQUFDakMsWUFBWSxDQUFDOU0sWUFBWXZDLGFBQWE7Z0RBQ2pEa1IsT0FDRWxSLGFBQWEsY0FDVCwyQkFDQSxDQUFDcVAsV0FDRCxrQkFDQSxDQUFDOU0sV0FDRCw2QkFDQTswREFFUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVlyQjtHQTd3RGdCekQ7O1FBQ0t4QixzREFBU0E7UUFDWEMsd0RBQVdBOzs7S0FGZHVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9wYWdlcy9Sb29tUGFnZS50c3g/NmU4OSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlUGFyYW1zLCB1c2VOYXZpZ2F0ZSB9IGZyb20gJy4uL2xpYi9uYXZpZ2F0aW9uJ1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuLi9saWIvc3VwYWJhc2UnXG5pbXBvcnQgeyBjb25uZWN0R2FtZVNvY2tldERlYnVnLCB0eXBlIEdhbWVTb2NrZXRNZXNzYWdlLCB0eXBlIFdTRXZlbnRMb2cgfSBmcm9tICcuLi9saWIvZ2FtZVNvY2tldCdcbmltcG9ydCB7IGxvZywgd2FybiwgZXJyb3IgYXMgbG9nRXJyb3IgfSBmcm9tICcuLi9saWIvbG9nZ2VyJ1xuaW1wb3J0IHR5cGUgeyBSb29tLCBSb29tUGxheWVyLCBQcm9maWxlIH0gZnJvbSAnLi4vdHlwZXMvZGF0YWJhc2UnXG5pbXBvcnQgdHlwZSB7IENhcmQgfSBmcm9tICcuLi90eXBlcy9jYXJkcydcbmltcG9ydCB7IG5vcm1hbGl6ZUNhcmQgfSBmcm9tICcuLi90eXBlcy9jYXJkcydcbmltcG9ydCB7IHNvcnRDYXJkcywgY2FyZHNFcXVhbCB9IGZyb20gJy4uL3V0aWxzL2NhcmRTb3J0J1xuaW1wb3J0IHsgVGFibGVWaWV3IH0gZnJvbSAnLi4vY29tcG9uZW50cy9UYWJsZVZpZXcnXG5pbXBvcnQgeyBQbGF5aW5nQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvUGxheWluZ0NhcmQnXG5pbXBvcnQgeyBRdWV1ZVBhbmVsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9RdWV1ZVBhbmVsJ1xuaW1wb3J0IHsgQXBwU2hlbGwgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwcFNoZWxsJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy91aS9CdXR0b24nXG5pbXBvcnQgeyBDYXJkIGFzIFVJQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdWkvQ2FyZCdcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy91aS9CYWRnZSdcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAnLi4vY29tcG9uZW50cy91aS9Ub2FzdCdcbmltcG9ydCB7IFNrZWxldG9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy91aS9Ta2VsZXRvbidcbmltcG9ydCB7IGNuIH0gZnJvbSAnLi4vdXRpbHMvY24nXG5cbmNvbnN0IGlzRGV2ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCdcblxuaW50ZXJmYWNlIFBsYXllcldpdGhQcm9maWxlIGV4dGVuZHMgUm9vbVBsYXllciB7XG4gIHByb2ZpbGU6IFByb2ZpbGUgfCBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSb29tUGFnZSgpIHtcbiAgY29uc3QgeyByb29tSWQgfSA9IHVzZVBhcmFtczx7IHJvb21JZDogc3RyaW5nIH0+KClcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIGNvbnN0IFtyb29tLCBzZXRSb29tXSA9IHVzZVN0YXRlPFJvb20gfCBudWxsPihudWxsKVxuICBjb25zdCBbcGxheWVycywgc2V0UGxheWVyc10gPSB1c2VTdGF0ZTxQbGF5ZXJXaXRoUHJvZmlsZVtdPihbXSlcbiAgY29uc3QgW2N1cnJlbnRVc2VySWQsIHNldEN1cnJlbnRVc2VySWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbdXBkYXRpbmdSZWFkeSwgc2V0VXBkYXRpbmdSZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2xlYXZpbmcsIHNldExlYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtpc1N0YXJ0aW5nLCBzZXRJc1N0YXJ0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBcbiAgLy8gV2ViU29ja2V0IHN0YXRlXG4gIGNvbnN0IFt3c1N0YXR1cywgc2V0V3NTdGF0dXNdID0gdXNlU3RhdGU8J2Rpc2Nvbm5lY3RlZCcgfCAnY29ubmVjdGluZycgfCAnY29ubmVjdGVkJyB8ICdyZWNvbm5lY3RpbmcnIHwgJ2Vycm9yJz4oJ2Rpc2Nvbm5lY3RlZCcpXG4gIGNvbnN0IFt3c01lc3NhZ2VzLCBzZXRXc01lc3NhZ2VzXSA9IHVzZVN0YXRlPEdhbWVTb2NrZXRNZXNzYWdlW10+KFtdKVxuICBjb25zdCBbd3NFcnJvciwgc2V0V3NFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCB3c1JlZiA9IHVzZVJlZjxXZWJTb2NrZXQgfCBudWxsPihudWxsKVxuICBjb25zdCBjb25uZWN0aW5nUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKVxuICBjb25zdCBbd3NFdmVudHMsIHNldFdzRXZlbnRzXSA9IHVzZVN0YXRlPFdTRXZlbnRMb2dbXT4oW10pXG4gIGNvbnN0IFt3c1VybCwgc2V0V3NVcmxdID0gdXNlU3RhdGU8c3RyaW5nPignJylcbiAgY29uc3Qgc2hvdWxkUmVjb25uZWN0UmVmID0gdXNlUmVmPGJvb2xlYW4+KHRydWUpIC8vIENvbnRyb2wgcmVjb25uZWN0aW9uXG4gIGNvbnN0IHJlY29ubmVjdEF0dGVtcHRSZWYgPSB1c2VSZWY8bnVtYmVyPigwKVxuICBjb25zdCByb29tQ2hhbm5lbFJlZiA9IHVzZVJlZjxhbnk+KG51bGwpIC8vIFRyYWNrIHJvb20gY2hhbm5lbCB0byBwcmV2ZW50IGR1cGxpY2F0ZSBzdWJzY3JpcHRpb25zXG4gIGNvbnN0IHBsYXllcnNDaGFubmVsUmVmID0gdXNlUmVmPGFueT4obnVsbCkgLy8gVHJhY2sgcGxheWVycyBjaGFubmVsIHRvIHByZXZlbnQgZHVwbGljYXRlIHN1YnNjcmlwdGlvbnNcbiAgXG4gIC8vIEdhbWUgc3RhdGUgZnJvbSBXU1xuICBjb25zdCBbcm9vbVN0YXRlUGxheWVycywgc2V0Um9vbVN0YXRlUGxheWVyc10gPSB1c2VTdGF0ZTxBcnJheTx7cGxheWVySWQ6IHN0cmluZywgaXNSZWFkeTogYm9vbGVhbn0+PihbXSlcbiAgY29uc3QgW3JvdW5kU3RhcnQsIHNldFJvdW5kU3RhcnRdID0gdXNlU3RhdGU8e3Jvb21JZDogc3RyaW5nLCBzdGFydGVkQXQ6IHN0cmluZ30gfCBudWxsPihudWxsKVxuICBcbiAgLy8gREVBTFQgc3RhdGVcbiAgY29uc3QgW3lvdXJIYW5kLCBzZXRZb3VySGFuZF0gPSB1c2VTdGF0ZTxDYXJkW10gfCBudWxsPihudWxsKVxuICBjb25zdCBbaGFuZE9yZGVyLCBzZXRIYW5kT3JkZXJdID0gdXNlU3RhdGU8bnVtYmVyW10+KFtdKSAvLyBDdXN0b20gb3JkZXIgaW5kaWNlc1xuICBjb25zdCBbX3BlbmRpbmdQbGF5Q2FyZHMsIHNldFBlbmRpbmdQbGF5Q2FyZHNdID0gdXNlU3RhdGU8Q2FyZFtdIHwgbnVsbD4obnVsbCkgLy8gQ2FyZHMgd2UncmUgdHJ5aW5nIHRvIHBsYXkgKGZvciBlcnJvciByZWNvdmVyeSkgLSBzdGF0ZSBmb3Igc2V0dGVyLCByZWYgZm9yIHJlYWRpbmdcbiAgY29uc3QgcGVuZGluZ1BsYXlDYXJkc1JlZiA9IHVzZVJlZjxDYXJkW10gfCBudWxsPihudWxsKSAvLyBSZWYgdG8gYWNjZXNzIGN1cnJlbnQgcGVuZGluZyBjYXJkcyBpbiBtZXNzYWdlIGhhbmRsZXJzXG4gIGNvbnN0IFtfc3RhcnRlclBsYXllcklkLCBzZXRTdGFydGVyUGxheWVySWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW19zdGFydGVyUmVhc29uLCBzZXRTdGFydGVyUmVhc29uXSA9IHVzZVN0YXRlPFwiV0lOTkVSXCIgfCBcIldFQUtFU1RfU0lOR0xFXCIgfCBzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbc2VhdGVkUGxheWVySWRzLCBzZXRTZWF0ZWRQbGF5ZXJJZHNdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKVxuICBjb25zdCBbcXVldWVQbGF5ZXJJZHMsIHNldFF1ZXVlUGxheWVySWRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSlcbiAgXG4gIC8vIEdhbWUgc3RhdGVcbiAgY29uc3QgW3NlbGVjdGVkQ2FyZHMsIHNldFNlbGVjdGVkQ2FyZHNdID0gdXNlU3RhdGU8Q2FyZFtdPihbXSlcbiAgY29uc3QgW2N1cnJlbnRUdXJuUGxheWVySWQsIHNldEN1cnJlbnRUdXJuUGxheWVySWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2xhc3RQbGF5LCBzZXRMYXN0UGxheV0gPSB1c2VTdGF0ZTx7cGxheWVySWQ6IHN0cmluZywgY2FyZHM6IENhcmRbXSwga2luZD86IHN0cmluZywgZml2ZUtpbmQ/OiBzdHJpbmd9IHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2hhbmRzQ291bnQsIHNldEhhbmRzQ291bnRdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4oe30pXG4gIGNvbnN0IFthY3Rpb25FcnJvciwgc2V0QWN0aW9uRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW19jYW5QYXNzLCBzZXRDYW5QYXNzXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKSAvLyBMZWdhY3ksIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgKHNlcnZlciBtYXkgc3RpbGwgc2VuZCBpdCwgYnV0IFBBU1MgYnV0dG9uIHVzZXMgbGFzdFBsYXkgaW5zdGVhZClcbiAgY29uc3QgW3Bhc3NlZFBsYXllcklkcywgc2V0UGFzc2VkUGxheWVySWRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSlcbiAgY29uc3QgW3JvdW5kRW5kLCBzZXRSb3VuZEVuZF0gPSB1c2VTdGF0ZTx7d2lubmVyUGxheWVySWQ6IHN0cmluZ30gfCBudWxsPihudWxsKVxuICBcbiAgLy8gUnVsZXMgYW5kIHNjb3JpbmdcbiAgY29uc3QgW3Njb3JlTGltaXQsIHNldFNjb3JlTGltaXRdID0gdXNlU3RhdGU8bnVtYmVyPig2MClcbiAgY29uc3QgW19zY29yZWJvYXJkLCBzZXRTY29yZWJvYXJkXSA9IHVzZVN0YXRlPHtwbGF5ZXJJZDogc3RyaW5nLCB0b3RhbFNjb3JlOiBudW1iZXIsIGVsaW1pbmF0ZWQ6IGJvb2xlYW59W10+KFtdKVxuICBjb25zdCBbc2NvcmVMaW1pdElucHV0LCBzZXRTY29yZUxpbWl0SW5wdXRdID0gdXNlU3RhdGU8bnVtYmVyPig2MClcbiAgY29uc3QgW3RvdGFsU2NvcmVzLCBzZXRUb3RhbFNjb3Jlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+Pih7fSlcbiAgY29uc3QgW2VsaW1pbmF0ZWQsIHNldEVsaW1pbmF0ZWRdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBhIHBsYXllclxuICBjb25zdCBnZXRQbGF5ZXJEaXNwbGF5TmFtZSA9IHVzZUNhbGxiYWNrKChwbGF5ZXJJZDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJzLmZpbmQocCA9PiBwLnBsYXllcl9pZCA9PT0gcGxheWVySWQpXG4gICAgaWYgKHBsYXllcj8ucHJvZmlsZT8uZGlzcGxheV9uYW1lKSB7XG4gICAgICByZXR1cm4gcGxheWVyLnByb2ZpbGUuZGlzcGxheV9uYW1lXG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIHNob3J0IElEIGlmIG5vIGRpc3BsYXlfbmFtZVxuICAgIHJldHVybiBwbGF5ZXJJZC5sZW5ndGggPiA4ID8gYCR7cGxheWVySWQuc3Vic3RyaW5nKDAsIDgpfS4uLmAgOiBwbGF5ZXJJZFxuICB9LCBbcGxheWVyc10pXG5cbiAgLy8gQ3JlYXRlIHBsYXllciBuYW1lIG1hcCBmb3IgcGFzc2luZyB0byBjb21wb25lbnRzXG4gIGNvbnN0IHBsYXllck5hbWVNYXAgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICAgIHBsYXllcnMuZm9yRWFjaCgocCkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IHAucHJvZmlsZT8uZGlzcGxheV9uYW1lIHx8ICcnXG4gICAgICBpZiAobmFtZSkge1xuICAgICAgICBtYXBbcC5wbGF5ZXJfaWRdID0gbmFtZVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIG1hcFxuICB9LCBbcGxheWVyc10pXG5cbiAgLy8gQ3JlYXRlIHBsYXllciBhdmF0YXIgbWFwIGZvciBwYXNzaW5nIHRvIGNvbXBvbmVudHNcbiAgY29uc3QgcGxheWVyQXZhdGFyTWFwID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsPiA9IHt9XG4gICAgcGxheWVycy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICBpZiAocC5wcm9maWxlPy5hdmF0YXJfdXJsKSB7XG4gICAgICAgIG1hcFtwLnBsYXllcl9pZF0gPSBwLnByb2ZpbGUuYXZhdGFyX3VybFxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIG1hcFxuICB9LCBbcGxheWVyc10pXG5cbiAgLy8gQXV0by1jb25uZWN0IGZ1bmN0aW9uOiBjb25uZWN0cyB0byBXUyBpZiByb29tIHN0YXR1cyBpcyBcInBsYXlpbmdcIlxuICBjb25zdCBjb25uZWN0SWZQbGF5aW5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKHJvb21TdGF0dXM6IHN0cmluZywgcm9vbUlkVG9Db25uZWN0OiBzdHJpbmcpID0+IHtcbiAgICAvLyBJZiByb29tU3RhdHVzICE9PSBcInBsYXlpbmdcIiwgZG8gbm90aGluZ1xuICAgIGlmIChyb29tU3RhdHVzICE9PSAncGxheWluZycpIHtcbiAgICAgIHNob3VsZFJlY29ubmVjdFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gU3RvcCByZWNvbm5lY3RpbmcgaWYgcm9vbSBub3QgcGxheWluZ1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEVuYWJsZSByZWNvbm5lY3Rpb24gd2hlbiBjb25uZWN0aW5nXG4gICAgc2hvdWxkUmVjb25uZWN0UmVmLmN1cnJlbnQgPSB0cnVlXG5cbiAgICAvLyBJZiBhbHJlYWR5IGNvbm5lY3RlZCBvciBjb25uZWN0aW5nLCBkbyBub3RoaW5nXG4gICAgaWYgKHdzUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHJlYWR5U3RhdGUgPSB3c1JlZi5jdXJyZW50LnJlYWR5U3RhdGVcbiAgICAgIGlmIChyZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgICBsb2coJ1tBdXRvQ29ubmVjdF0gQWxyZWFkeSBjb25uZWN0ZWQsIHNraXBwaW5nJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAocmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgICAgbG9nKCdbQXV0b0Nvbm5lY3RdIEFscmVhZHkgY29ubmVjdGluZywgc2tpcHBpbmcnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIC8vIElmIGNsb3Npbmcgb3IgY2xvc2VkLCBjbGVhbiB1cCBmaXJzdFxuICAgICAgaWYgKHJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TSU5HIHx8IHJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRUQpIHtcbiAgICAgICAgd3NSZWYuY3VycmVudC5jbG9zZSgpXG4gICAgICAgIHdzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbm5lY3RpbmdSZWYuY3VycmVudCkge1xuICAgICAgbG9nKCdbQXV0b0Nvbm5lY3RdIENvbm5lY3Rpb24gaW4gcHJvZ3Jlc3MgKGZsYWcpLCBza2lwcGluZycpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsb2coJ1tBdXRvQ29ubmVjdF0gcm9vbS5zdGF0dXMgaXMgcGxheWluZycpXG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IFN1cGFiYXNlIHNlc3Npb25cbiAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpXG4gICAgICBjb25zdCBoYXNUb2tlbiA9ICEhc2Vzc2lvbj8uYWNjZXNzX3Rva2VuXG4gICAgICBsb2coJ1tBdXRvQ29ubmVjdF0gdG9rZW4gcHJlc2VudD8nLCBoYXNUb2tlbilcblxuICAgICAgaWYgKCFzZXNzaW9uPy5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgbG9nKCdbQXV0b0Nvbm5lY3RdIE5vIGFjY2VzcyB0b2tlbiBhdmFpbGFibGUnKVxuICAgICAgICBzZXRXc0Vycm9yKCdObyBhY2Nlc3MgdG9rZW4gYXZhaWxhYmxlJylcbiAgICAgICAgc2V0V3NTdGF0dXMoJ2Vycm9yJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxvZygnW0F1dG9Db25uZWN0XSBjcmVhdGluZyBXUycpXG4gICAgICBcbiAgICAgIC8vIENvbm5lY3QgdG8gV1MgdXNpbmcgZ2FtZVNvY2tldCBoZWxwZXJcbiAgICAgIGNvbm5lY3RpbmdSZWYuY3VycmVudCA9IHRydWVcbiAgICAgIHNldFdzU3RhdHVzKCdjb25uZWN0aW5nJylcbiAgICAgIHNldFdzRXJyb3IobnVsbClcblxuICAgICAgLy8gR2V0IFdTIFVSTCBmb3IgZGlzcGxheVxuICAgICAgY29uc3Qgd3NVcmxFbnYgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HQU1FX1NFUlZFUl9XU19VUkwgfHwgcHJvY2Vzcy5lbnYuVklURV9HQU1FX1NFUlZFUl9XU19VUkwgfHwgJ25vdCBzZXQnXG4gICAgICBzZXRXc1VybCh3c1VybEVudilcblxuICAgICAgY29uc3Qgd3MgPSBjb25uZWN0R2FtZVNvY2tldERlYnVnKFxuICAgICAgICByb29tSWRUb0Nvbm5lY3QsXG4gICAgICAgIHNlc3Npb24uYWNjZXNzX3Rva2VuLFxuICAgICAgICAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgIGxvZyhcIltXU10gbWVzc2FnZSBoYW5kbGVyIHJlY2VpdmVkXCIsIG1lc3NhZ2UudHlwZSlcbiAgICAgICAgICAvLyBIYW5kbGUgaW5jb21pbmcgbWVzc2FnZXMgKG9ubHkgc3RvcmUgaW4gZGV2IGZvciBkZWJ1ZyBVSSlcbiAgICAgICAgICBpZiAoaXNEZXYpIHtcbiAgICAgICAgICAgIHNldFdzTWVzc2FnZXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3TWVzc2FnZXMgPSBbbWVzc2FnZSwgLi4ucHJldl0uc2xpY2UoMCwgMjApXG4gICAgICAgICAgICAgIHJldHVybiBuZXdNZXNzYWdlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBIYW5kbGUgRVJST1IgbWVzc2FnZXMgZnJvbSBzZXJ2ZXJcbiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnRVJST1InKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IG1lc3NhZ2UuZXJyb3IgfHwgbWVzc2FnZS5tZXNzYWdlIHx8ICdTZXJ2ZXIgZXJyb3InXG4gICAgICAgICAgICBsb2dFcnJvcignW1dTXSBTZXJ2ZXIgRVJST1I6JywgZXJyb3JNc2cpXG4gICAgICAgICAgICBzZXRXc0Vycm9yKGVycm9yTXNnKVxuICAgICAgICAgICAgc2V0V3NTdGF0dXMoJ2Vycm9yJylcbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ1dFTENPTUUnKSB7XG4gICAgICAgICAgICBsb2coJ1tXU10gUmVjZWl2ZWQgV0VMQ09NRScpXG4gICAgICAgICAgICBsb2coJ1tBdXRvQ29ubmVjdF0gV1MgY29ubmVjdGVkIGJlY2F1c2Ugcm9vbSBpcyBwbGF5aW5nJylcbiAgICAgICAgICAgIHNldFdzU3RhdHVzKCdjb25uZWN0ZWQnKVxuICAgICAgICAgICAgc2V0V3NFcnJvcihudWxsKVxuICAgICAgICAgICAgY29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgIHJlY29ubmVjdEF0dGVtcHRSZWYuY3VycmVudCA9IDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2VuZCBTWU5DX1JFUVVFU1QgYWZ0ZXIgV0VMQ09NRVxuICAgICAgICAgICAgLy8gVXNlIHJvb21JZFRvQ29ubmVjdCB0byBlbnN1cmUgd2UgaGF2ZSB0aGUgY29ycmVjdCByb29tSWQgZnJvbSB0aGUgZnVuY3Rpb24gcGFyYW1ldGVyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJvb21JZCA9IHJvb21JZFRvQ29ubmVjdCB8fCByb29tSWRcbiAgICAgICAgICAgICAgaWYgKHdzUmVmLmN1cnJlbnQgJiYgd3NSZWYuY3VycmVudC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTiAmJiBjdXJyZW50Um9vbUlkKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJvb21JZCBiZWZvcmUgc2VuZGluZ1xuICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50Um9vbUlkIHx8IHR5cGVvZiBjdXJyZW50Um9vbUlkICE9PSAnc3RyaW5nJyB8fCBjdXJyZW50Um9vbUlkLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3IoJ1tXU10gQ2Fubm90IHNlbmQgU1lOQ19SRVFVRVNUOiBJbnZhbGlkIHJvb21JZCcsIHsgXG4gICAgICAgICAgICAgICAgICAgICAgcm9vbUlkOiBjdXJyZW50Um9vbUlkLCBcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlb2YgY3VycmVudFJvb21JZCxcbiAgICAgICAgICAgICAgICAgICAgICBmcm9tUGFyYW1zOiByb29tSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUNvbm5lY3Q6IHJvb21JZFRvQ29ubmVjdFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3Qgc3luY01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdTWU5DX1JFUVVFU1QnIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgICAgICByb29tSWQ6IGN1cnJlbnRSb29tSWQudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgbG9nKCdbV1NdIFNlbmRpbmcgU1lOQ19SRVFVRVNUOicsIHN5bmNNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHN5bmNNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgbG9nKCdbV1NdIFNZTkNfUkVRVUVTVCBKU09OOicsIG1lc3NhZ2VTdHJpbmcpXG4gICAgICAgICAgICAgICAgICB3c1JlZi5jdXJyZW50LnNlbmQobWVzc2FnZVN0cmluZylcbiAgICAgICAgICAgICAgICAgIGxvZygnW1dTXSBTWU5DX1JFUVVFU1Qgc2VudCcpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICBsb2dFcnJvcignW1dTXSBGYWlsZWQgdG8gc2VuZCBTWU5DX1JFUVVFU1Q6JywgZXJyKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dFcnJvcignW1dTXSBDYW5ub3Qgc2VuZCBTWU5DX1JFUVVFU1Q6Jywge1xuICAgICAgICAgICAgICAgICAgd3NSZWFkeTogd3NSZWYuY3VycmVudD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4sXG4gICAgICAgICAgICAgICAgICByb29tSWQ6IGN1cnJlbnRSb29tSWQsXG4gICAgICAgICAgICAgICAgICByb29tSWRGcm9tUGFyYW1zOiByb29tSWQsXG4gICAgICAgICAgICAgICAgICByb29tSWRGcm9tQ29ubmVjdDogcm9vbUlkVG9Db25uZWN0LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCkgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIGNvbm5lY3Rpb24gaXMgc3RhYmxlXG4gICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdTVEFURScpIHtcbiAgICAgICAgICAgIGxvZygnW1dTXSBSZWNlaXZlZCBTVEFURScpXG4gICAgICAgICAgICBsb2coJ1tBdXRvQ29ubmVjdF0gV1MgY29ubmVjdGVkIGJlY2F1c2Ugcm9vbSBpcyBwbGF5aW5nJylcbiAgICAgICAgICAgIHNldFdzU3RhdHVzKCdjb25uZWN0ZWQnKVxuICAgICAgICAgICAgc2V0V3NFcnJvcihudWxsKVxuICAgICAgICAgICAgY29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgIHJlY29ubmVjdEF0dGVtcHRSZWYuY3VycmVudCA9IDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWxzbyBzZW5kIFNZTkNfUkVRVUVTVCBhZnRlciBTVEFURSAoaW4gY2FzZSBXRUxDT01FIHdhcyBtaXNzZWQpXG4gICAgICAgICAgICAvLyBVc2Ugcm9vbUlkVG9Db25uZWN0IHRvIGVuc3VyZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IHJvb21JZCBmcm9tIHRoZSBmdW5jdGlvbiBwYXJhbWV0ZXJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Um9vbUlkID0gcm9vbUlkVG9Db25uZWN0IHx8IHJvb21JZFxuICAgICAgICAgICAgICBpZiAod3NSZWYuY3VycmVudCAmJiB3c1JlZi5jdXJyZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOICYmIGN1cnJlbnRSb29tSWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgcm9vbUlkIGJlZm9yZSBzZW5kaW5nXG4gICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRSb29tSWQgfHwgdHlwZW9mIGN1cnJlbnRSb29tSWQgIT09ICdzdHJpbmcnIHx8IGN1cnJlbnRSb29tSWQudHJpbSgpID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcignW1dTXSBDYW5ub3Qgc2VuZCBTWU5DX1JFUVVFU1QgKGFmdGVyIFNUQVRFKTogSW52YWxpZCByb29tSWQnLCB7IFxuICAgICAgICAgICAgICAgICAgICAgIHJvb21JZDogY3VycmVudFJvb21JZCwgXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZW9mIGN1cnJlbnRSb29tSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbVBhcmFtczogcm9vbUlkLFxuICAgICAgICAgICAgICAgICAgICAgIGZyb21Db25uZWN0OiByb29tSWRUb0Nvbm5lY3RcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHN5bmNNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnU1lOQ19SRVFVRVNUJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAgICAgcm9vbUlkOiBjdXJyZW50Um9vbUlkLnRyaW0oKSxcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGxvZygnW1dTXSBTZW5kaW5nIFNZTkNfUkVRVUVTVCAoYWZ0ZXIgU1RBVEUpOicsIHN5bmNNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHN5bmNNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgbG9nKCdbV1NdIFNZTkNfUkVRVUVTVCBKU09OIChhZnRlciBTVEFURSk6JywgbWVzc2FnZVN0cmluZylcbiAgICAgICAgICAgICAgICAgIHdzUmVmLmN1cnJlbnQuc2VuZChtZXNzYWdlU3RyaW5nKVxuICAgICAgICAgICAgICAgICAgbG9nKCdbV1NdIFNZTkNfUkVRVUVTVCBzZW50IChhZnRlciBTVEFURSknKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgbG9nRXJyb3IoJ1tXU10gRmFpbGVkIHRvIHNlbmQgU1lOQ19SRVFVRVNUOicsIGVycilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nRXJyb3IoJ1tXU10gQ2Fubm90IHNlbmQgU1lOQ19SRVFVRVNUIChhZnRlciBTVEFURSk6Jywge1xuICAgICAgICAgICAgICAgICAgd3NSZWFkeTogd3NSZWYuY3VycmVudD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4sXG4gICAgICAgICAgICAgICAgICByb29tSWQ6IGN1cnJlbnRSb29tSWQsXG4gICAgICAgICAgICAgICAgICByb29tSWRGcm9tUGFyYW1zOiByb29tSWQsXG4gICAgICAgICAgICAgICAgICByb29tSWRGcm9tQ29ubmVjdDogcm9vbUlkVG9Db25uZWN0LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMClcbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ1NZTkNfU1RBVEUnKSB7XG4gICAgICAgICAgICBsb2coJ1tXU10gUmVjZWl2ZWQgU1lOQ19TVEFURScpXG4gICAgICAgICAgICAvLyBDbGVhciBhbnkgcGVuZGluZyBwbGF5IGNhcmRzIChzdGF0ZSBzeW5jZWQgZnJvbSBzZXJ2ZXIpXG4gICAgICAgICAgICBzZXRQZW5kaW5nUGxheUNhcmRzKG51bGwpXG4gICAgICAgICAgICBwZW5kaW5nUGxheUNhcmRzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgICAgICAvLyBBcHBseSBTWU5DX1NUQVRFIC0gb3ZlcndyaXRlIGFsbCByZWxldmFudCBzdGF0ZSAoZG8gTk9UIG1lcmdlKVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VhdGVkUGxheWVySWRzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZS5zZWF0ZWRQbGF5ZXJJZHMpKSB7XG4gICAgICAgICAgICAgIHNldFNlYXRlZFBsYXllcklkcyhtZXNzYWdlLnNlYXRlZFBsYXllcklkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXVlUGxheWVySWRzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZS5xdWV1ZVBsYXllcklkcykpIHtcbiAgICAgICAgICAgICAgc2V0UXVldWVQbGF5ZXJJZHMobWVzc2FnZS5xdWV1ZVBsYXllcklkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmN1cnJlbnRUdXJuUGxheWVySWQpIHtcbiAgICAgICAgICAgICAgc2V0Q3VycmVudFR1cm5QbGF5ZXJJZChtZXNzYWdlLmN1cnJlbnRUdXJuUGxheWVySWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0UGxheSkge1xuICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkTGFzdFBsYXkgPSB7XG4gICAgICAgICAgICAgICAgcGxheWVySWQ6IG1lc3NhZ2UubGFzdFBsYXkucGxheWVySWQsXG4gICAgICAgICAgICAgICAgY2FyZHM6IEFycmF5LmlzQXJyYXkobWVzc2FnZS5sYXN0UGxheS5jYXJkcykgXG4gICAgICAgICAgICAgICAgICA/IG1lc3NhZ2UubGFzdFBsYXkuY2FyZHMubWFwKChjYXJkOiBhbnkpID0+IG5vcm1hbGl6ZUNhcmQoY2FyZCkpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgICAgIGtpbmQ6IG1lc3NhZ2UubGFzdFBsYXkua2luZCxcbiAgICAgICAgICAgICAgICBmaXZlS2luZDogbWVzc2FnZS5sYXN0UGxheS5maXZlS2luZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldExhc3RQbGF5KG5vcm1hbGl6ZWRMYXN0UGxheSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldExhc3RQbGF5KG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5oYW5kc0NvdW50ICYmIHR5cGVvZiBtZXNzYWdlLmhhbmRzQ291bnQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIHNldEhhbmRzQ291bnQobWVzc2FnZS5oYW5kc0NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudG90YWxTY29yZXMgJiYgdHlwZW9mIG1lc3NhZ2UudG90YWxTY29yZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNjb3Jlc01hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW3BsYXllcklkLCBzY29yZV0gb2YgT2JqZWN0LmVudHJpZXMobWVzc2FnZS50b3RhbFNjb3JlcykpIHtcbiAgICAgICAgICAgICAgICBzY29yZXNNYXBbcGxheWVySWRdID0gdHlwZW9mIHNjb3JlID09PSAnbnVtYmVyJyA/IHNjb3JlIDogMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldFRvdGFsU2NvcmVzKHNjb3Jlc01hcClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVsaW1pbmF0ZWQgJiYgQXJyYXkuaXNBcnJheShtZXNzYWdlLmVsaW1pbmF0ZWQpKSB7XG4gICAgICAgICAgICAgIHNldEVsaW1pbmF0ZWQobWVzc2FnZS5lbGltaW5hdGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UueW91ckhhbmQgJiYgQXJyYXkuaXNBcnJheShtZXNzYWdlLnlvdXJIYW5kKSkge1xuICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSGFuZCA9IG1lc3NhZ2UueW91ckhhbmQubWFwKChjYXJkOiBhbnkpID0+IG5vcm1hbGl6ZUNhcmQoY2FyZCkpXG4gICAgICAgICAgICAgIGNvbnN0IHNvcnRlZEhhbmQgPSBzb3J0Q2FyZHMobm9ybWFsaXplZEhhbmQpXG4gICAgICAgICAgICAgIHNldFlvdXJIYW5kKHNvcnRlZEhhbmQpXG4gICAgICAgICAgICAgIHNldEhhbmRPcmRlcihbXSkgLy8gUmVzZXQgY3VzdG9tIG9yZGVyIHdoZW4gbmV3IGhhbmQgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zY29yZUxpbWl0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICBzZXRTY29yZUxpbWl0KG1lc3NhZ2Uuc2NvcmVMaW1pdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ1JPT01fU1RBVEUnKSB7XG4gICAgICAgICAgICBsb2coJ1tXU10gUmVjZWl2ZWQgUk9PTV9TVEFURScpXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wbGF5ZXJzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZS5wbGF5ZXJzKSkge1xuICAgICAgICAgICAgICBzZXRSb29tU3RhdGVQbGF5ZXJzKG1lc3NhZ2UucGxheWVycylcbiAgICAgICAgICAgICAgLy8gRmV0Y2ggcHJvZmlsZXMgZm9yIGFueSBuZXcgcGxheWVycyB0aGF0IGRvbid0IGhhdmUgcHJvZmlsZXMgeWV0XG4gICAgICAgICAgICAgIC8vIFVzZSBmdW5jdGlvbmFsIHVwZGF0ZSB0byBhY2Nlc3MgY3VycmVudCBwbGF5ZXJzIHN0YXRlXG4gICAgICAgICAgICAgIHNldFBsYXllcnMoY3VycmVudFBsYXllcnMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BsYXllcklkcyA9IG1lc3NhZ2UucGxheWVycy5tYXAoKHA6IGFueSkgPT4gcC5wbGF5ZXJJZClcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1BsYXllcklkcyA9IG5ldyBTZXQoY3VycmVudFBsYXllcnMubWFwKHAgPT4gcC5wbGF5ZXJfaWQpKVxuICAgICAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdQbGF5ZXJJZHMgPSBuZXdQbGF5ZXJJZHMuZmlsdGVyKChpZDogc3RyaW5nKSA9PiAhZXhpc3RpbmdQbGF5ZXJJZHMuaGFzKGlkKSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWlzc2luZ1BsYXllcklkcy5sZW5ndGggPiAwICYmIHJvb21JZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggcHJvZmlsZXMgZm9yIG1pc3NpbmcgcGxheWVycyBhc3luY2hyb25vdXNseVxuICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgICAgIG1pc3NpbmdQbGF5ZXJJZHMubWFwKGFzeW5jIChwbGF5ZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnaWQsIGRpc3BsYXlfbmFtZSwgYXZhdGFyX3VybCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5lcSgnaWQnLCBwbGF5ZXJJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnNpbmdsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwbGF5ZXJzIHN0YXRlIHdpdGggbmV3IHByb2ZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYXllcnMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBwcmV2LmZpbmQocCA9PiBwLnBsYXllcl9pZCA9PT0gcGxheWVySWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldi5tYXAocCA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wbGF5ZXJfaWQgPT09IHBsYXllcklkIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geyAuLi5wLCBwcm9maWxlOiBwcm9maWxlIGFzIFByb2ZpbGUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBwbGF5ZXIgZG9lc24ndCBleGlzdCBpbiBwbGF5ZXJzIGxpc3QsIGFkZCB0aGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5wcmV2LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWQ6IHBsYXllcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbV9pZDogcm9vbUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcmVhZHk6IG1lc3NhZ2UucGxheWVycy5maW5kKChwOiBhbnkpID0+IHAucGxheWVySWQgPT09IHBsYXllcklkKT8uaXNSZWFkeSB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRfYXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2luZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnJywgLy8gV2lsbCBiZSBzZXQgYnkgU3VwYWJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHByb2ZpbGUgYXMgUHJvZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGFzIFBsYXllcldpdGhQcm9maWxlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgRmFpbGVkIHRvIGZldGNoIHByb2ZpbGUgZm9yIHBsYXllciAke3BsYXllcklkfTpgLCBlcnIpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdGYWlsZWQgdG8gZmV0Y2ggcHJvZmlsZXMgZm9yIG5ldyBwbGF5ZXJzOicsIGVycilcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50UGxheWVycyAvLyBSZXR1cm4gY3VycmVudCBzdGF0ZSwgdXBkYXRlcyB3aWxsIGhhcHBlbiB2aWEgc2V0UGxheWVycyBpbiBQcm9taXNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdST1VORF9TVEFSVCcpIHtcbiAgICAgICAgICAgIGxvZygnW1dTXSBSZWNlaXZlZCBST1VORF9TVEFSVCcpXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yb29tSWQgJiYgbWVzc2FnZS5zdGFydGVkQXQpIHtcbiAgICAgICAgICAgICAgc2V0Um91bmRTdGFydCh7IHJvb21JZDogbWVzc2FnZS5yb29tSWQsIHN0YXJ0ZWRBdDogbWVzc2FnZS5zdGFydGVkQXQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ1JVTEVTJykge1xuICAgICAgICAgICAgbG9nKCdbV1NdIFJlY2VpdmVkIFJVTEVTJylcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zY29yZUxpbWl0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICBzZXRTY29yZUxpbWl0KG1lc3NhZ2Uuc2NvcmVMaW1pdClcbiAgICAgICAgICAgICAgc2V0U2NvcmVMaW1pdElucHV0KG1lc3NhZ2Uuc2NvcmVMaW1pdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ1NDT1JFX1VQREFURScpIHtcbiAgICAgICAgICAgIGxvZygnW1dTXSBSZWNlaXZlZCBTQ09SRV9VUERBVEUnKVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudG90YWxTY29yZXMgJiYgdHlwZW9mIG1lc3NhZ2UudG90YWxTY29yZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNjb3Jlczoge3BsYXllcklkOiBzdHJpbmcsIHRvdGFsU2NvcmU6IG51bWJlciwgZWxpbWluYXRlZDogYm9vbGVhbn1bXSA9IFtdXG4gICAgICAgICAgICAgIGNvbnN0IHNjb3Jlc01hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW3BsYXllcklkLCBzY29yZV0gb2YgT2JqZWN0LmVudHJpZXMobWVzc2FnZS50b3RhbFNjb3JlcykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY29yZVZhbHVlID0gdHlwZW9mIHNjb3JlID09PSAnbnVtYmVyJyA/IHNjb3JlIDogMFxuICAgICAgICAgICAgICAgIHNjb3Jlc01hcFtwbGF5ZXJJZF0gPSBzY29yZVZhbHVlXG4gICAgICAgICAgICAgICAgc2NvcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgcGxheWVySWQsXG4gICAgICAgICAgICAgICAgICB0b3RhbFNjb3JlOiBzY29yZVZhbHVlLFxuICAgICAgICAgICAgICAgICAgZWxpbWluYXRlZDogbWVzc2FnZS5lbGltaW5hdGVkICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZS5lbGltaW5hdGVkKSBcbiAgICAgICAgICAgICAgICAgICAgPyBtZXNzYWdlLmVsaW1pbmF0ZWQuaW5jbHVkZXMocGxheWVySWQpXG4gICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldFRvdGFsU2NvcmVzKHNjb3Jlc01hcClcbiAgICAgICAgICAgICAgc2V0U2NvcmVib2FyZChzY29yZXMpXG4gICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVsaW1pbmF0ZWQgJiYgQXJyYXkuaXNBcnJheShtZXNzYWdlLmVsaW1pbmF0ZWQpKSB7XG4gICAgICAgICAgICAgICAgc2V0RWxpbWluYXRlZChtZXNzYWdlLmVsaW1pbmF0ZWQpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ0RFQUxUJykge1xuICAgICAgICAgICAgbG9nKCdbV1NdIFJlY2VpdmVkIERFQUxUJylcbiAgICAgICAgICAgIC8vIEhpZGUgcm91bmQgZW5kIGJhbm5lciB3aGVuIG5ldyBoYW5kIGlzIGRlYWx0XG4gICAgICAgICAgICBzZXRSb3VuZEVuZChudWxsKVxuICAgICAgICAgICAgLy8gQ2xlYXIgYW55IHBlbmRpbmcgcGxheSBjYXJkcyAobmV3IGhhbmQgZGVhbHQpXG4gICAgICAgICAgICBzZXRQZW5kaW5nUGxheUNhcmRzKG51bGwpXG4gICAgICAgICAgICBwZW5kaW5nUGxheUNhcmRzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgICAgICBpZiAobWVzc2FnZS55b3VySGFuZCAmJiBBcnJheS5pc0FycmF5KG1lc3NhZ2UueW91ckhhbmQpKSB7XG4gICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBjYXJkcyB0byBoYW5kbGUgdmFyaW91cyBmb3JtYXRzIChudW1lcmljLCBzeW1ib2wsIG9yIGNhbm9uaWNhbClcbiAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEhhbmQgPSBtZXNzYWdlLnlvdXJIYW5kLm1hcCgoY2FyZDogYW55KSA9PiBub3JtYWxpemVDYXJkKGNhcmQpKVxuICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRIYW5kID0gc29ydENhcmRzKG5vcm1hbGl6ZWRIYW5kKVxuICAgICAgICAgICAgICBzZXRZb3VySGFuZChzb3J0ZWRIYW5kKVxuICAgICAgICAgICAgICBzZXRTZWxlY3RlZENhcmRzKFtdKSAvLyBSZXNldCBzZWxlY3Rpb24gd2hlbiBuZXcgaGFuZCBpcyBkZWFsdFxuICAgICAgICAgICAgICBzZXRIYW5kT3JkZXIoW10pIC8vIFJlc2V0IGN1c3RvbSBvcmRlciB3aGVuIG5ldyBoYW5kIGlzIGRlYWx0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydGVyUGxheWVySWQpIHtcbiAgICAgICAgICAgICAgc2V0U3RhcnRlclBsYXllcklkKG1lc3NhZ2Uuc3RhcnRlclBsYXllcklkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVhc29uKSB7XG4gICAgICAgICAgICAgIHNldFN0YXJ0ZXJSZWFzb24obWVzc2FnZS5yZWFzb24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZWF0ZWRQbGF5ZXJJZHMgJiYgQXJyYXkuaXNBcnJheShtZXNzYWdlLnNlYXRlZFBsYXllcklkcykpIHtcbiAgICAgICAgICAgICAgc2V0U2VhdGVkUGxheWVySWRzKG1lc3NhZ2Uuc2VhdGVkUGxheWVySWRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnR0FNRV9TVEFURScpIHtcbiAgICAgICAgICAgIGxvZygnW1dTXSBSZWNlaXZlZCBHQU1FX1NUQVRFJylcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmN1cnJlbnRUdXJuUGxheWVySWQpIHtcbiAgICAgICAgICAgICAgc2V0Q3VycmVudFR1cm5QbGF5ZXJJZChtZXNzYWdlLmN1cnJlbnRUdXJuUGxheWVySWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0UGxheSkge1xuICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkTGFzdFBsYXkgPSB7XG4gICAgICAgICAgICAgICAgcGxheWVySWQ6IG1lc3NhZ2UubGFzdFBsYXkucGxheWVySWQsXG4gICAgICAgICAgICAgICAgY2FyZHM6IEFycmF5LmlzQXJyYXkobWVzc2FnZS5sYXN0UGxheS5jYXJkcykgXG4gICAgICAgICAgICAgICAgICA/IG1lc3NhZ2UubGFzdFBsYXkuY2FyZHMubWFwKChjYXJkOiBhbnkpID0+IG5vcm1hbGl6ZUNhcmQoY2FyZCkpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgICAgIGtpbmQ6IG1lc3NhZ2UubGFzdFBsYXkua2luZCwgLy8gU0lOR0xFLCBQQUlSLCBTRVQsIEZJVkUsIGV0Yy5cbiAgICAgICAgICAgICAgICBmaXZlS2luZDogbWVzc2FnZS5sYXN0UGxheS5maXZlS2luZCAvLyBTVFJBSUdIVCwgRkxVU0gsIEZVTExfSE9VU0UsIEZPVVIsIFNUUkFJR0hUX0ZMVVNIXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2V0TGFzdFBsYXkobm9ybWFsaXplZExhc3RQbGF5KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBvdXIgcGxheSAoc3VjY2Vzc2Z1bCksIGNsZWFyIHBlbmRpbmcgY2FyZHNcbiAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRMYXN0UGxheS5wbGF5ZXJJZCA9PT0gY3VycmVudFVzZXJJZCAmJiBwZW5kaW5nUGxheUNhcmRzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBsb2coJ1tXU10gUGxheSBzdWNjZXNzZnVsLCBjbGVhcmluZyBwZW5kaW5nIGNhcmRzJylcbiAgICAgICAgICAgICAgICBzZXRQZW5kaW5nUGxheUNhcmRzKG51bGwpXG4gICAgICAgICAgICAgICAgcGVuZGluZ1BsYXlDYXJkc1JlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXRMYXN0UGxheShudWxsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2xlYXIgc2VsZWN0aW9uIG9uIEdBTUVfU1RBVEUgdXBkYXRlICh0dXJuIGNoYW5nZSlcbiAgICAgICAgICAgIHNldFNlbGVjdGVkQ2FyZHMoW10pXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5oYW5kc0NvdW50ICYmIHR5cGVvZiBtZXNzYWdlLmhhbmRzQ291bnQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIHNldEhhbmRzQ291bnQobWVzc2FnZS5oYW5kc0NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNhblBhc3MgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICBzZXRDYW5QYXNzKG1lc3NhZ2UuY2FuUGFzcykgLy8gTGVnYWN5LCBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IChub3QgdXNlZCBmb3IgYnV0dG9uIGxvZ2ljKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSGFuZGxlIHBhc3NlZFBsYXllcklkcyBpZiBwcm92aWRlZCBieSBzZXJ2ZXJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhc3NlZFBsYXllcklkcyAmJiBBcnJheS5pc0FycmF5KG1lc3NhZ2UucGFzc2VkUGxheWVySWRzKSkge1xuICAgICAgICAgICAgICBzZXRQYXNzZWRQbGF5ZXJJZHMobWVzc2FnZS5wYXNzZWRQbGF5ZXJJZHMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBSZXNldCBpZiBub3QgcHJvdmlkZWQgKHNlcnZlciBtYXkgb21pdCBpdCB3aGVuIG5vIG9uZSBoYXMgcGFzc2VkKVxuICAgICAgICAgICAgICBzZXRQYXNzZWRQbGF5ZXJJZHMoW10pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBIYW5kbGUgcXVldWVQbGF5ZXJJZHMgaWYgcHJvdmlkZWRcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXVlUGxheWVySWRzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZS5xdWV1ZVBsYXllcklkcykpIHtcbiAgICAgICAgICAgICAgc2V0UXVldWVQbGF5ZXJJZHMobWVzc2FnZS5xdWV1ZVBsYXllcklkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhhbmRsZSB0b3RhbFNjb3JlcyBhbmQgZWxpbWluYXRlZCBpZiBwcm92aWRlZFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudG90YWxTY29yZXMgJiYgdHlwZW9mIG1lc3NhZ2UudG90YWxTY29yZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNjb3Jlc01hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW3BsYXllcklkLCBzY29yZV0gb2YgT2JqZWN0LmVudHJpZXMobWVzc2FnZS50b3RhbFNjb3JlcykpIHtcbiAgICAgICAgICAgICAgICBzY29yZXNNYXBbcGxheWVySWRdID0gdHlwZW9mIHNjb3JlID09PSAnbnVtYmVyJyA/IHNjb3JlIDogMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldFRvdGFsU2NvcmVzKHNjb3Jlc01hcClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVsaW1pbmF0ZWQgJiYgQXJyYXkuaXNBcnJheShtZXNzYWdlLmVsaW1pbmF0ZWQpKSB7XG4gICAgICAgICAgICAgIHNldEVsaW1pbmF0ZWQobWVzc2FnZS5lbGltaW5hdGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnQUNUSU9OX0VSUk9SJykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBtZXNzYWdlLmVycm9yIHx8IG1lc3NhZ2UubWVzc2FnZSB8fCAnQWN0aW9uIGVycm9yJ1xuICAgICAgICAgICAgbG9nRXJyb3IoJ1tXU10gUmVjZWl2ZWQgQUNUSU9OX0VSUk9SOicsIGVycm9yTXNnKVxuICAgICAgICAgICAgc2V0QWN0aW9uRXJyb3IoZXJyb3JNc2cpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgY2FyZHMgaWYgd2UgaGFkIHBlbmRpbmcgcGxheSBjYXJkcyAoZXJyb3IgcmVjb3ZlcnkpXG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nQ2FyZHMgPSBwZW5kaW5nUGxheUNhcmRzUmVmLmN1cnJlbnRcbiAgICAgICAgICAgIGlmIChwZW5kaW5nQ2FyZHMgJiYgcGVuZGluZ0NhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbG9nKCdbV1NdIFJlc3RvcmluZyBjYXJkcyBhZnRlciBBQ1RJT05fRVJST1I6JywgcGVuZGluZ0NhcmRzKVxuICAgICAgICAgICAgICBzZXRZb3VySGFuZCgocHJldkhhbmQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXByZXZIYW5kKSByZXR1cm4gcHJldkhhbmRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgYmFjayB0aGUgcGVuZGluZyBjYXJkc1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3RvcmVkSGFuZCA9IFsuLi5wcmV2SGFuZCwgLi4ucGVuZGluZ0NhcmRzXVxuICAgICAgICAgICAgICAgIHJldHVybiBzb3J0Q2FyZHMocmVzdG9yZWRIYW5kKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVzZXQgaGFuZE9yZGVyIHNpbmNlIHdlJ3JlIHJlc3RvcmluZyBjYXJkc1xuICAgICAgICAgICAgICBzZXRIYW5kT3JkZXIoW10pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBDbGVhciBwZW5kaW5nIGNhcmRzXG4gICAgICAgICAgICAgIHNldFBlbmRpbmdQbGF5Q2FyZHMobnVsbClcbiAgICAgICAgICAgICAgcGVuZGluZ1BsYXlDYXJkc1JlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEbyBOT1QgY2xlYXIgc2VsZWN0aW9uIG9uIGVycm9yIC0gdXNlciBtYXkgd2FudCB0byBhZGp1c3RcbiAgICAgICAgICAgIC8vIENsZWFyIGVycm9yIGFmdGVyIDUgc2Vjb25kc1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRBY3Rpb25FcnJvcihudWxsKSwgNTAwMClcbiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ1JPVU5EX0VORCcpIHtcbiAgICAgICAgICAgIGxvZygnW1dTXSBSZWNlaXZlZCBST1VORF9FTkQnKVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uud2lubmVyUGxheWVySWQpIHtcbiAgICAgICAgICAgICAgc2V0Um91bmRFbmQoeyB3aW5uZXJQbGF5ZXJJZDogbWVzc2FnZS53aW5uZXJQbGF5ZXJJZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnV1NfRVJST1InIHx8IG1lc3NhZ2UudHlwZSA9PT0gJ1BBUlNFX0VSUk9SJykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBtZXNzYWdlLmVycm9yIHx8ICdXZWJTb2NrZXQgZXJyb3InXG4gICAgICAgICAgICBsb2dFcnJvcignW1dTXSBDbGllbnQgZXJyb3I6JywgZXJyb3JNc2cpXG4gICAgICAgICAgICBzZXRXc0Vycm9yKGVycm9yTXNnKVxuICAgICAgICAgICAgc2V0V3NTdGF0dXMoJ2Vycm9yJylcbiAgICAgICAgICAgIGNvbm5lY3RpbmdSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdXU19PUEVOX1RJTUVPVVQnKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IG1lc3NhZ2UuZXJyb3IgfHwgJ1dlYlNvY2tldCBvcGVuIHRpbWVvdXQnXG4gICAgICAgICAgICBsb2dFcnJvcignW1dTXSBPcGVuIHRpbWVvdXQ6JywgZXJyb3JNc2cpXG4gICAgICAgICAgICBzZXRXc0Vycm9yKGVycm9yTXNnKVxuICAgICAgICAgICAgc2V0V3NTdGF0dXMoJ2Vycm9yJylcbiAgICAgICAgICAgIGNvbm5lY3RpbmdSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoY29kZSwgcmVhc29uLCB3YXNDbGVhbikgPT4ge1xuICAgICAgICAgIC8vIE9uIGNsb3NlIC0gaGFuZGxlIHJlY29ubmVjdGlvbiBhdCBSb29tUGFnZSBsZXZlbFxuICAgICAgICAgIGxvZyhgW1dTXSBjbG9zZSBoYW5kbGVyOiBjb2RlPSR7Y29kZX0sIHJlYXNvbj0ke3JlYXNvbn0sIHdhc0NsZWFuPSR7d2FzQ2xlYW59YClcbiAgICAgICAgICBcbiAgICAgICAgICB3c1JlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICAgIGNvbm5lY3RpbmdSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gT25seSBhdHRlbXB0IHJlY29ubmVjdCBpZiBpdCB3YXNuJ3QgYSBtYW51YWwgY2xvc2UgYW5kIHJvb20gaXMgc3RpbGwgcGxheWluZ1xuICAgICAgICAgIGlmIChzaG91bGRSZWNvbm5lY3RSZWYuY3VycmVudCAmJiByb29tPy5zdGF0dXMgPT09ICdwbGF5aW5nJyAmJiAhd2FzQ2xlYW4pIHtcbiAgICAgICAgICAgIC8vIFN0YXJ0IHJlY29ubmVjdGlvbiB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgICAgICAgIGNvbnN0IHJlY29ubmVjdERlbGF5cyA9IFs1MDAsIDEwMDAsIDIwMDAsIDQwMDAsIDgwMDBdXG4gICAgICAgICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDEwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGF0dGVtcHRSZWNvbm5lY3QgPSBhc3luYyAoYXR0ZW1wdDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghc2hvdWxkUmVjb25uZWN0UmVmLmN1cnJlbnQgfHwgcm9vbT8uc3RhdHVzICE9PSAncGxheWluZycpIHtcbiAgICAgICAgICAgICAgICBzZXRXc1N0YXR1cygnZGlzY29ubmVjdGVkJylcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGF0dGVtcHQgPiBtYXhBdHRlbXB0cykge1xuICAgICAgICAgICAgICAgIHNldFdzU3RhdHVzKCdkaXNjb25uZWN0ZWQnKVxuICAgICAgICAgICAgICAgIHNldFdzRXJyb3IoJ0ZhaWxlZCB0byByZWNvbm5lY3QgYWZ0ZXIgMTAgYXR0ZW1wdHMnKVxuICAgICAgICAgICAgICAgIGxvZygnW1JlY29ubmVjdF0gTWF4IGF0dGVtcHRzIHJlYWNoZWQsIGdpdmluZyB1cCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGRlbGF5SW5kZXggPSBNYXRoLm1pbihhdHRlbXB0IC0gMSwgcmVjb25uZWN0RGVsYXlzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gcmVjb25uZWN0RGVsYXlzW2RlbGF5SW5kZXhdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZWNvbm5lY3RBdHRlbXB0UmVmLmN1cnJlbnQgPSBhdHRlbXB0XG4gICAgICAgICAgICAgIHNldFdzU3RhdHVzKCdyZWNvbm5lY3RpbmcnKVxuICAgICAgICAgICAgICBsb2coYFtSZWNvbm5lY3RdIEF0dGVtcHQgJHthdHRlbXB0fSBpbiAke2RlbGF5fW1zYClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc2hvdWxkUmVjb25uZWN0UmVmLmN1cnJlbnQgfHwgcm9vbT8uc3RhdHVzICE9PSAncGxheWluZycpIHtcbiAgICAgICAgICAgICAgICAgIHNldFdzU3RhdHVzKCdkaXNjb25uZWN0ZWQnKVxuICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGFscmVhZHkgY29ubmVjdGVkL2Nvbm5lY3RpbmcgYmVmb3JlIGF0dGVtcHRpbmdcbiAgICAgICAgICAgICAgICBpZiAod3NSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZHlTdGF0ZSA9IHdzUmVmLmN1cnJlbnQucmVhZHlTdGF0ZVxuICAgICAgICAgICAgICAgICAgaWYgKHJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOIHx8IHJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZygnW1JlY29ubmVjdF0gQWxyZWFkeSBjb25uZWN0ZWQvY29ubmVjdGluZywgc2tpcHBpbmcnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgY29ubmVjdElmUGxheWluZyhyb29tLnN0YXR1cywgcm9vbS5pZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBjb25uZWN0aW9uIHN0YXR1cyBhZnRlciBhIGRlbGF5IHRvIHNlZSBpZiB3ZSBuZWVkIHRvIHJldHJ5XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVjb25uZWN0UmVmLmN1cnJlbnQgJiYgcm9vbT8uc3RhdHVzID09PSAncGxheWluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgc3RpbGwgbm90IGNvbm5lY3RlZFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdzUmVmLmN1cnJlbnQgfHwgd3NSZWYuY3VycmVudC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgICAgICAgICAgICAgICAgIGF0dGVtcHRSZWNvbm5lY3QoYXR0ZW1wdCArIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBkZWxheSArIDEwMDApIC8vIENoZWNrIGFmdGVyIGRlbGF5ICsgMXNcbiAgICAgICAgICAgICAgfSwgZGVsYXkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF0dGVtcHRSZWNvbm5lY3QoMSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0V3NTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAobG9nRW50cnkpID0+IHtcbiAgICAgICAgICAvLyBFdmVudCBsb2cgY2FsbGJhY2sgKG9ubHkgc3RvcmUgaW4gZGV2IGZvciBkZWJ1ZyBVSSlcbiAgICAgICAgICBpZiAoaXNEZXYpIHtcbiAgICAgICAgICAgIHNldFdzRXZlbnRzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0V2ZW50cyA9IFtsb2dFbnRyeSwgLi4ucHJldl0uc2xpY2UoMCwgMjApXG4gICAgICAgICAgICAgIHJldHVybiBuZXdFdmVudHNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG5cbiAgICAgIHdzUmVmLmN1cnJlbnQgPSB3c1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgd3NSZWYgd2hlbiByZWNvbm5lY3RpbmcgKHRoZSByZWNvbm5lY3QgY3JlYXRlcyBhIG5ldyB3cylcbiAgICAgIGlmICgod3MgYXMgYW55KS5zZW5kU3luY1JlcXVlc3QpIHtcbiAgICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlIGZvciBTWU5DX1JFUVVFU1RcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gZ2FtZSBzZXJ2ZXInXG4gICAgICBsb2dFcnJvcignW0F1dG9Db25uZWN0XSBDb25uZWN0aW9uIGVycm9yOicsIGVycilcbiAgICAgIHNldFdzRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgc2V0V3NTdGF0dXMoJ2Vycm9yJylcbiAgICAgIHdzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBjb25uZWN0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH1cbiAgfSwgW10pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXJvb21JZCkge1xuICAgICAgbmF2aWdhdGUoJy9sb2JieScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHdWFyZDogRG9uJ3QgY3JlYXRlIGNoYW5uZWxzIGlmIHRoZXkgYWxyZWFkeSBleGlzdCBhbmQgYXJlIGFjdGl2ZVxuICAgIGlmIChyb29tQ2hhbm5lbFJlZi5jdXJyZW50ICYmIHBsYXllcnNDaGFubmVsUmVmLmN1cnJlbnQpIHtcbiAgICAgIGxvZygnW1Jvb21zUlRdIENoYW5uZWxzIGFscmVhZHkgZXhpc3QsIHNraXBwaW5nIGNyZWF0aW9uJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIG5hdmlnYXRlKCcvYXV0aCcpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc2V0Q3VycmVudFVzZXJJZCh1c2VyLmlkKVxuXG4gICAgICAgIC8vIEZldGNoIHJvb21cbiAgICAgICAgY29uc3QgeyBkYXRhOiByb29tRGF0YSwgZXJyb3I6IHJvb21FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgncm9vbXMnKVxuICAgICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAgIC5lcSgnaWQnLCByb29tSWQpXG4gICAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgICAgaWYgKHJvb21FcnJvciB8fCAhcm9vbURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jvb20gbm90IGZvdW5kJylcbiAgICAgICAgfVxuICAgICAgICBzZXRSb29tKHJvb21EYXRhIGFzIFJvb20pXG5cbiAgICAgICAgLy8gRmV0Y2ggcGxheWVyc1xuICAgICAgICBhd2FpdCBmZXRjaFBsYXllcnMocm9vbUlkKVxuXG4gICAgICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGNoYW5uZWxzIGlmIHRoZXkgZXhpc3QgKHByZXZlbnQgZHVwbGljYXRlcylcbiAgICAgICAgaWYgKHBsYXllcnNDaGFubmVsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBzdXBhYmFzZS5yZW1vdmVDaGFubmVsKHBsYXllcnNDaGFubmVsUmVmLmN1cnJlbnQpXG4gICAgICAgICAgcGxheWVyc0NoYW5uZWxSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBpZiAocm9vbUNoYW5uZWxSZWYuY3VycmVudCkge1xuICAgICAgICAgIHN1cGFiYXNlLnJlbW92ZUNoYW5uZWwocm9vbUNoYW5uZWxSZWYuY3VycmVudClcbiAgICAgICAgICByb29tQ2hhbm5lbFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3Vic2NyaWJlIHRvIHJvb21fcGxheWVycyBjaGFuZ2VzXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBzdXBhYmFzZVxuICAgICAgICAgIC5jaGFubmVsKGByb29tX3BsYXllcnM6JHtyb29tSWR9YClcbiAgICAgICAgICAub24oXG4gICAgICAgICAgICAncG9zdGdyZXNfY2hhbmdlcycsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnKicsXG4gICAgICAgICAgICAgIHNjaGVtYTogJ3B1YmxpYycsXG4gICAgICAgICAgICAgIHRhYmxlOiAncm9vbV9wbGF5ZXJzJyxcbiAgICAgICAgICAgICAgZmlsdGVyOiBgcm9vbV9pZD1lcS4ke3Jvb21JZH1gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgZmV0Y2hQbGF5ZXJzKHJvb21JZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgLnN1YnNjcmliZSgpXG4gICAgICAgIHBsYXllcnNDaGFubmVsUmVmLmN1cnJlbnQgPSBjaGFubmVsXG5cbiAgICAgICAgLy8gU3Vic2NyaWJlIHRvIHJvb20gc3RhdHVzIGNoYW5nZXNcbiAgICAgICAgY29uc3QgY2hhbm5lbE5hbWUgPSBgcm9vbToke3Jvb21JZH1gXG4gICAgICAgIGNvbnN0IGZpbHRlclN0cmluZyA9IGBpZD1lcS4ke3Jvb21JZH1gXG4gICAgICAgIGxvZygnW1Jvb21zUlRdIENyZWF0aW5nIGNoYW5uZWw6JywgY2hhbm5lbE5hbWUpXG4gICAgICAgIGxvZygnW1Jvb21zUlRdIEZpbHRlcjonLCBmaWx0ZXJTdHJpbmcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCByb29tQ2hhbm5lbCA9IHN1cGFiYXNlXG4gICAgICAgICAgLmNoYW5uZWwoY2hhbm5lbE5hbWUpXG4gICAgICAgICAgLm9uKFxuICAgICAgICAgICAgJ3Bvc3RncmVzX2NoYW5nZXMnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBldmVudDogJ1VQREFURScsXG4gICAgICAgICAgICAgIHNjaGVtYTogJ3B1YmxpYycsXG4gICAgICAgICAgICAgIHRhYmxlOiAncm9vbXMnLFxuICAgICAgICAgICAgICBmaWx0ZXI6IGZpbHRlclN0cmluZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgICBsb2coJ1tSb29tc1JUXSBwYXlsb2FkIHJlY2VpdmVkJylcbiAgICAgICAgICAgICAgaWYgKHBheWxvYWQubmV3KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFJvb20gPSBwYXlsb2FkLm5ldyBhcyBSb29tXG4gICAgICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgcm9vbSBhY3R1YWxseSBjaGFuZ2VkIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcmUtcmVuZGVyc1xuICAgICAgICAgICAgICAgIHNldFJvb20ocHJldlJvb20gPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHByZXZSb29tICYmIHByZXZSb29tLmlkID09PSB1cGRhdGVkUm9vbS5pZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICBwcmV2Um9vbS5zdGF0dXMgPT09IHVwZGF0ZWRSb29tLnN0YXR1cyAmJlxuICAgICAgICAgICAgICAgICAgICAgIHByZXZSb29tLnNjb3JlX2xpbWl0ID09PSB1cGRhdGVkUm9vbS5zY29yZV9saW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSb29tIGhhc24ndCBtZWFuaW5nZnVsbHkgY2hhbmdlZCwgcmV0dXJuIHByZXZpb3VzIHRvIHByZXZlbnQgcmUtcmVuZGVyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2Um9vbVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRSb29tXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBdXRvLWNvbm5lY3Qgd2hlbiBzdGF0dXMgYmVjb21lcyBcInBsYXlpbmdcIiAoZm9yIEFMTCB1c2VycylcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFJvb20uc3RhdHVzID09PSAncGxheWluZycpIHtcbiAgICAgICAgICAgICAgICAgIGxvZygnW0F1dG9Db25uZWN0XSBSZWFsdGltZTogcm9vbSBzdGF0dXMgdXBkYXRlZCB0byBwbGF5aW5nJylcbiAgICAgICAgICAgICAgICAgIGNvbm5lY3RJZlBsYXlpbmcodXBkYXRlZFJvb20uc3RhdHVzLCByb29tSWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICAgIC5zdWJzY3JpYmUoKHN0YXR1cykgPT4ge1xuICAgICAgICAgICAgbG9nKCdbUm9vbXNSVF0gU3Vic2NyaWJlIHN0YXR1czonLCBzdGF0dXMpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnU1VCU0NSSUJFRCcpIHtcbiAgICAgICAgICAgICAgbG9nKCdbUm9vbXNSVF0gU3VjY2Vzc2Z1bGx5IHN1YnNjcmliZWQgdG8gcm9vbSB1cGRhdGVzJylcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnVElNRURfT1VUJykge1xuICAgICAgICAgICAgICB3YXJuKCdbUm9vbXNSVF0gU3Vic2NyaXB0aW9uIHRpbWVkIG91dCcpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ0NIQU5ORUxfRVJST1InKSB7XG4gICAgICAgICAgICAgIGxvZ0Vycm9yKCdbUm9vbXNSVF0gQ2hhbm5lbCBlcnJvciBvY2N1cnJlZCcpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ0NMT1NFRCcpIHtcbiAgICAgICAgICAgICAgbG9nKCdbUm9vbXNSVF0gQ2hhbm5lbCBjbG9zZWQnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIHJvb21DaGFubmVsUmVmLmN1cnJlbnQgPSByb29tQ2hhbm5lbFxuXG4gICAgICAgIC8vIEEpIEFmdGVyIGluaXRpYWwgcm9vbSBmZXRjaDogYXV0by1jb25uZWN0IGlmIGFscmVhZHkgXCJwbGF5aW5nXCJcbiAgICAgICAgbG9nKCdbQXV0b0Nvbm5lY3RdIEluaXRpYWwgZmV0Y2g6IHJvb20uc3RhdHVzID0nLCByb29tRGF0YS5zdGF0dXMpXG4gICAgICAgIGNvbm5lY3RJZlBsYXlpbmcocm9vbURhdGEuc3RhdHVzLCByb29tSWQpXG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBpZiAocGxheWVyc0NoYW5uZWxSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChwbGF5ZXJzQ2hhbm5lbFJlZi5jdXJyZW50KVxuICAgICAgICAgICAgcGxheWVyc0NoYW5uZWxSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvb21DaGFubmVsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHN1cGFiYXNlLnJlbW92ZUNoYW5uZWwocm9vbUNoYW5uZWxSZWYuY3VycmVudClcbiAgICAgICAgICAgIHJvb21DaGFubmVsUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIENsb3NlIFdlYlNvY2tldCBvbiB1bm1vdW50XG4gICAgICAgICAgaWYgKHdzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHdzUmVmLmN1cnJlbnQuY2xvc2UoKVxuICAgICAgICAgICAgd3NSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgY29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gbG9hZCByb29tJylcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaERhdGEoKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3Jvb21JZF0pIC8vIE9ubHkgZGVwZW5kIG9uIHJvb21JZCAtIG5hdmlnYXRlIGlzIHN0YWJsZSwgYnV0IHdlIHJlbW92ZWQgaXQgdG8gYmUgc2FmZVxuXG4gIC8vIEluaXRpYWxpemUgc2NvcmVMaW1pdCBmcm9tIHJvb20gZGF0YVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyb29tPy5zY29yZV9saW1pdCkge1xuICAgICAgc2V0U2NvcmVMaW1pdChyb29tLnNjb3JlX2xpbWl0KVxuICAgICAgc2V0U2NvcmVMaW1pdElucHV0KHJvb20uc2NvcmVfbGltaXQpXG4gICAgfVxuICB9LCBbcm9vbT8uc2NvcmVfbGltaXRdKVxuXG4gIC8vIEZhbGxiYWNrIHBvbGxpbmc6IGNoZWNrIHJvb20gc3RhdHVzIGV2ZXJ5IDFzIGlmIG5vdCBjb25uZWN0ZWQgYW5kIHJvb20gbm90IHBsYXlpbmdcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXJvb21JZCB8fCAhcm9vbSkgcmV0dXJuXG5cbiAgICAvLyBPbmx5IHBvbGwgaWY6XG4gICAgLy8gLSBXUyBpcyBub3QgY29ubmVjdGVkL2Nvbm5lY3RpbmdcbiAgICAvLyAtIGxvY2FsIHJvb20uc3RhdHVzIGlzIG5vdCBcInBsYXlpbmdcIiB5ZXRcbiAgICBjb25zdCBzaG91bGRQb2xsID0gXG4gICAgICB3c1N0YXR1cyAhPT0gJ2Nvbm5lY3RlZCcgJiYgXG4gICAgICB3c1N0YXR1cyAhPT0gJ2Nvbm5lY3RpbmcnICYmIFxuICAgICAgcm9vbS5zdGF0dXMgIT09ICdwbGF5aW5nJ1xuXG4gICAgaWYgKCFzaG91bGRQb2xsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsb2coJ1tQb2xsaW5nXSBTdGFydGluZyBmYWxsYmFjayBwb2xsaW5nIGZvciByb29tIHN0YXR1cycpXG4gICAgXG4gICAgY29uc3QgcG9sbEludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiByb29tRGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ3Jvb21zJylcbiAgICAgICAgICAuc2VsZWN0KCdzdGF0dXMnKVxuICAgICAgICAgIC5lcSgnaWQnLCByb29tSWQpXG4gICAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgbG9nRXJyb3IoJ1tQb2xsaW5nXSBFcnJvciBmZXRjaGluZyByb29tIHN0YXR1czonLCBlcnJvcilcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyb29tRGF0YT8uc3RhdHVzID09PSAncGxheWluZycpIHtcbiAgICAgICAgICBsb2coJ1tQb2xsaW5nXSBSb29tIHN0YXR1cyBjaGFuZ2VkIHRvIHBsYXlpbmcsIGNvbm5lY3RpbmcgV1MnKVxuICAgICAgICAgIGNvbm5lY3RJZlBsYXlpbmcoJ3BsYXlpbmcnLCByb29tSWQpXG4gICAgICAgICAgLy8gU3RvcCBwb2xsaW5nIG9uY2UgY29ubmVjdGVkXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChwb2xsSW50ZXJ2YWwpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2dFcnJvcignW1BvbGxpbmddIFBvbGxpbmcgZXJyb3I6JywgZXJyKVxuICAgICAgfVxuICAgIH0sIDEwMDApXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbG9nKCdbUG9sbGluZ10gU3RvcHBpbmcgZmFsbGJhY2sgcG9sbGluZycpXG4gICAgICBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbClcbiAgICB9XG4gIH0sIFtyb29tSWQsIHJvb20/LnN0YXR1cywgd3NTdGF0dXMsIGNvbm5lY3RJZlBsYXlpbmddKVxuXG4gIGNvbnN0IGZldGNoUGxheWVycyA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRyeSBxdWVyeWluZyB3aXRoIC5pcygpIGZpbHRlciBmaXJzdFxuICAgICAgbGV0IHsgZGF0YTogcGxheWVyc0RhdGEsIGVycm9yOiBwbGF5ZXJzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdyb29tX3BsYXllcnMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdyb29tX2lkJywgaWQpXG4gICAgICAgIC5pcygnbGVmdF9hdCcsIG51bGwpIC8vIE9ubHkgc2hvdyBwbGF5ZXJzIHdobyBoYXZlbid0IGxlZnRcblxuICAgICAgLy8gSWYgdGhhdCBmYWlscyAoNTAwIGVycm9yIG9yIGFueSBlcnJvciksIHRyeSBmZXRjaGluZyBhbGwgYW5kIGZpbHRlcmluZyBjbGllbnQtc2lkZVxuICAgICAgaWYgKHBsYXllcnNFcnJvcikge1xuICAgICAgICB3YXJuKCdRdWVyeSB3aXRoIC5pcygpIGZhaWxlZCwgdHJ5aW5nIGFsdGVybmF0aXZlIGFwcHJvYWNoOicsIHBsYXllcnNFcnJvcilcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhbGxQbGF5ZXJzLCBlcnJvcjogYWxsRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ3Jvb21fcGxheWVycycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdyb29tX2lkJywgaWQpXG5cbiAgICAgICAgaWYgKGFsbEVycm9yKSB7XG4gICAgICAgICAgbG9nRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBwbGF5ZXJzOicsIGFsbEVycm9yKVxuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gKGFsbEVycm9yIGFzIGFueSk/Lm1lc3NhZ2UgfHwgU3RyaW5nKGFsbEVycm9yKVxuICAgICAgICAgIHNldEVycm9yKGBGYWlsZWQgdG8gbG9hZCBwbGF5ZXJzOiAke2Vycm9yTXNnfWApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaWx0ZXIgY2xpZW50LXNpZGUgZm9yIHBsYXllcnMgd2hvIGhhdmVuJ3QgbGVmdFxuICAgICAgICBwbGF5ZXJzRGF0YSA9IGFsbFBsYXllcnM/LmZpbHRlcihwID0+IHAubGVmdF9hdCA9PT0gbnVsbCkgfHwgbnVsbFxuICAgICAgfVxuXG4gICAgICBpZiAoIXBsYXllcnNEYXRhIHx8IHBsYXllcnNEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXRQbGF5ZXJzKFtdKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gRmV0Y2ggcHJvZmlsZXMgZm9yIGVhY2ggcGxheWVyXG4gICAgICBjb25zdCBwbGF5ZXJzV2l0aFByb2ZpbGVzOiBQbGF5ZXJXaXRoUHJvZmlsZVtdID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHBsYXllcnNEYXRhLm1hcChhc3luYyAocGxheWVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvcjogcHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkLCBkaXNwbGF5X25hbWUsIGF2YXRhcl91cmwnKVxuICAgICAgICAgICAgLmVxKCdpZCcsIHBsYXllci5wbGF5ZXJfaWQpXG4gICAgICAgICAgICAuc2luZ2xlKClcblxuICAgICAgICAgIC8vIExvZyBwcm9maWxlIGVycm9ycyBidXQgZG9uJ3QgZmFpbCB0aGUgd2hvbGUgb3BlcmF0aW9uXG4gICAgICAgICAgaWYgKHByb2ZpbGVFcnJvcikge1xuICAgICAgICAgICAgd2FybihgRmFpbGVkIHRvIGZldGNoIHByb2ZpbGUgZm9yIHBsYXllciAke3BsYXllci5wbGF5ZXJfaWR9OmAsIHByb2ZpbGVFcnJvcilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucGxheWVyLFxuICAgICAgICAgICAgcHJvZmlsZTogcHJvZmlsZSBhcyBQcm9maWxlIHwgbnVsbCxcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG5cbiAgICAgIHNldFBsYXllcnMocGxheWVyc1dpdGhQcm9maWxlcylcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZ0Vycm9yKCdFcnJvciBpbiBmZXRjaFBsYXllcnM6JywgZXJyKVxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggcGxheWVycydcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSlcbiAgICB9XG4gIH1cblxuICAvLyBTZW5kIFJFQURZIG1lc3NhZ2UgdmlhIFdlYlNvY2tldFxuICBjb25zdCBzZW5kUmVhZHlNZXNzYWdlID0gdXNlQ2FsbGJhY2soKGlzUmVhZHk6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoIXJvb21JZCB8fCAhd3NSZWYuY3VycmVudCB8fCB3c1JlZi5jdXJyZW50LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB3YXJuKCdbUkVBRFldIENhbm5vdCBzZW5kIFJFQURZOiBXUyBub3QgY29ubmVjdGVkJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWFkeU1lc3NhZ2UgPSB7XG4gICAgICAgIHR5cGU6ICdSRUFEWScsXG4gICAgICAgIHJvb21JZCxcbiAgICAgICAgaXNSZWFkeSxcbiAgICAgIH1cbiAgICAgIGxvZygnW1JFQURZXSBTZW5kaW5nIFJFQURZIG1lc3NhZ2UnKVxuICAgICAgd3NSZWYuY3VycmVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHJlYWR5TWVzc2FnZSkpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nRXJyb3IoJ1tSRUFEWV0gRmFpbGVkIHRvIHNlbmQgUkVBRFkgbWVzc2FnZTonLCBlcnIpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0sIFtyb29tSWRdKVxuXG4gIC8vIFNlbmQgUExBWSBtZXNzYWdlIHZpYSBXZWJTb2NrZXRcbiAgY29uc3Qgc2VuZFBsYXlNZXNzYWdlID0gdXNlQ2FsbGJhY2soKGNhcmRzOiBDYXJkW10pID0+IHtcbiAgICBpZiAoIXJvb21JZCB8fCAhd3NSZWYuY3VycmVudCB8fCB3c1JlZi5jdXJyZW50LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB3YXJuKCdbUExBWV0gQ2Fubm90IHNlbmQgUExBWTogV1Mgbm90IGNvbm5lY3RlZCcpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGxheU1lc3NhZ2UgPSB7XG4gICAgICAgIHR5cGU6ICdQTEFZJyxcbiAgICAgICAgcm9vbUlkLFxuICAgICAgICBjYXJkcyxcbiAgICAgIH1cbiAgICAgIGxvZygnW1BMQVldIFNlbmRpbmcgUExBWSBtZXNzYWdlJylcbiAgICAgIHdzUmVmLmN1cnJlbnQuc2VuZChKU09OLnN0cmluZ2lmeShwbGF5TWVzc2FnZSkpXG4gICAgICBzZXRBY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBhbnkgcHJldmlvdXMgZXJyb3JzXG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGNhcmRzIHdlJ3JlIHRyeWluZyB0byBwbGF5IChmb3IgZXJyb3IgcmVjb3ZlcnkpXG4gICAgICBzZXRQZW5kaW5nUGxheUNhcmRzKGNhcmRzKVxuICAgICAgcGVuZGluZ1BsYXlDYXJkc1JlZi5jdXJyZW50ID0gY2FyZHNcbiAgICAgIFxuICAgICAgLy8gT3B0aW1pc3RpY2FsbHkgcmVtb3ZlIHBsYXllZCBjYXJkcyBmcm9tIHlvdXJIYW5kIGluIHJlYWwtdGltZVxuICAgICAgLy8gSWYgc2VydmVyIHJldHVybnMgZXJyb3IsIHdlJ2xsIHJlc3RvcmUgdGhlbVxuICAgICAgc2V0WW91ckhhbmQoKHByZXZIYW5kKSA9PiB7XG4gICAgICAgIGlmICghcHJldkhhbmQpIHJldHVybiBwcmV2SGFuZFxuICAgICAgICBcbiAgICAgICAgLy8gRmlsdGVyIG91dCB0aGUgcGxheWVkIGNhcmRzXG4gICAgICAgIGxldCBuZXdIYW5kID0gcHJldkhhbmQuZmlsdGVyKChoYW5kQ2FyZCkgPT4ge1xuICAgICAgICAgIHJldHVybiAhY2FyZHMuc29tZShcbiAgICAgICAgICAgIChwbGF5ZWRDYXJkKSA9PiBjYXJkc0VxdWFsKHBsYXllZENhcmQsIGhhbmRDYXJkKVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFJlLXNvcnQgdGhlIHJlbWFpbmluZyBjYXJkcyB0byBtYWludGFpbiBwcm9wZXIgb3JkZXJcbiAgICAgICAgbmV3SGFuZCA9IHNvcnRDYXJkcyhuZXdIYW5kKVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGhhbmRPcmRlciB0byByZW1vdmUgaW5kaWNlcyBvZiBwbGF5ZWQgY2FyZHNcbiAgICAgICAgc2V0SGFuZE9yZGVyKChwcmV2T3JkZXIpID0+IHtcbiAgICAgICAgICBpZiAocHJldk9yZGVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmluZCBpbmRpY2VzIG9mIHBsYXllZCBjYXJkcyBpbiBvcmlnaW5hbCBoYW5kXG4gICAgICAgICAgY29uc3QgcGxheWVkSW5kaWNlcyA9IG5ldyBTZXQoXG4gICAgICAgICAgICBjYXJkcy5tYXAoKHBsYXllZENhcmQpID0+XG4gICAgICAgICAgICAgIHByZXZIYW5kLmZpbmRJbmRleCgoaGFuZENhcmQpID0+IGNhcmRzRXF1YWwoaGFuZENhcmQsIHBsYXllZENhcmQpKVxuICAgICAgICAgICAgKS5maWx0ZXIoKGlkeCkgPT4gaWR4ICE9PSAtMSlcbiAgICAgICAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVtb3ZlIHBsYXllZCBpbmRpY2VzIGFuZCBhZGp1c3QgcmVtYWluaW5nIGluZGljZXNcbiAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IHByZXZPcmRlclxuICAgICAgICAgICAgLmZpbHRlcigoaWR4KSA9PiAhcGxheWVkSW5kaWNlcy5oYXMoaWR4KSlcbiAgICAgICAgICAgIC5tYXAoKGlkeCkgPT4ge1xuICAgICAgICAgICAgICAvLyBBZGp1c3QgaW5kZXg6IGNvdW50IGhvdyBtYW55IHBsYXllZCBjYXJkcyB3ZXJlIGJlZm9yZSB0aGlzIGluZGV4XG4gICAgICAgICAgICAgIGNvbnN0IGFkanVzdG1lbnQgPSBBcnJheS5mcm9tKHBsYXllZEluZGljZXMpLmZpbHRlcigocGxheWVkSWR4KSA9PiBwbGF5ZWRJZHggPCBpZHgpLmxlbmd0aFxuICAgICAgICAgICAgICByZXR1cm4gaWR4IC0gYWRqdXN0bWVudFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3T3JkZXJcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXdIYW5kXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzZWxlY3Rpb24gYWZ0ZXIgc2VuZGluZyAob3B0aW1pc3RpYylcbiAgICAgIHNldFNlbGVjdGVkQ2FyZHMoW10pXG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2dFcnJvcignW1BMQVldIEZhaWxlZCB0byBzZW5kIFBMQVkgbWVzc2FnZTonLCBlcnIpXG4gICAgICBzZXRBY3Rpb25FcnJvcignRmFpbGVkIHRvIHNlbmQgcGxheSBtZXNzYWdlJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSwgW3Jvb21JZF0pXG5cbiAgLy8gU2VuZCBTRVRfUlVMRVMgbWVzc2FnZSB2aWEgV2ViU29ja2V0XG4gIGNvbnN0IHNlbmRTZXRSdWxlc01lc3NhZ2UgPSB1c2VDYWxsYmFjaygobmV3U2NvcmVMaW1pdDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKCFyb29tSWQgfHwgIXdzUmVmLmN1cnJlbnQgfHwgd3NSZWYuY3VycmVudC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgd2FybignW1NFVF9SVUxFU10gQ2Fubm90IHNlbmQgU0VUX1JVTEVTOiBXUyBub3QgY29ubmVjdGVkJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBydWxlc01lc3NhZ2UgPSB7XG4gICAgICAgIHR5cGU6ICdTRVRfUlVMRVMnLFxuICAgICAgICByb29tSWQsXG4gICAgICAgIHNjb3JlTGltaXQ6IG5ld1Njb3JlTGltaXQsXG4gICAgICB9XG4gICAgICBsb2coJ1tTRVRfUlVMRVNdIFNlbmRpbmcgU0VUX1JVTEVTIG1lc3NhZ2UnKVxuICAgICAgd3NSZWYuY3VycmVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHJ1bGVzTWVzc2FnZSkpXG4gICAgICBzZXRBY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBhbnkgcHJldmlvdXMgZXJyb3JzXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nRXJyb3IoJ1tTRVRfUlVMRVNdIEZhaWxlZCB0byBzZW5kIFNFVF9SVUxFUyBtZXNzYWdlOicsIGVycilcbiAgICAgIHNldEFjdGlvbkVycm9yKCdGYWlsZWQgdG8gc2V0IHJ1bGVzJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSwgW3Jvb21JZF0pXG5cbiAgLy8gU2VuZCBQQVNTIG1lc3NhZ2UgdmlhIFdlYlNvY2tldFxuICBjb25zdCBzZW5kUGFzc01lc3NhZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFyb29tSWQgfHwgIXdzUmVmLmN1cnJlbnQgfHwgd3NSZWYuY3VycmVudC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgd2FybignW1BBU1NdIENhbm5vdCBzZW5kIFBBU1M6IFdTIG5vdCBjb25uZWN0ZWQnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhc3NNZXNzYWdlID0ge1xuICAgICAgICB0eXBlOiAnUEFTUycsXG4gICAgICAgIHJvb21JZCxcbiAgICAgIH1cbiAgICAgIGxvZygnW1BBU1NdIFNlbmRpbmcgUEFTUyBtZXNzYWdlJylcbiAgICAgIHdzUmVmLmN1cnJlbnQuc2VuZChKU09OLnN0cmluZ2lmeShwYXNzTWVzc2FnZSkpXG4gICAgICBzZXRBY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBhbnkgcHJldmlvdXMgZXJyb3JzXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nRXJyb3IoJ1tQQVNTXSBGYWlsZWQgdG8gc2VuZCBQQVNTIG1lc3NhZ2U6JywgZXJyKVxuICAgICAgc2V0QWN0aW9uRXJyb3IoJ0ZhaWxlZCB0byBzZW5kIHBhc3MgbWVzc2FnZScpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0sIFtyb29tSWRdKVxuXG4gIGNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChjYXJkOiBDYXJkKSA9PiB7XG4gICAgLy8gVG9nZ2xlIHNlbGVjdGlvbiAobWF4IDUgY2FyZHMpXG4gICAgc2V0U2VsZWN0ZWRDYXJkcygocHJldikgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgY2FyZCBpcyBhbHJlYWR5IHNlbGVjdGVkXG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gcHJldi5zb21lKFxuICAgICAgICAoYykgPT4gYy5yYW5rID09PSBjYXJkLnJhbmsgJiYgYy5zdWl0ID09PSBjYXJkLnN1aXRcbiAgICAgIClcbiAgICAgIFxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gc2VsZWN0aW9uXG4gICAgICAgIHJldHVybiBwcmV2LmZpbHRlcihcbiAgICAgICAgICAoYykgPT4gIShjLnJhbmsgPT09IGNhcmQucmFuayAmJiBjLnN1aXQgPT09IGNhcmQuc3VpdClcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkIHRvIHNlbGVjdGlvbiBpZiB1bmRlciBsaW1pdFxuICAgICAgICBpZiAocHJldi5sZW5ndGggPj0gNSkge1xuICAgICAgICAgIHJldHVybiBwcmV2IC8vIE1heCA1IGNhcmRzXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2LCBjYXJkXVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdCBoYW5kbGVQbGF5ID0gKCkgPT4ge1xuICAgIC8vIEFsbG93IDEsIDIsIDMsIG9yIDUgY2FyZHMgKG5vdCA0KVxuICAgIGNvbnN0IHZhbGlkTGVuZ3RocyA9IFsxLCAyLCAzLCA1XVxuICAgIGlmICghdmFsaWRMZW5ndGhzLmluY2x1ZGVzKHNlbGVjdGVkQ2FyZHMubGVuZ3RoKSkgcmV0dXJuXG4gICAgXG4gICAgc2VuZFBsYXlNZXNzYWdlKHNlbGVjdGVkQ2FyZHMpXG4gICAgLy8gU2VsZWN0aW9uIGNsZWFyZWQgaW4gc2VuZFBsYXlNZXNzYWdlIGFmdGVyIHN1Y2Nlc3NmdWwgc2VuZFxuICB9XG5cbiAgY29uc3QgaGFuZGxlUGFzcyA9ICgpID0+IHtcbiAgICBzZW5kUGFzc01lc3NhZ2UoKVxuICB9XG5cbiAgY29uc3QgaXNNeVR1cm4gPSBjdXJyZW50VHVyblBsYXllcklkID09PSBjdXJyZW50VXNlcklkXG5cbiAgY29uc3QgaGFuZGxlVG9nZ2xlUmVhZHkgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFyb29tSWQgfHwgIWN1cnJlbnRVc2VySWQgfHwgdXBkYXRpbmdSZWFkeSkgcmV0dXJuXG5cbiAgICAvLyBJZiBXUyBpcyBjb25uZWN0ZWQsIHVzZSBXUyBSRUFEWSBtZXNzYWdlc1xuICAgIGlmICh3c1N0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgJiYgd3NSZWYuY3VycmVudD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHJlYWR5IHN0YXRlIGZyb20gUk9PTV9TVEFURSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmcm9tIFN1cGFiYXNlXG4gICAgICBjb25zdCByb29tU3RhdGVQbGF5ZXIgPSByb29tU3RhdGVQbGF5ZXJzLmZpbmQoKHApID0+IHAucGxheWVySWQgPT09IGN1cnJlbnRVc2VySWQpXG4gICAgICBjb25zdCBzdXBhYmFzZVBsYXllciA9IHBsYXllcnMuZmluZCgocCkgPT4gcC5wbGF5ZXJfaWQgPT09IGN1cnJlbnRVc2VySWQpXG4gICAgICBjb25zdCBjdXJyZW50UmVhZHlTdGF0ZSA9IHJvb21TdGF0ZVBsYXllciBcbiAgICAgICAgPyByb29tU3RhdGVQbGF5ZXIuaXNSZWFkeSBcbiAgICAgICAgOiBzdXBhYmFzZVBsYXllcj8uaXNfcmVhZHkgPz8gZmFsc2VcbiAgICAgIFxuICAgICAgY29uc3QgbmV3UmVhZHlTdGF0ZSA9ICFjdXJyZW50UmVhZHlTdGF0ZVxuICAgICAgXG4gICAgICBzZXRVcGRhdGluZ1JlYWR5KHRydWUpXG4gICAgICBjb25zdCBzZW50ID0gc2VuZFJlYWR5TWVzc2FnZShuZXdSZWFkeVN0YXRlKVxuICAgICAgaWYgKCFzZW50KSB7XG4gICAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gc2VuZCByZWFkeSBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4uJylcbiAgICAgIH1cbiAgICAgIHNldFVwZGF0aW5nUmVhZHkoZmFsc2UpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayB0byBTdXBhYmFzZSBpZiBXUyBub3QgY29ubmVjdGVkXG4gICAgc2V0VXBkYXRpbmdSZWFkeSh0cnVlKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50UGxheWVyID0gcGxheWVycy5maW5kKChwKSA9PiBwLnBsYXllcl9pZCA9PT0gY3VycmVudFVzZXJJZClcbiAgICAgIGlmICghY3VycmVudFBsYXllcikgcmV0dXJuXG5cbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdyb29tX3BsYXllcnMnKVxuICAgICAgICAudXBkYXRlKHsgaXNfcmVhZHk6ICFjdXJyZW50UGxheWVyLmlzX3JlYWR5IH0pXG4gICAgICAgIC5lcSgncm9vbV9pZCcsIHJvb21JZClcbiAgICAgICAgLmVxKCdwbGF5ZXJfaWQnLCBjdXJyZW50VXNlcklkKVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UpXG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFVwZGF0aW5nUmVhZHkoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlTGVhdmUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFyb29tSWQgfHwgIWN1cnJlbnRVc2VySWQgfHwgbGVhdmluZykgcmV0dXJuXG5cbiAgICBzZXRMZWF2aW5nKHRydWUpXG4gICAgdHJ5IHtcbiAgICAgIC8vIFN0b3AgcmVjb25uZWN0aW9uIGF0dGVtcHRzXG4gICAgICBzaG91bGRSZWNvbm5lY3RSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICBcbiAgICAgIC8vIE1hcmsgYXMgbWFudWFsIGNsb3NlIGFuZCBjbG9zZSBXZWJTb2NrZXQgY29ubmVjdGlvblxuICAgICAgaWYgKHdzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgbWFya01hbnVhbENsb3NlID0gKHdzUmVmLmN1cnJlbnQgYXMgYW55KS5tYXJrTWFudWFsQ2xvc2VcbiAgICAgICAgaWYgKG1hcmtNYW51YWxDbG9zZSkge1xuICAgICAgICAgIG1hcmtNYW51YWxDbG9zZSgpXG4gICAgICAgIH1cbiAgICAgICAgd3NSZWYuY3VycmVudC5jbG9zZSgpXG4gICAgICAgIHdzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICB9XG4gICAgICBjb25uZWN0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgc2V0V3NTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcpXG5cbiAgICAgIC8vIFVwZGF0ZSBsZWZ0X2F0XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncm9vbV9wbGF5ZXJzJylcbiAgICAgICAgLnVwZGF0ZSh7IGxlZnRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxuICAgICAgICAuZXEoJ3Jvb21faWQnLCByb29tSWQpXG4gICAgICAgIC5lcSgncGxheWVyX2lkJywgY3VycmVudFVzZXJJZClcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICBuYXZpZ2F0ZSgnL2xvYmJ5JylcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSlcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TGVhdmluZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVTdGFydCA9IGFzeW5jIChlPzogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4pID0+IHtcbiAgICBlPy5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbG9nKFwiW1N0YXJ0XSBjbGlja2VkXCIpXG4gICAgXG4gICAgaWYgKGlzU3RhcnRpbmcpIHtcbiAgICAgIGxvZyhcIltTdGFydF0gQWxyZWFkeSBzdGFydGluZywgaWdub3JpbmcgZHVwbGljYXRlIGNsaWNrXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXJvb21JZCB8fCAhY3VycmVudFVzZXJJZCkge1xuICAgICAgbG9nKFwiW1N0YXJ0XSBNaXNzaW5nIHJvb21JZCBvciBjdXJyZW50VXNlcklkXCIsIHsgcm9vbUlkLCBjdXJyZW50VXNlcklkIH0pXG4gICAgICBzZXRFcnJvcignTWlzc2luZyByb29tIElEIG9yIHVzZXIgSUQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbG9nKFwiW1N0YXJ0XSByb29tSWRcIiwgcm9vbUlkKVxuICAgIHNldElzU3RhcnRpbmcodHJ1ZSlcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgc2Vzc2lvbiBhbmQgYWNjZXNzIHRva2VuXG4gICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKVxuICAgICAgY29uc3QgaGFzVG9rZW4gPSAhIXNlc3Npb24/LmFjY2Vzc190b2tlblxuICAgICAgbG9nKFwiW1N0YXJ0XSBzZXNzaW9uIHRva2VuIHByZXNlbnQ/XCIsIGhhc1Rva2VuKVxuICAgICAgXG4gICAgICBpZiAoIXNlc3Npb24/LmFjY2Vzc190b2tlbikge1xuICAgICAgICBzZXRFcnJvcignTm8gYWNjZXNzIHRva2VuIGF2YWlsYWJsZS4gUGxlYXNlIGxvZyBpbiBhZ2Fpbi4nKVxuICAgICAgICBzZXRXc0Vycm9yKCdObyBhY2Nlc3MgdG9rZW4gYXZhaWxhYmxlJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEZldGNoIHRoZSByb29tIHJvdyBmaXJzdCB0byB2ZXJpZnkgb3duZXJzaGlwIGFuZCBjdXJyZW50IHN0YXR1c1xuICAgICAgY29uc3QgeyBkYXRhOiByb29tRGF0YSwgZXJyb3I6IHJvb21GZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncm9vbXMnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgb3duZXJfaWQsIHN0YXR1cycpXG4gICAgICAgIC5lcSgnaWQnLCByb29tSWQpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAocm9vbUZldGNoRXJyb3IgfHwgIXJvb21EYXRhKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gcm9vbUZldGNoRXJyb3I/Lm1lc3NhZ2UgfHwgJ1Jvb20gbm90IGZvdW5kJ1xuICAgICAgICBsb2dFcnJvcihcIltTdGFydF0gcm9vbSBmZXRjaCBlcnJvcjpcIiwgcm9vbUZldGNoRXJyb3IpXG4gICAgICAgIHNldEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggcm9vbTogJHtlcnJvck1zZ31gKVxuICAgICAgICBzZXRXc0Vycm9yKGBGYWlsZWQgdG8gZmV0Y2ggcm9vbTogJHtlcnJvck1zZ31gKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZ5IG93bmVyc2hpcFxuICAgICAgaWYgKGN1cnJlbnRVc2VySWQgIT09IHJvb21EYXRhLm93bmVyX2lkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gJ09ubHkgdGhlIHJvb20gb3duZXIgY2FuIHN0YXJ0IHRoZSBnYW1lJ1xuICAgICAgICBsb2coXCJbU3RhcnRdIE93bmVyc2hpcCBjaGVjayBmYWlsZWRcIiwgeyBjdXJyZW50VXNlcklkLCBvd25lcklkOiByb29tRGF0YS5vd25lcl9pZCB9KVxuICAgICAgICBzZXRFcnJvcihlcnJvck1zZylcbiAgICAgICAgc2V0V3NFcnJvcihlcnJvck1zZylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHN0YXR1cyBpcyBhbHJlYWR5IFwicGxheWluZ1wiLCBkbyBub3RoaW5nIChXUyBjb25uZWN0aW9uIGhhbmRsZWQgYnkgY29ubmVjdElmUGxheWluZylcbiAgICAgIGlmIChyb29tRGF0YS5zdGF0dXMgPT09ICdwbGF5aW5nJykge1xuICAgICAgICBsb2coXCJbU3RhcnRdIFJvb20gYWxyZWFkeSBwbGF5aW5nLCBza2lwcGluZyBQQVRDSFwiKVxuICAgICAgICBzZXRJc1N0YXJ0aW5nKGZhbHNlKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHJvb20gc3RhdHVzIHRvICdwbGF5aW5nJ1xuICAgICAgLy8gVGhlIHJlYWx0aW1lIHN1YnNjcmlwdGlvbiB3aWxsIHRyaWdnZXIgY29ubmVjdElmUGxheWluZyBmb3IgQUxMIHVzZXJzIChpbmNsdWRpbmcgb3duZXIpXG4gICAgICBsb2coXCJbU3RhcnRdIFBhdGNoaW5nIHJvb21zLnN0YXR1cyB0byAncGxheWluZydcIilcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncm9vbXMnKVxuICAgICAgICAudXBkYXRlKHsgc3RhdHVzOiAncGxheWluZycgfSlcbiAgICAgICAgLmVxKCdpZCcsIHJvb21JZClcblxuICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgIC8vIEhhbmRsZSBTdXBhYmFzZSBlcnJvciB3aXRoIGRldGFpbGVkIGluZm9ybWF0aW9uXG4gICAgICAgIGNvbnN0IGVycm9yRGV0YWlscyA9IHtcbiAgICAgICAgICBzdGF0dXM6ICh1cGRhdGVFcnJvciBhcyBhbnkpPy5zdGF0dXMgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZUVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgIGRldGFpbHM6ICh1cGRhdGVFcnJvciBhcyBhbnkpPy5kZXRhaWxzIHx8IG51bGwsXG4gICAgICAgICAgaGludDogKHVwZGF0ZUVycm9yIGFzIGFueSk/LmhpbnQgfHwgbnVsbCxcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbG9nRXJyb3IoJ1tTdGFydF0gcGF0Y2ggcm9vbXMuc3RhdHVzIHJlc3VsdCBFUlJPUjonLCBlcnJvckRldGFpbHMpXG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byB1cGRhdGUgcm9vbSBzdGF0dXM6ICR7ZXJyb3JEZXRhaWxzLm1lc3NhZ2V9JHtlcnJvckRldGFpbHMuaGludCA/IGAgKCR7ZXJyb3JEZXRhaWxzLmhpbnR9KWAgOiAnJ31gXG4gICAgICAgIHNldEVycm9yKGVycm9yTXNnKVxuICAgICAgICBzZXRXc0Vycm9yKGVycm9yTXNnKVxuICAgICAgICBzZXRJc1N0YXJ0aW5nKGZhbHNlKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgbG9nKFwiW1N0YXJ0XSBwYXRjaCByb29tcy5zdGF0dXMgcmVzdWx0IFNVQ0NFU1NcIilcbiAgICAgIC8vIE5vdGU6IFdTIGNvbm5lY3Rpb24gd2lsbCBiZSB0cmlnZ2VyZWQgYnkgcmVhbHRpbWUgc3Vic2NyaXB0aW9uIHZpYSBjb25uZWN0SWZQbGF5aW5nXG4gICAgICAvLyBSZXNldCBpc1N0YXJ0aW5nIHdoZW4gV1MgY29ubmVjdHMgb3IgYWZ0ZXIgYSB0aW1lb3V0XG4gICAgICBjb25zdCByZXNldFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0SXNTdGFydGluZyhmYWxzZSlcbiAgICAgIH0sIDUwMDApXG4gICAgICBcbiAgICAgIC8vIEFsc28gcmVzZXQgd2hlbiBXUyBjb25uZWN0cyBvciBlcnJvcnNcbiAgICAgIGNvbnN0IGNoZWNrQ29ubmVjdGlvbiA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKHdzU3RhdHVzID09PSAnY29ubmVjdGVkJyB8fCB3c1N0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tDb25uZWN0aW9uKVxuICAgICAgICAgIGNsZWFyVGltZW91dChyZXNldFRpbWVvdXQpXG4gICAgICAgICAgc2V0SXNTdGFydGluZyhmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKVxuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0Nvbm5lY3Rpb24pXG4gICAgICB9LCAxMDAwMClcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHN0YXJ0IGdhbWUnXG4gICAgICBsb2dFcnJvcignW1N0YXJ0XSBVbmV4cGVjdGVkIGVycm9yOicsIGVycilcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgIHNldFdzRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgc2V0SXNTdGFydGluZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVSZWNvbm5lY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFyb29tSWQgfHwgIWN1cnJlbnRVc2VySWQgfHwgIXJvb20pIHJldHVyblxuXG4gICAgLy8gQ2xvc2UgZXhpc3RpbmcgY29ubmVjdGlvbiBpZiBhbnlcbiAgICBpZiAod3NSZWYuY3VycmVudCkge1xuICAgICAgd3NSZWYuY3VycmVudC5jbG9zZSgpXG4gICAgICB3c1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgICBjb25uZWN0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZVxuXG4gICAgLy8gVXNlIGNvbm5lY3RJZlBsYXlpbmcgdG8gcmVjb25uZWN0IChvbmx5IGNvbm5lY3RzIGlmIHJvb20uc3RhdHVzID09PSBcInBsYXlpbmdcIilcbiAgICBhd2FpdCBjb25uZWN0SWZQbGF5aW5nKHJvb20uc3RhdHVzLCByb29tLmlkKVxuICB9XG5cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEFwcFNoZWxsPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLVs2MHZoXVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00IHctZnVsbCBtYXgtdy1tZFwiPlxuICAgICAgICAgICAgPFNrZWxldG9uIGNsYXNzTmFtZT1cImgtMTIgdy1mdWxsXCIgLz5cbiAgICAgICAgICAgIDxTa2VsZXRvbiBjbGFzc05hbWU9XCJoLTEwIHctMy80XCIgLz5cbiAgICAgICAgICAgIDxTa2VsZXRvbiBjbGFzc05hbWU9XCJoLTEwIHctZnVsbFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9BcHBTaGVsbD5cbiAgICApXG4gIH1cblxuICBpZiAoZXJyb3IgfHwgIXJvb20pIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEFwcFNoZWxsPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIDxVSUNhcmQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNiB0ZXh0LWNlbnRlciBzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tZGFuZ2VyKV1cIj57ZXJyb3IgfHwgJ1Jvb20gbm90IGZvdW5kJ308L3A+XG4gICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gbmF2aWdhdGUoJy9sb2JieScpfT5CYWNrIHRvIExvYmJ5PC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1VJQ2FyZD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0FwcFNoZWxsPlxuICAgIClcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXJzLmZpbmQoKHApID0+IHAucGxheWVyX2lkID09PSBjdXJyZW50VXNlcklkKVxuICBjb25zdCBpc093bmVyID0gY3VycmVudFVzZXJJZCA9PT0gcm9vbS5vd25lcl9pZFxuXG4gIHJldHVybiAoXG4gICAgPEFwcFNoZWxsXG4gICAgICB0aXRsZT17YFJvb206ICR7cm9vbS5jb2RlfWB9XG4gICAgICBzdWJ0aXRsZT17YFNjb3JlIExpbWl0OiAke3Njb3JlTGltaXR9YH1cbiAgICAgIHNob3dTaWduT3V0PXtmYWxzZX1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICB7LyogSGVhZGVyIEFjdGlvbnMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cImRhbmdlclwiIG9uQ2xpY2s9e2hhbmRsZUxlYXZlfSBkaXNhYmxlZD17bGVhdmluZ30gaXNMb2FkaW5nPXtsZWF2aW5nfT5cbiAgICAgICAgICAgIExlYXZlIFJvb21cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEVycm9yIEJhbm5lciAqL31cbiAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBiZy1bdmFyKC0tZGFuZ2VyLWJnKV0gYm9yZGVyIGJvcmRlci1bdmFyKC0tZGFuZ2VyKV0gdGV4dC1bdmFyKC0tZGFuZ2VyKV0gcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBST1VORF9TVEFSVCBCYW5uZXIgKi99XG4gICAgICAgIHtyb3VuZFN0YXJ0ICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBiZy1bdmFyKC0tc3VjY2VzcyldIHRleHQtd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbWRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3NOYW1lPVwidGV4dC1sZ1wiPlJvdW5kIHN0YXJ0aW5nLi4uPC9zdHJvbmc+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gb3BhY2l0eS05MFwiPlxuICAgICAgICAgICAgICAgIHtuZXcgRGF0ZShyb3VuZFN0YXJ0LnN0YXJ0ZWRBdCkudG9Mb2NhbGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIERFQUxUIEJhbm5lciAqL31cbiAgICAgICAge3lvdXJIYW5kICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBiZy1bdmFyKC0taW5mbyldIHRleHQtd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbWQgdGV4dC1jZW50ZXIgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQ2FyZHMgZGVhbHQuIFdhaXRpbmcgZm9yIHN0YXJ0ZXIuLi5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogRGVidWcgUGFuZWwgLSBvbmx5IGluIGRldiAqL31cbiAgICAgICAge2lzRGV2ICYmIChcbiAgICAgICAgICA8VUlDYXJkPlxuICAgICAgICAgICAgPFVJQ2FyZCBoZWFkZXI9ezxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1bdmFyKC0tdGV4dCldXCI+RGVidWcgSW5mbzwvaDM+fT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy00IGdhcC0yIHRleHQteHMgZm9udC1tb25vXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgYmctW3ZhcigtLWJnLWVsZXZhdGVkKV0gcm91bmRlZCBib3JkZXIgYm9yZGVyLVt2YXIoLS1ib3JkZXIpXVwiPlxuICAgICAgICAgICAgICAgICAgPHN0cm9uZz5yb29tLnN0YXR1czo8L3N0cm9uZz4ge3Jvb20uc3RhdHVzfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yIGJnLVt2YXIoLS1iZy1lbGV2YXRlZCldIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1bdmFyKC0tYm9yZGVyKV1cIj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+Y3VycmVudCBhdXRoLnVpZDo8L3N0cm9uZz4ge2N1cnJlbnRVc2VySWQgfHwgJ251bGwnfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yIGJnLVt2YXIoLS1iZy1lbGV2YXRlZCldIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1bdmFyKC0tYm9yZGVyKV1cIj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+cm9vbS5vd25lcl9pZDo8L3N0cm9uZz4ge3Jvb20ub3duZXJfaWR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgYmctW3ZhcigtLWJnLWVsZXZhdGVkKV0gcm91bmRlZCBib3JkZXIgYm9yZGVyLVt2YXIoLS1ib3JkZXIpXVwiPlxuICAgICAgICAgICAgICAgICAgPHN0cm9uZz5pc093bmVyOjwvc3Ryb25nPiB7aXNPd25lciA/ICd0cnVlJyA6ICdmYWxzZSd9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9VSUNhcmQ+XG4gICAgICAgICAgPC9VSUNhcmQ+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIFdlYlNvY2tldCBDb25uZWN0aW9uIFBhbmVsICovfVxuICAgICAgICA8VUlDYXJkPlxuICAgICAgICAgIDxVSUNhcmQgaGVhZGVyPXtcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LVt2YXIoLS10ZXh0KV1cIj5HYW1lIFNlcnZlciBDb25uZWN0aW9uPC9oMz5cbiAgICAgICAgICAgICAgPEJhZGdlXG4gICAgICAgICAgICAgICAgdmFyaWFudD17XG4gICAgICAgICAgICAgICAgICB3c1N0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgPyAnc3VjY2VzcycgOlxuICAgICAgICAgICAgICAgICAgd3NTdGF0dXMgPT09ICdjb25uZWN0aW5nJyB8fCB3c1N0YXR1cyA9PT0gJ3JlY29ubmVjdGluZycgPyAnd2FybmluZycgOlxuICAgICAgICAgICAgICAgICAgd3NTdGF0dXMgPT09ICdlcnJvcicgPyAnZGFuZ2VyJyA6ICdkZWZhdWx0J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt3c1N0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgJiYgJ+KXjyBDb25uZWN0ZWQnfVxuICAgICAgICAgICAgICAgIHt3c1N0YXR1cyA9PT0gJ2Nvbm5lY3RpbmcnICYmICfil48gQ29ubmVjdGluZy4uLid9XG4gICAgICAgICAgICAgICAge3dzU3RhdHVzID09PSAncmVjb25uZWN0aW5nJyAmJiBg4pePIFJlY29ubmVjdGluZyAoJHtyZWNvbm5lY3RBdHRlbXB0UmVmLmN1cnJlbnR9LzEwKS4uLmB9XG4gICAgICAgICAgICAgICAge3dzU3RhdHVzID09PSAnZXJyb3InICYmICfil48gRXJyb3InfVxuICAgICAgICAgICAgICAgIHt3c1N0YXR1cyA9PT0gJ2Rpc2Nvbm5lY3RlZCcgJiYgJ+KXiyBEaXNjb25uZWN0ZWQnfVxuICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgfT5cbiAgICAgICAgICAgIHt3c0Vycm9yICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHAtMyBiZy1bdmFyKC0tZGFuZ2VyLWJnKV0gYm9yZGVyIGJvcmRlci1bdmFyKC0tZGFuZ2VyKV0gdGV4dC1bdmFyKC0tZGFuZ2VyKV0gcm91bmRlZC1sZyB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAge3dzRXJyb3J9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFdTIERlYnVnIEluZm8gLSBvbmx5IGluIGRldiAqL31cbiAgICAgICAgICAgIHtpc0RldiAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBwLTMgYmctW3ZhcigtLWJnLWVsZXZhdGVkKV0gcm91bmRlZCB0ZXh0LXhzIGZvbnQtbW9ubyBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+d3NVcmw6PC9zdHJvbmc+IHt3c1VybCB8fCAnbm90IHNldCd9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+d3NSZWFkeVN0YXRlOjwvc3Ryb25nPiB7d3NSZWYuY3VycmVudCA/IHdzUmVmLmN1cnJlbnQucmVhZHlTdGF0ZSA6ICdudWxsJ30gXG4gICAgICAgICAgICAgICAgICAoe3dzUmVmLmN1cnJlbnQgPyBbJ0NPTk5FQ1RJTkcnLCAnT1BFTicsICdDTE9TSU5HJywgJ0NMT1NFRCddW3dzUmVmLmN1cnJlbnQucmVhZHlTdGF0ZV0gOiAnbnVsbCd9KVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5jb25uZWN0aW9uU3RhdHVzOjwvc3Ryb25nPiB7d3NTdGF0dXN9PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAge3dzU3RhdHVzID09PSAnZGlzY29ubmVjdGVkJyAmJiByb29tPy5zdGF0dXMgPT09ICdwbGF5aW5nJyAmJiAoXG4gICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT1cInNtXCIgb25DbGljaz17aGFuZGxlUmVjb25uZWN0fT5SZWNvbm5lY3Q8L0J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHsvKiBXUyBFdmVudHMgTG9nIC0gb25seSBpbiBkZXYgKi99XG4gICAgICAgICAgICB7aXNEZXYgJiYgd3NFdmVudHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtW3ZhcigtLXRleHQtbXV0ZWQpXSBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICBMYXN0IHt3c0V2ZW50cy5sZW5ndGh9IFdTIEV2ZW50czpcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC1oLVsyMDBweF0gb3ZlcmZsb3cteS1hdXRvIGJvcmRlciBib3JkZXItW3ZhcigtLWJvcmRlcildIHJvdW5kZWQgcC0yIGJnLVt2YXIoLS1iZy1lbGV2YXRlZCldIHRleHQteHMgZm9udC1tb25vIHNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICAgICAge3dzRXZlbnRzLm1hcCgoZXZlbnQsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YGV2ZW50LSR7ZXZlbnQudGltZXN0YW1wfS0ke2lkeH1gfSBjbGFzc05hbWU9XCJmbGV4IGdhcC0yIHAtMSBiZy1bdmFyKC0tYmctc3VyZmFjZSldIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1bdmFyKC0tYm9yZGVyKV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LVt2YXIoLS10ZXh0LW11dGVkKV0gbWluLXctWzgwcHhdXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bmV3IERhdGUoZXZlbnQudGltZXN0YW1wKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0taW5mbyldIGZvbnQtc2VtaWJvbGQgbWluLXctWzE1MHB4XVwiPntldmVudC5ldmVudH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAge2V2ZW50LmRhdGEgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tdGV4dCldIGZsZXgtMSBicmVhay1hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3R5cGVvZiBldmVudC5kYXRhID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGV2ZW50LmRhdGEpIDogU3RyaW5nKGV2ZW50LmRhdGEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFdTIE1lc3NhZ2VzIC0gb25seSBpbiBkZXYgKi99XG4gICAgICAgICAgICB7aXNEZXYgJiYgd3NNZXNzYWdlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1bdmFyKC0tdGV4dC1tdXRlZCldIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgIExhc3Qge3dzTWVzc2FnZXMubGVuZ3RofSBNZXNzYWdlczpcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC1oLVszMDBweF0gb3ZlcmZsb3cteS1hdXRvIGJvcmRlciBib3JkZXItW3ZhcigtLWJvcmRlcildIHJvdW5kZWQgcC0yIGJnLVt2YXIoLS1iZy1lbGV2YXRlZCldIHRleHQteHMgZm9udC1tb25vIHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAge3dzTWVzc2FnZXMubWFwKChtc2csIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YG1zZy0ke21zZy50eXBlfS0ke2lkeH1gfSBjbGFzc05hbWU9XCJwLTIgYmctW3ZhcigtLWJnLXN1cmZhY2UpXSByb3VuZGVkIGJvcmRlciBib3JkZXItW3ZhcigtLWJvcmRlcildIHdoaXRlc3BhY2UtcHJlLXdyYXAgYnJlYWstYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAge0pTT04uc3RyaW5naWZ5KG1zZywgbnVsbCwgMil9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1VJQ2FyZD5cbiAgICAgICAgPC9VSUNhcmQ+XG5cbiAgICAgICAgey8qIFBsYXllcnMgU2VjdGlvbiAqL31cbiAgICAgICAgPFVJQ2FyZD5cbiAgICAgICAgICA8VUlDYXJkIGhlYWRlcj17XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtW3ZhcigtLXRleHQpXVwiPlxuICAgICAgICAgICAgICBQbGF5ZXJzICh7cm9vbVN0YXRlUGxheWVycy5sZW5ndGggPiAwID8gcm9vbVN0YXRlUGxheWVycy5sZW5ndGggOiBwbGF5ZXJzLmxlbmd0aH0pXG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgIH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgdXNlIHBsYXllcnMgc3RhdGUgKHdoaWNoIGhhcyBwcm9maWxlcykgYXMgc291cmNlIG9mIHRydXRoIGZvciBkaXNwbGF5XG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgcmVhZHkgc3RhdHVzIGZyb20gcm9vbVN0YXRlUGxheWVycyBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJzVG9SZW5kZXIgPSBwbGF5ZXJzLm1hcChwID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21TdGF0ZVBsYXllciA9IHJvb21TdGF0ZVBsYXllcnMuZmluZChyc3AgPT4gcnNwLnBsYXllcklkID09PSBwLnBsYXllcl9pZClcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllcklkOiBwLnBsYXllcl9pZCxcbiAgICAgICAgICAgICAgICAgICAgaXNSZWFkeTogcm9vbVN0YXRlUGxheWVyPy5pc1JlYWR5ID8/IHAuaXNfcmVhZHksXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwLnByb2ZpbGU/LmRpc3BsYXlfbmFtZSB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAvLyBJZiByb29tU3RhdGVQbGF5ZXJzIGhhcyBwbGF5ZXJzIG5vdCBpbiBwbGF5ZXJzIGxpc3QsIGFkZCB0aGVtICh3aWxsIHNob3cgSUQgdW50aWwgcHJvZmlsZSBsb2FkcylcbiAgICAgICAgICAgICAgICBpZiAocm9vbVN0YXRlUGxheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICByb29tU3RhdGVQbGF5ZXJzLmZvckVhY2gocnNwID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwbGF5ZXJzVG9SZW5kZXIuZmluZChwID0+IHAucGxheWVySWQgPT09IHJzcC5wbGF5ZXJJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzVG9SZW5kZXIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogcnNwLnBsYXllcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSZWFkeTogcnNwLmlzUmVhZHksXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXJzVG9SZW5kZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1bdmFyKC0tdGV4dC1tdXRlZCldIHB5LThcIj5ObyBwbGF5ZXJzIGluIHJvb208L3A+XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllcnNUb1JlbmRlci5tYXAoKHBsYXllcikgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50UGxheWVyID0gcGxheWVyLnBsYXllcklkID09PSBjdXJyZW50VXNlcklkXG4gICAgICAgICAgICAgICAgICBjb25zdCBoYXNQYXNzZWQgPSBwYXNzZWRQbGF5ZXJJZHMuaW5jbHVkZXMocGxheWVyLnBsYXllcklkKVxuICAgICAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50VHVybiA9IHBsYXllci5wbGF5ZXJJZCA9PT0gY3VycmVudFR1cm5QbGF5ZXJJZFxuICAgICAgICAgICAgICAgICAgLy8gVXNlIGRpc3BsYXlOYW1lIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGxiYWNrIHRvIGdldFBsYXllckRpc3BsYXlOYW1lXG4gICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IHBsYXllci5kaXNwbGF5TmFtZSB8fCBnZXRQbGF5ZXJEaXNwbGF5TmFtZShwbGF5ZXIucGxheWVySWQpXG5cbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e3BsYXllci5wbGF5ZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTQgcm91bmRlZC1sZyBib3JkZXIgdHJhbnNpdGlvbi1hbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDdXJyZW50UGxheWVyICYmICdiZy1bdmFyKC0tcHJpbWFyeS1iZyldIGJvcmRlci1bdmFyKC0tcHJpbWFyeSldJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3VycmVudFR1cm4gJiYgJ2JnLVt2YXIoLS13YXJuaW5nLWJnKV0gYm9yZGVyLVt2YXIoLS13YXJuaW5nKV0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgIWlzQ3VycmVudFBsYXllciAmJiAhaXNDdXJyZW50VHVybiAmJiAnYmctW3ZhcigtLWJnLWVsZXZhdGVkKV0gYm9yZGVyLVt2YXIoLS1ib3JkZXIpXSBob3ZlcjpiZy1bdmFyKC0tc3VyZmFjZS1ob3ZlcildJ1xuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LVt2YXIoLS10ZXh0KV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAge2lzT3duZXIgJiYgcGxheWVyLnBsYXllcklkID09PSByb29tLm93bmVyX2lkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9XCJ3YXJuaW5nXCIgc2l6ZT1cInNtXCI+T3duZXI8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoYXNQYXNzZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD1cImRlZmF1bHRcIiBzaXplPVwic21cIj5QYXNzZWQ8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cGxheWVyLmlzUmVhZHkgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PVwic3VjY2Vzc1wiIHNpemU9XCJzbVwiPuKckyBSZWFkeTwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtW3ZhcigtLXRleHQtbXV0ZWQpXVwiPk5vdCBSZWFkeTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7aXNDdXJyZW50VHVybiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PVwid2FybmluZ1wiIHNpemU9XCJzbVwiPuKAoiBZb3VyIFR1cm48L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvVUlDYXJkPlxuICAgICAgICA8L1VJQ2FyZD5cblxuICAgICAgICB7LyogQWN0aW9ucyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHNtOmZsZXgtcm93IGdhcC00IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgIHtjdXJyZW50VXNlcklkICYmICgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb29tU3RhdGVQbGF5ZXIgPSByb29tU3RhdGVQbGF5ZXJzLmZpbmQocCA9PiBwLnBsYXllcklkID09PSBjdXJyZW50VXNlcklkKVxuICAgICAgICAgICAgY29uc3QgY3VycmVudFJlYWR5ID0gcm9vbVN0YXRlUGxheWVyIFxuICAgICAgICAgICAgICA/IHJvb21TdGF0ZVBsYXllci5pc1JlYWR5IFxuICAgICAgICAgICAgICA6IGN1cnJlbnRQbGF5ZXI/LmlzX3JlYWR5ID8/IGZhbHNlXG4gICAgICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gdXBkYXRpbmdSZWFkeSB8fCB3c1N0YXR1cyAhPT0gJ2Nvbm5lY3RlZCcgfHwgISFyb3VuZFN0YXJ0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVUb2dnbGVSZWFkeX1cbiAgICAgICAgICAgICAgICB2YXJpYW50PXtjdXJyZW50UmVhZHkgPyAnc3VjY2VzcycgOiAnc2Vjb25kYXJ5J31cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNEaXNhYmxlZH1cbiAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e3VwZGF0aW5nUmVhZHl9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3dzU3RhdHVzICE9PSAnY29ubmVjdGVkJyA/ICdDb25uZWN0IGZpcnN0JyA6IHJvdW5kU3RhcnQgPyAnUm91bmQgYWxyZWFkeSBzdGFydGVkJyA6ICcnfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3dzU3RhdHVzICE9PSAnY29ubmVjdGVkJyBcbiAgICAgICAgICAgICAgICAgID8gJ0Nvbm5lY3QgZmlyc3QnXG4gICAgICAgICAgICAgICAgICA6IHJvdW5kU3RhcnRcbiAgICAgICAgICAgICAgICAgID8gJ1JvdW5kIHN0YXJ0ZWQnXG4gICAgICAgICAgICAgICAgICA6IGN1cnJlbnRSZWFkeSBcbiAgICAgICAgICAgICAgICAgID8gJ01hcmsgTm90IFJlYWR5JyBcbiAgICAgICAgICAgICAgICAgIDogJ01hcmsgUmVhZHknfVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KSgpfVxuXG4gICAgICAgICAgey8qIE93bmVyIFJ1bGVzIFNldHRpbmcgKi99XG4gICAgICAgICAge2lzT3duZXIgJiYgcm9vbS5zdGF0dXMgIT09ICdwbGF5aW5nJyAmJiAhcm91bmRTdGFydCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHAtNCBiZy1bdmFyKC0tYmctZWxldmF0ZWQpXSByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItW3ZhcigtLWJvcmRlcildXCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwic2NvcmVMaW1pdFwiIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1bdmFyKC0tdGV4dCldXCI+XG4gICAgICAgICAgICAgICAgU2NvcmUgTGltaXQgKDEtNjApOlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICBpZD1cInNjb3JlTGltaXRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgIG1pbj1cIjFcIlxuICAgICAgICAgICAgICAgIG1heD1cIjYwXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2NvcmVMaW1pdElucHV0fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2NvcmVMaW1pdElucHV0KE1hdGgubWluKDYwLCBNYXRoLm1heCgxLCBOdW1iZXIoZS50YXJnZXQudmFsdWUpIHx8IDYwKSkpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMjAgcHgtMyBweS0yIGJnLVt2YXIoLS1iZy1zdXJmYWNlKV0gYm9yZGVyIGJvcmRlci1bdmFyKC0tYm9yZGVyKV0gcm91bmRlZC1sZyB0ZXh0LVt2YXIoLS10ZXh0KV0gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLVt2YXIoLS1ib3JkZXItZm9jdXMpXVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChzY29yZUxpbWl0SW5wdXQgPj0gMSAmJiBzY29yZUxpbWl0SW5wdXQgPD0gNjApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZFNldFJ1bGVzTWVzc2FnZShzY29yZUxpbWl0SW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoJ1Njb3JlIGxpbWl0IHVwZGF0ZWQnKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3dzU3RhdHVzICE9PSAnY29ubmVjdGVkJyB8fCBzY29yZUxpbWl0SW5wdXQgPCAxIHx8IHNjb3JlTGltaXRJbnB1dCA+IDYwfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt3c1N0YXR1cyAhPT0gJ2Nvbm5lY3RlZCcgPyAnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcgOiAnJ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNldCBSdWxlc1xuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgXG4gICAgICAgICAge2lzT3duZXIgJiYgcm9vbS5zdGF0dXMgIT09ICdwbGF5aW5nJyAmJiAhcm91bmRTdGFydCAmJiAoXG4gICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTdGFydH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3RhcnRpbmd9XG4gICAgICAgICAgICAgIGlzTG9hZGluZz17aXNTdGFydGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgU3RhcnQgR2FtZVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEdhbWUgQXJlYSAtIFBva2VyLXN0eWxlIFRhYmxlIFVJICovfVxuICAgICAgICB7eW91ckhhbmQgJiYgcm9vbT8uc3RhdHVzID09PSAncGxheWluZycgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAgICB7LyogUm91bmQgRW5kIEJhbm5lciAqL31cbiAgICAgICAgICAgIHtyb3VuZEVuZCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJnLVt2YXIoLS1zdWNjZXNzKV0gdGV4dC13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1tZCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3NOYW1lPVwidGV4dC1sZ1wiPlJvdW5kIGVuZGVkLiBXaW5uZXI6IHtyb3VuZEVuZC53aW5uZXJQbGF5ZXJJZH08L3N0cm9uZz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogQWN0aW9uIEVycm9yIEJhbm5lciAqL31cbiAgICAgICAgICAgIHthY3Rpb25FcnJvciAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLVt2YXIoLS1kYW5nZXItYmcpXSBib3JkZXIgYm9yZGVyLVt2YXIoLS1kYW5nZXIpXSB0ZXh0LVt2YXIoLS1kYW5nZXIpXSByb3VuZGVkLWxnIHRleHQtc20gZm9udC1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICB7YWN0aW9uRXJyb3J9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIE1haW4gR2FtZSBMYXlvdXQ6IFRhYmxlICsgUXVldWUgUGFuZWwgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbGc6ZmxleC1yb3cgZ2FwLTYganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgey8qIFRhYmxlIFZpZXcgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICA8VGFibGVWaWV3XG4gICAgICAgICAgICAgICAgICBzZWF0ZWRQbGF5ZXJJZHM9e3NlYXRlZFBsYXllcklkc31cbiAgICAgICAgICAgICAgICAgIGhhbmRzQ291bnQ9e2hhbmRzQ291bnR9XG4gICAgICAgICAgICAgICAgICB0b3RhbFNjb3Jlcz17dG90YWxTY29yZXN9XG4gICAgICAgICAgICAgICAgICBzY29yZUxpbWl0PXtzY29yZUxpbWl0fVxuICAgICAgICAgICAgICAgICAgY3VycmVudFR1cm5QbGF5ZXJJZD17Y3VycmVudFR1cm5QbGF5ZXJJZH1cbiAgICAgICAgICAgICAgICAgIGVsaW1pbmF0ZWQ9e2VsaW1pbmF0ZWR9XG4gICAgICAgICAgICAgICAgICBjdXJyZW50VXNlcklkPXtjdXJyZW50VXNlcklkfVxuICAgICAgICAgICAgICAgICAgbGFzdFBsYXk9e2xhc3RQbGF5fVxuICAgICAgICAgICAgICAgICAgcGxheWVyTmFtZXM9e3BsYXllck5hbWVNYXB9XG4gICAgICAgICAgICAgICAgICBwbGF5ZXJBdmF0YXJzPXtwbGF5ZXJBdmF0YXJNYXB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgey8qIFF1ZXVlIFBhbmVsICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxnOnctODBcIj5cbiAgICAgICAgICAgICAgICA8UXVldWVQYW5lbFxuICAgICAgICAgICAgICAgICAgcXVldWVQbGF5ZXJJZHM9e3F1ZXVlUGxheWVySWRzfVxuICAgICAgICAgICAgICAgICAgc2VhdGVkUGxheWVySWRzPXtzZWF0ZWRQbGF5ZXJJZHN9XG4gICAgICAgICAgICAgICAgICBoYW5kc0NvdW50PXtoYW5kc0NvdW50fVxuICAgICAgICAgICAgICAgICAgdG90YWxTY29yZXM9e3RvdGFsU2NvcmVzfVxuICAgICAgICAgICAgICAgICAgc2NvcmVMaW1pdD17c2NvcmVMaW1pdH1cbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRUdXJuUGxheWVySWQ9e2N1cnJlbnRUdXJuUGxheWVySWR9XG4gICAgICAgICAgICAgICAgICBlbGltaW5hdGVkPXtlbGltaW5hdGVkfVxuICAgICAgICAgICAgICAgICAgcGxheWVyTmFtZXM9e3BsYXllck5hbWVNYXB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIFlvdXIgSGFuZCBhbmQgQ29udHJvbHMgKEJvdHRvbSBDZW50ZXIpICovfVxuICAgICAgICAgICAgPFVJQ2FyZD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LWhlYWRpbmcgZm9udC1ib2xkIHRleHQtY3lhbi0zMDAgdGV4dC1nbG93LWN5YW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICBZb3VyIEhhbmQgKHt5b3VySGFuZC5sZW5ndGh9IGNhcmRzKVxuICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZENhcmRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMiB0ZXh0LXNtIHRleHQtbGltZS00MDAgdGV4dC1nbG93LWxpbWUgZm9udC1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAg4oCiIFNlbGVjdGVkOiB7c2VsZWN0ZWRDYXJkcy5sZW5ndGh9LzVcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICB7aGFuZE9yZGVyLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEhhbmRPcmRlcihbXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlNvcnQgY2FyZHMgYnkgcmFuayBhbmQgc3VpdFwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgU29ydFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0zIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHVzZXIgaGFzIGN1c3RvbSBvcmRlciwgdXNlIGl0OyBvdGhlcndpc2Ugc2hvdyBzb3J0ZWQgY2FyZHNcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZE9yZGVyLmxlbmd0aCA+IDAgJiYgaGFuZE9yZGVyLmxlbmd0aCA9PT0geW91ckhhbmQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyJ3MgY3VzdG9tIGFycmFuZ2VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZE9yZGVyLm1hcCgob3JpZ2luYWxJZHgpID0+IHlvdXJIYW5kW29yaWdpbmFsSWR4XSkuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgc29ydGVkIG9yZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc29ydENhcmRzKHlvdXJIYW5kKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkoKS5tYXAoKGNhcmQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gc2VsZWN0ZWRDYXJkcy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGMpID0+IGNhcmRzRXF1YWwoYywgY2FyZClcbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxJZHggPSB5b3VySGFuZC5maW5kSW5kZXgoKGMpID0+IGNhcmRzRXF1YWwoYywgY2FyZCkpXG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtjYXJkLnJhbmt9LSR7Y2FyZC5zdWl0fS0ke29yaWdpbmFsSWR4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydD17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdjYXJkSW5kZXgnLCBTdHJpbmcob3JpZ2luYWxJZHgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJvcD17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmFnZ2VkSW5kZXggPSBwYXJzZUludChlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdjYXJkSW5kZXgnKSwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJvcEluZGV4ID0gb3JpZ2luYWxJZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ2dlZEluZGV4ID09PSBkcm9wSW5kZXgpIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEhhbmRPcmRlcigocHJldk9yZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldk9yZGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIG9yZGVyIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5b3VySGFuZC5tYXAoKF8sIGlkeCkgPT4gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IFsuLi5wcmV2T3JkZXJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmFnZ2VkUG9zID0gbmV3T3JkZXIuaW5kZXhPZihkcmFnZ2VkSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkcm9wUG9zID0gbmV3T3JkZXIuaW5kZXhPZihkcm9wSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBkcmFnZ2VkIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09yZGVyLnNwbGljZShkcmFnZ2VkUG9zLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGF0IG5ldyBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T3JkZXIuc3BsaWNlKGRyb3BQb3MsIDAsIGRyYWdnZWRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld09yZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY3Vyc29yLW1vdmUgdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMjAwIGhvdmVyOnNjYWxlLTExMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxQbGF5aW5nQ2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQ9e2NhcmR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17aXNTZWxlY3RlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVDYXJkQ2xpY2soY2FyZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cIm1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIHsvKiBQbGF5L1Bhc3MgQnV0dG9ucyAqL31cbiAgICAgICAgICAgICAgICB7IXJvdW5kRW5kICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtNCBqdXN0aWZ5LWNlbnRlciBwdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQbGF5fVxuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJzdWNjZXNzXCJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkTGVuZ3RocyA9IFsxLCAyLCAzLCA1XVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF2YWxpZExlbmd0aHMuaW5jbHVkZXMoc2VsZWN0ZWRDYXJkcy5sZW5ndGgpIHx8ICFpc015VHVybiB8fCB3c1N0YXR1cyAhPT0gJ2Nvbm5lY3RlZCdcbiAgICAgICAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdzU3RhdHVzICE9PSAnY29ubmVjdGVkJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogIWlzTXlUdXJuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdOb3QgeW91ciB0dXJuJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxlY3RlZENhcmRzLmxlbmd0aCA9PT0gMCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnU2VsZWN0IDEsIDIsIDMsIG9yIDUgY2FyZHMgdG8gcGxheScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZWN0ZWRDYXJkcy5sZW5ndGggPT09IDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnNCBjYXJkcyBub3QgYWxsb3dlZC4gU2VsZWN0IDEsIDIsIDMsIG9yIDUgY2FyZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZWN0ZWRDYXJkcy5sZW5ndGggPiA1XG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gJ01heGltdW0gNSBjYXJkcyBhbGxvd2VkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgUExBWSB7c2VsZWN0ZWRDYXJkcy5sZW5ndGggPiAwICYmIGAoJHtzZWxlY3RlZENhcmRzLmxlbmd0aH0pYH1cbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQYXNzfVxuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJ3YXJuaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzTXlUdXJuIHx8ICFsYXN0UGxheSB8fCB3c1N0YXR1cyAhPT0gJ2Nvbm5lY3RlZCd9XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgd3NTdGF0dXMgIT09ICdjb25uZWN0ZWQnIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdXZWJTb2NrZXQgZGlzY29ubmVjdGVkJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAhaXNNeVR1cm4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gJ05vdCB5b3VyIHR1cm4nIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICFsYXN0UGxheSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnWW91IG11c3Qgc3RhcnQgdGhlIHRyaWNrJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIFBBU1NcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvVUlDYXJkPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9BcHBTaGVsbD5cbiAgKVxufVxuXG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ1c2VQYXJhbXMiLCJ1c2VOYXZpZ2F0ZSIsInN1cGFiYXNlIiwiY29ubmVjdEdhbWVTb2NrZXREZWJ1ZyIsImxvZyIsIndhcm4iLCJlcnJvciIsImxvZ0Vycm9yIiwibm9ybWFsaXplQ2FyZCIsInNvcnRDYXJkcyIsImNhcmRzRXF1YWwiLCJUYWJsZVZpZXciLCJQbGF5aW5nQ2FyZCIsIlF1ZXVlUGFuZWwiLCJBcHBTaGVsbCIsIkJ1dHRvbiIsIkNhcmQiLCJVSUNhcmQiLCJCYWRnZSIsInRvYXN0IiwiU2tlbGV0b24iLCJjbiIsImlzRGV2IiwicHJvY2VzcyIsIlJvb21QYWdlIiwicm9vbUlkIiwibmF2aWdhdGUiLCJyb29tIiwic2V0Um9vbSIsInBsYXllcnMiLCJzZXRQbGF5ZXJzIiwiY3VycmVudFVzZXJJZCIsInNldEN1cnJlbnRVc2VySWQiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInNldEVycm9yIiwidXBkYXRpbmdSZWFkeSIsInNldFVwZGF0aW5nUmVhZHkiLCJsZWF2aW5nIiwic2V0TGVhdmluZyIsImlzU3RhcnRpbmciLCJzZXRJc1N0YXJ0aW5nIiwid3NTdGF0dXMiLCJzZXRXc1N0YXR1cyIsIndzTWVzc2FnZXMiLCJzZXRXc01lc3NhZ2VzIiwid3NFcnJvciIsInNldFdzRXJyb3IiLCJ3c1JlZiIsImNvbm5lY3RpbmdSZWYiLCJ3c0V2ZW50cyIsInNldFdzRXZlbnRzIiwid3NVcmwiLCJzZXRXc1VybCIsInNob3VsZFJlY29ubmVjdFJlZiIsInJlY29ubmVjdEF0dGVtcHRSZWYiLCJyb29tQ2hhbm5lbFJlZiIsInBsYXllcnNDaGFubmVsUmVmIiwicm9vbVN0YXRlUGxheWVycyIsInNldFJvb21TdGF0ZVBsYXllcnMiLCJyb3VuZFN0YXJ0Iiwic2V0Um91bmRTdGFydCIsInlvdXJIYW5kIiwic2V0WW91ckhhbmQiLCJoYW5kT3JkZXIiLCJzZXRIYW5kT3JkZXIiLCJfcGVuZGluZ1BsYXlDYXJkcyIsInNldFBlbmRpbmdQbGF5Q2FyZHMiLCJwZW5kaW5nUGxheUNhcmRzUmVmIiwiX3N0YXJ0ZXJQbGF5ZXJJZCIsInNldFN0YXJ0ZXJQbGF5ZXJJZCIsIl9zdGFydGVyUmVhc29uIiwic2V0U3RhcnRlclJlYXNvbiIsInNlYXRlZFBsYXllcklkcyIsInNldFNlYXRlZFBsYXllcklkcyIsInF1ZXVlUGxheWVySWRzIiwic2V0UXVldWVQbGF5ZXJJZHMiLCJzZWxlY3RlZENhcmRzIiwic2V0U2VsZWN0ZWRDYXJkcyIsImN1cnJlbnRUdXJuUGxheWVySWQiLCJzZXRDdXJyZW50VHVyblBsYXllcklkIiwibGFzdFBsYXkiLCJzZXRMYXN0UGxheSIsImhhbmRzQ291bnQiLCJzZXRIYW5kc0NvdW50IiwiYWN0aW9uRXJyb3IiLCJzZXRBY3Rpb25FcnJvciIsIl9jYW5QYXNzIiwic2V0Q2FuUGFzcyIsInBhc3NlZFBsYXllcklkcyIsInNldFBhc3NlZFBsYXllcklkcyIsInJvdW5kRW5kIiwic2V0Um91bmRFbmQiLCJzY29yZUxpbWl0Iiwic2V0U2NvcmVMaW1pdCIsIl9zY29yZWJvYXJkIiwic2V0U2NvcmVib2FyZCIsInNjb3JlTGltaXRJbnB1dCIsInNldFNjb3JlTGltaXRJbnB1dCIsInRvdGFsU2NvcmVzIiwic2V0VG90YWxTY29yZXMiLCJlbGltaW5hdGVkIiwic2V0RWxpbWluYXRlZCIsImdldFBsYXllckRpc3BsYXlOYW1lIiwicGxheWVySWQiLCJwbGF5ZXIiLCJmaW5kIiwicCIsInBsYXllcl9pZCIsInByb2ZpbGUiLCJkaXNwbGF5X25hbWUiLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJwbGF5ZXJOYW1lTWFwIiwibWFwIiwiZm9yRWFjaCIsIm5hbWUiLCJwbGF5ZXJBdmF0YXJNYXAiLCJhdmF0YXJfdXJsIiwiY29ubmVjdElmUGxheWluZyIsInJvb21TdGF0dXMiLCJyb29tSWRUb0Nvbm5lY3QiLCJjdXJyZW50IiwicmVhZHlTdGF0ZSIsIldlYlNvY2tldCIsIk9QRU4iLCJDT05ORUNUSU5HIiwiQ0xPU0lORyIsIkNMT1NFRCIsImNsb3NlIiwiZGF0YSIsInNlc3Npb24iLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsImhhc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwid3NVcmxFbnYiLCJlbnYiLCJORVhUX1BVQkxJQ19HQU1FX1NFUlZFUl9XU19VUkwiLCJWSVRFX0dBTUVfU0VSVkVSX1dTX1VSTCIsIndzIiwibWVzc2FnZSIsInR5cGUiLCJwcmV2IiwibmV3TWVzc2FnZXMiLCJzbGljZSIsImVycm9yTXNnIiwic2V0VGltZW91dCIsImN1cnJlbnRSb29tSWQiLCJ0cmltIiwiZnJvbVBhcmFtcyIsImZyb21Db25uZWN0Iiwic3luY01lc3NhZ2UiLCJtZXNzYWdlU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsInNlbmQiLCJlcnIiLCJ3c1JlYWR5Iiwicm9vbUlkRnJvbVBhcmFtcyIsInJvb21JZEZyb21Db25uZWN0IiwiQXJyYXkiLCJpc0FycmF5Iiwibm9ybWFsaXplZExhc3RQbGF5IiwiY2FyZHMiLCJjYXJkIiwia2luZCIsImZpdmVLaW5kIiwic2NvcmVzTWFwIiwic2NvcmUiLCJPYmplY3QiLCJlbnRyaWVzIiwibm9ybWFsaXplZEhhbmQiLCJzb3J0ZWRIYW5kIiwiY3VycmVudFBsYXllcnMiLCJuZXdQbGF5ZXJJZHMiLCJleGlzdGluZ1BsYXllcklkcyIsIlNldCIsIm1pc3NpbmdQbGF5ZXJJZHMiLCJmaWx0ZXIiLCJpZCIsImhhcyIsIlByb21pc2UiLCJhbGwiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJleGlzdGluZyIsInJvb21faWQiLCJpc19yZWFkeSIsImlzUmVhZHkiLCJsZWZ0X2F0Iiwiam9pbmVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY2F0Y2giLCJzdGFydGVkQXQiLCJzY29yZXMiLCJzY29yZVZhbHVlIiwicHVzaCIsInRvdGFsU2NvcmUiLCJpbmNsdWRlcyIsInN0YXJ0ZXJQbGF5ZXJJZCIsInJlYXNvbiIsImNhblBhc3MiLCJwZW5kaW5nQ2FyZHMiLCJwcmV2SGFuZCIsInJlc3RvcmVkSGFuZCIsIndpbm5lclBsYXllcklkIiwiY29kZSIsIndhc0NsZWFuIiwic3RhdHVzIiwicmVjb25uZWN0RGVsYXlzIiwibWF4QXR0ZW1wdHMiLCJhdHRlbXB0UmVjb25uZWN0IiwiYXR0ZW1wdCIsImRlbGF5SW5kZXgiLCJNYXRoIiwibWluIiwiZGVsYXkiLCJsb2dFbnRyeSIsIm5ld0V2ZW50cyIsInNlbmRTeW5jUmVxdWVzdCIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwiZmV0Y2hEYXRhIiwidXNlciIsImdldFVzZXIiLCJyb29tRGF0YSIsInJvb21FcnJvciIsImZldGNoUGxheWVycyIsInJlbW92ZUNoYW5uZWwiLCJjaGFubmVsIiwib24iLCJldmVudCIsInNjaGVtYSIsInRhYmxlIiwic3Vic2NyaWJlIiwiY2hhbm5lbE5hbWUiLCJmaWx0ZXJTdHJpbmciLCJyb29tQ2hhbm5lbCIsInBheWxvYWQiLCJuZXciLCJ1cGRhdGVkUm9vbSIsInByZXZSb29tIiwic2NvcmVfbGltaXQiLCJzaG91bGRQb2xsIiwicG9sbEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwicGxheWVyc0RhdGEiLCJwbGF5ZXJzRXJyb3IiLCJpcyIsImFsbFBsYXllcnMiLCJhbGxFcnJvciIsIlN0cmluZyIsInBsYXllcnNXaXRoUHJvZmlsZXMiLCJwcm9maWxlRXJyb3IiLCJzZW5kUmVhZHlNZXNzYWdlIiwicmVhZHlNZXNzYWdlIiwic2VuZFBsYXlNZXNzYWdlIiwicGxheU1lc3NhZ2UiLCJuZXdIYW5kIiwiaGFuZENhcmQiLCJzb21lIiwicGxheWVkQ2FyZCIsInByZXZPcmRlciIsInBsYXllZEluZGljZXMiLCJmaW5kSW5kZXgiLCJpZHgiLCJuZXdPcmRlciIsImFkanVzdG1lbnQiLCJwbGF5ZWRJZHgiLCJzZW5kU2V0UnVsZXNNZXNzYWdlIiwibmV3U2NvcmVMaW1pdCIsInJ1bGVzTWVzc2FnZSIsInNlbmRQYXNzTWVzc2FnZSIsInBhc3NNZXNzYWdlIiwiaGFuZGxlQ2FyZENsaWNrIiwiaXNTZWxlY3RlZCIsImMiLCJyYW5rIiwic3VpdCIsImhhbmRsZVBsYXkiLCJ2YWxpZExlbmd0aHMiLCJoYW5kbGVQYXNzIiwiaXNNeVR1cm4iLCJoYW5kbGVUb2dnbGVSZWFkeSIsInJvb21TdGF0ZVBsYXllciIsInN1cGFiYXNlUGxheWVyIiwiY3VycmVudFJlYWR5U3RhdGUiLCJuZXdSZWFkeVN0YXRlIiwic2VudCIsImN1cnJlbnRQbGF5ZXIiLCJ1cGRhdGUiLCJoYW5kbGVMZWF2ZSIsIm1hcmtNYW51YWxDbG9zZSIsImhhbmRsZVN0YXJ0IiwiZSIsInByZXZlbnREZWZhdWx0Iiwicm9vbUZldGNoRXJyb3IiLCJvd25lcl9pZCIsIm93bmVySWQiLCJ1cGRhdGVFcnJvciIsImVycm9yRGV0YWlscyIsImRldGFpbHMiLCJoaW50IiwicmVzZXRUaW1lb3V0IiwiY2hlY2tDb25uZWN0aW9uIiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlUmVjb25uZWN0IiwiZGl2IiwiY2xhc3NOYW1lIiwib25DbGljayIsImlzT3duZXIiLCJ0aXRsZSIsInN1YnRpdGxlIiwic2hvd1NpZ25PdXQiLCJ2YXJpYW50IiwiZGlzYWJsZWQiLCJpc0xvYWRpbmciLCJzdHJvbmciLCJzcGFuIiwidG9Mb2NhbGVTdHJpbmciLCJoZWFkZXIiLCJoMyIsInNpemUiLCJ0aW1lc3RhbXAiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJtc2ciLCJoMiIsInBsYXllcnNUb1JlbmRlciIsInJzcCIsImRpc3BsYXlOYW1lIiwiaXNDdXJyZW50UGxheWVyIiwiaGFzUGFzc2VkIiwiaXNDdXJyZW50VHVybiIsImN1cnJlbnRSZWFkeSIsImlzRGlzYWJsZWQiLCJsYWJlbCIsImh0bWxGb3IiLCJpbnB1dCIsIm1heCIsInZhbHVlIiwib25DaGFuZ2UiLCJOdW1iZXIiLCJ0YXJnZXQiLCJzdWNjZXNzIiwicGxheWVyTmFtZXMiLCJwbGF5ZXJBdmF0YXJzIiwib3JpZ2luYWxJZHgiLCJCb29sZWFuIiwiZHJhZ2dhYmxlIiwib25EcmFnU3RhcnQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsIm9uRHJhZ092ZXIiLCJkcm9wRWZmZWN0Iiwib25Ecm9wIiwiZHJhZ2dlZEluZGV4IiwicGFyc2VJbnQiLCJnZXREYXRhIiwiZHJvcEluZGV4IiwiXyIsImRyYWdnZWRQb3MiLCJpbmRleE9mIiwiZHJvcFBvcyIsInNwbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/pages/RoomPage.tsx\n"));

/***/ })

});