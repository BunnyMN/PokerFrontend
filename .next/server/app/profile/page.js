(()=>{var e={};e.id=178,e.ids=[178],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4639:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(4591),t(5804),t(5866);var a=t(3191),s=t(8716),l=t(7922),n=t.n(l),i=t(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4591)),"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5804)),"/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/app/profile/page.tsx"],u="/profile/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},310:(e,r,t)=>{Promise.resolve().then(t.bind(t,3773))},3773:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var a=t(326),s=t(7577),l=t(9065),n=t(5197),i=t(1899),o=t(9646),d=t(897),c=t(7087);function u(){let e=(0,l.s0)(),[r,t]=(0,s.useState)(!0),[u,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),[m,f]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[v,y]=(0,s.useState)(null),[j,w]=(0,s.useState)(!1),N=(0,s.useMemo)(()=>{let e=m||g;return e&&e.split("@")[0].split(" ").filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join("")||"?"},[m,g]),k=async e=>{try{if(w(!0),!e.target.files||0===e.target.files.length)return;let{data:{session:r}}=await n.O.auth.getSession();if(!r?.user){c.A.error("Not authenticated");return}let t=e.target.files[0],a=t.name.split(".").pop(),s=r.user.id,l=`${s}/${Math.random()}.${a}`;if(v)try{let e=v.split("/"),r=e.findIndex(e=>"avatars"===e);if(-1!==r&&r<e.length-1){let t=e.slice(r+1).join("/");t&&await n.O.storage.from("avatars").remove([t])}}catch(e){console.warn("Failed to delete old avatar:",e)}let{error:i}=await n.O.storage.from("avatars").upload(l,t,{upsert:!0});if(i)throw i;let{data:o}=n.O.storage.from("avatars").getPublicUrl(l);if(y(o.publicUrl),r?.user){let{error:e}=await n.O.from("profiles").update({avatar_url:o.publicUrl}).eq("id",r.user.id);if(e)throw e;h(e=>e?{...e,avatar_url:o.publicUrl}:null)}c.A.success("Avatar uploaded successfully")}catch(e){console.error("Failed to upload avatar:",e),c.A.error("Failed to upload avatar")}finally{w(!1)}},_=async()=>{try{if(!v)return;let e=v.split("/"),r=e.findIndex(e=>"avatars"===e);if(-1!==r&&r<e.length-1){let t=e.slice(r+1).join("/");t&&await n.O.storage.from("avatars").remove([t])}let{data:{session:t}}=await n.O.auth.getSession();if(t?.user){let{error:e}=await n.O.from("profiles").update({avatar_url:null}).eq("id",t.user.id);if(e)throw e;h(e=>e?{...e,avatar_url:null}:null),y(null),c.A.success("Avatar removed")}}catch(e){console.error("Failed to remove avatar:",e),c.A.error("Failed to remove avatar")}},P=async()=>{if(x){p(!0);try{let{data:{session:r},error:t}=await n.O.auth.getSession();if(t)throw t;if(!r?.user){e("/auth");return}let a={id:r.user.id,display_name:m.trim()||null,avatar_url:v},{error:s}=await n.O.from("profiles").upsert(a,{onConflict:"id"});if(s)throw s;h(a),c.A.success("Profile updated")}catch(e){console.error("Failed to update profile:",e),c.A.error("Failed to update profile")}finally{p(!1)}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg)]",children:[a.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-[var(--bg-surface)]/80 backdrop-blur-md",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1.5",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-heading font-bold text-cyan-300 text-glow-cyan",children:"Profile"}),a.jsx("p",{className:"text-xs sm:text-sm text-cyan-400/70 font-medium",children:"Manage your account details"})]}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>e("/lobby"),className:"border border-white/10 hover:bg-white/5 hover:border-cyan-400/30",children:"Back to Lobby"})]})})}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 lg:py-12",children:(0,a.jsxs)(d.Zb,{className:"hover:shadow-glow-cyan transition-all duration-300",children:[a.jsx(d.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative group",children:[v?a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-cyan-400/30 ring-2 ring-cyan-400/20",children:a.jsx("img",{src:v,alt:"Profile",className:"w-full h-full object-cover",onError:e=>{let r=e.target;r.style.display="none";let t=r.parentElement;t&&(t.innerHTML=`<div class="w-full h-full flex items-center justify-center bg-cyan-400/15 text-cyan-300 font-bold text-lg">${N}</div>`)}})}):a.jsx("div",{className:"w-20 h-20 rounded-full bg-cyan-400/15 border-2 border-cyan-400/30 flex items-center justify-center text-cyan-300 font-bold text-xl ring-2 ring-cyan-400/20",children:N}),(0,a.jsxs)("div",{className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,a.jsxs)("label",{className:"cursor-pointer p-2 bg-cyan-400/20 hover:bg-cyan-400/30 rounded-full border border-cyan-400/50",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:k,disabled:j||r,className:"hidden"}),a.jsx("svg",{className:"w-4 h-4 text-cyan-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),v&&a.jsx("button",{onClick:_,disabled:j||r,className:"p-2 bg-red-500/20 hover:bg-red-500/30 rounded-full border border-red-400/50",children:a.jsx("svg",{className:"w-4 h-4 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,a.jsxs)("div",{children:[a.jsx(d.ll,{children:"Profile Info"}),a.jsx(d.SZ,{className:"mt-1",children:"Update your display name and profile picture. Email is read-only."})]})]})}),(0,a.jsxs)(d.aY,{className:"pt-6 space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs uppercase tracking-wider text-cyan-300/80 font-semibold",children:"Display Name"}),a.jsx(o.I,{value:m,onChange:e=>f(e.target.value),placeholder:"Enter your display name",disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs uppercase tracking-wider text-cyan-300/80 font-semibold",children:"Email"}),a.jsx(o.I,{value:g,readOnly:!0,disabled:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[a.jsx(i.z,{variant:"secondary",onClick:()=>e("/lobby"),disabled:u||r,children:"Cancel"}),a.jsx(i.z,{variant:"success",onClick:P,disabled:u||r,children:u?"Saving...":"Save Changes"})]})]})]})})]})}function p(){return a.jsx(u,{})}},897:(e,r,t)=>{"use strict";t.d(r,{Zb:()=>d,aY:()=>o,SZ:()=>i,Ol:()=>l,ll:()=>n});var a=t(326),s=t(97);function l({className:e,children:r,...t}){return a.jsx("div",{className:(0,s.cn)("px-6 py-4 border-b border-white/10",e),...t,children:r})}function n({className:e,children:r,...t}){return a.jsx("h3",{className:(0,s.cn)("text-lg font-heading font-bold text-cyan-300",e),...t,children:r})}function i({className:e,children:r,...t}){return a.jsx("p",{className:(0,s.cn)("text-sm text-cyan-400/70 mt-1",e),...t,children:r})}function o({className:e,children:r,...t}){return a.jsx("div",{className:(0,s.cn)("px-6 py-4",e),...t,children:r})}function d({className:e,header:r,footer:t,children:l,...n}){return(0,a.jsxs)("div",{className:(0,s.cn)("glass rounded-xl border border-white/10","hover:border-cyan-400/30 hover:bg-white/5 transition-all duration-200",e),...n,children:[r&&a.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r}),a.jsx("div",{className:(0,s.cn)(r||t?"px-6 py-4":"p-6"),children:l}),t&&a.jsx("div",{className:"px-6 py-4 border-t border-white/10",children:t})]})}},4591:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/bayartsogtbts/Desktop/Gerege Agent AI/Pp/poker_frontend/app/profile/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[644,450,121],()=>t(4639));module.exports=a})();